{"remainingRequest":"/Users/zhangyangzuo/Downloads/lucky-draw-master/node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js!/Users/zhangyangzuo/Downloads/lucky-draw-master/node_modules/_eslint-loader@2.2.1@eslint-loader/index.js??ref--14-0!/Users/zhangyangzuo/Downloads/lucky-draw-master/src/assets/lib/tagcanvas.js","dependencies":[{"path":"/Users/zhangyangzuo/Downloads/lucky-draw-master/src/assets/lib/tagcanvas.js","mtime":1617288854000},{"path":"/Users/zhangyangzuo/Downloads/lucky-draw-master/babel.config.js","mtime":1617288854000},{"path":"/Users/zhangyangzuo/Downloads/lucky-draw-master/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhangyangzuo/Downloads/lucky-draw-master/node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhangyangzuo/Downloads/lucky-draw-master/node_modules/_eslint-loader@2.2.1@eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF90eXBlb2YgPSByZXF1aXJlKCIvVXNlcnMvemhhbmd5YW5nenVvL0Rvd25sb2Fkcy9sdWNreS1kcmF3LW1hc3Rlci9ub2RlX21vZHVsZXMvX0BiYWJlbF9ydW50aW1lQDcuMTYuM0BAYmFiZWwvcnVudGltZS9oZWxwZXJzL3R5cGVvZiIpLmRlZmF1bHQ7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb3J0LmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbGwuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIik7CgovKiBlc2xpbnQtZGlzYWJsZSAqLwoKLyoqCiAqIENvcHlyaWdodCAoQykgMjAxMC0yMDE1IEdyYWhhbSBCcmVhY2gKICoKICogVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkKICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgTGVzc2VyIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5CiAqIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yCiAqIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uCiAqCiAqIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLAogKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZgogKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlCiAqIEdOVSBMZXNzZXIgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLgogKiAKICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIExlc3NlciBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlCiAqIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLiAgSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LgogKi8KCi8qKgogKiBUYWdDYW52YXMgMi45CiAqIEZvciBtb3JlIGluZm9ybWF0aW9uLCBwbGVhc2UgY29udGFjdCA8Z3JhaGFtQGdvYXQxMDAwLmNvbT4KICovCihmdW5jdGlvbiAoKSB7CiAgdmFyIE0sCiAgICAgIEssCiAgICAgIEwgPSBNYXRoLmFicywKICAgICAgYWggPSBNYXRoLnNpbiwKICAgICAgdyA9IE1hdGguY29zLAogICAgICBzID0gTWF0aC5tYXgsCiAgICAgIGFEID0gTWF0aC5taW4sCiAgICAgIGFwID0gTWF0aC5jZWlsLAogICAgICBGID0gTWF0aC5zcXJ0LAogICAgICBhdCA9IE1hdGgucG93LAogICAgICBoID0ge30sCiAgICAgIGwgPSB7fSwKICAgICAgbSA9IHsKICAgIDA6ICIwLCIsCiAgICAxOiAiMTcsIiwKICAgIDI6ICIzNCwiLAogICAgMzogIjUxLCIsCiAgICA0OiAiNjgsIiwKICAgIDU6ICI4NSwiLAogICAgNjogIjEwMiwiLAogICAgNzogIjExOSwiLAogICAgODogIjEzNiwiLAogICAgOTogIjE1MywiLAogICAgYTogIjE3MCwiLAogICAgQTogIjE3MCwiLAogICAgYjogIjE4NywiLAogICAgQjogIjE4NywiLAogICAgYzogIjIwNCwiLAogICAgQzogIjIwNCwiLAogICAgZDogIjIyMSwiLAogICAgRDogIjIyMSwiLAogICAgZTogIjIzOCwiLAogICAgRTogIjIzOCwiLAogICAgZjogIjI1NSwiLAogICAgRjogIjI1NSwiCiAgfSwKICAgICAgeCwKICAgICAgYywKICAgICAgUSwKICAgICAgYUYsCiAgICAgIEgsCiAgICAgIGFHLAogICAgICBhYSwKICAgICAgQyA9IGRvY3VtZW50LAogICAgICBwLAogICAgICBiID0ge307CgogIGZvciAoTSA9IDA7IE0gPCAyNTY7ICsrTSkgewogICAgSyA9IE0udG9TdHJpbmcoMTYpOwoKICAgIGlmIChNIDwgMTYpIHsKICAgICAgSyA9ICIwIiArIEs7CiAgICB9CgogICAgbFtLXSA9IGxbSy50b1VwcGVyQ2FzZSgpXSA9IE0udG9TdHJpbmcoKSArICIsIjsKICB9CgogIGZ1bmN0aW9uIGFpKGkpIHsKICAgIHJldHVybiB0eXBlb2YgaSAhPSAidW5kZWZpbmVkIjsKICB9CgogIGZ1bmN0aW9uIEkoaSkgewogICAgcmV0dXJuIF90eXBlb2YoaSkgPT0gIm9iamVjdCIgJiYgaSAhPSBudWxsOwogIH0KCiAgZnVuY3Rpb24gYXYoaSwgaiwgYUgpIHsKICAgIHJldHVybiBpc05hTihpKSA/IGFIIDogYUQoYUgsIHMoaiwgaSkpOwogIH0KCiAgZnVuY3Rpb24gYUEoKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBmdW5jdGlvbiBHKCkgewogICAgcmV0dXJuIG5ldyBEYXRlKCkudmFsdWVPZigpOwogIH0KCiAgZnVuY3Rpb24gQShhSCwgYUspIHsKICAgIHZhciBqID0gW10sCiAgICAgICAgYUkgPSBhSC5sZW5ndGgsCiAgICAgICAgYUo7CgogICAgZm9yIChhSiA9IDA7IGFKIDwgYUk7ICsrYUopIHsKICAgICAgai5wdXNoKGFIW2FKXSk7CiAgICB9CgogICAgai5zb3J0KGFLKTsKICAgIHJldHVybiBqOwogIH0KCiAgZnVuY3Rpb24gYW4oaikgewogICAgdmFyIGFJID0gai5sZW5ndGggLSAxLAogICAgICAgIGFILAogICAgICAgIGFKOwoKICAgIHdoaWxlIChhSSkgewogICAgICBhSiA9IH5+KE1hdGgucmFuZG9tKCkgKiBhSSk7CiAgICAgIGFIID0galthSV07CiAgICAgIGpbYUldID0galthSl07CiAgICAgIGpbYUpdID0gYUg7CiAgICAgIC0tYUk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBhZShpLCBhSCwgaikgewogICAgdGhpcy54ID0gaTsKICAgIHRoaXMueSA9IGFIOwogICAgdGhpcy56ID0gajsKICB9CgogIEggPSBhZS5wcm90b3R5cGU7CgogIEgubGVuZ3RoID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIEYodGhpcy54ICogdGhpcy54ICsgdGhpcy55ICogdGhpcy55ICsgdGhpcy56ICogdGhpcy56KTsKICB9OwoKICBILmRvdCA9IGZ1bmN0aW9uIChpKSB7CiAgICByZXR1cm4gdGhpcy54ICogaS54ICsgdGhpcy55ICogaS55ICsgdGhpcy56ICogaS56OwogIH07CgogIEguY3Jvc3MgPSBmdW5jdGlvbiAoaikgewogICAgdmFyIGkgPSB0aGlzLnkgKiBqLnogLSB0aGlzLnogKiBqLnksCiAgICAgICAgYUkgPSB0aGlzLnogKiBqLnggLSB0aGlzLnggKiBqLnosCiAgICAgICAgYUggPSB0aGlzLnggKiBqLnkgLSB0aGlzLnkgKiBqLng7CiAgICByZXR1cm4gbmV3IGFlKGksIGFJLCBhSCk7CiAgfTsKCiAgSC5hbmdsZSA9IGZ1bmN0aW9uIChqKSB7CiAgICB2YXIgaSA9IHRoaXMuZG90KGopLAogICAgICAgIGFIOwoKICAgIGlmIChpID09IDApIHsKICAgICAgcmV0dXJuIE1hdGguUEkgLyAyOwogICAgfQoKICAgIGFIID0gaSAvICh0aGlzLmxlbmd0aCgpICogai5sZW5ndGgoKSk7CgogICAgaWYgKGFIID49IDEpIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CgogICAgaWYgKGFIIDw9IC0xKSB7CiAgICAgIHJldHVybiBNYXRoLlBJOwogICAgfQoKICAgIHJldHVybiBNYXRoLmFjb3MoYUgpOwogIH07CgogIEgudW5pdCA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBpID0gdGhpcy5sZW5ndGgoKTsKICAgIHJldHVybiBuZXcgYWUodGhpcy54IC8gaSwgdGhpcy55IC8gaSwgdGhpcy56IC8gaSk7CiAgfTsKCiAgZnVuY3Rpb24gYWooYUgsIGopIHsKICAgIGogPSBqICogTWF0aC5QSSAvIDE4MDsKICAgIGFIID0gYUggKiBNYXRoLlBJIC8gMTgwOwogICAgdmFyIGkgPSBhaChhSCkgKiB3KGopLAogICAgICAgIGFKID0gLWFoKGopLAogICAgICAgIGFJID0gLXcoYUgpICogdyhqKTsKICAgIHJldHVybiBuZXcgYWUoaSwgYUosIGFJKTsKICB9CgogIGZ1bmN0aW9uIFIoaSkgewogICAgdGhpc1sxXSA9IHsKICAgICAgMTogaVswXSwKICAgICAgMjogaVsxXSwKICAgICAgMzogaVsyXQogICAgfTsKICAgIHRoaXNbMl0gPSB7CiAgICAgIDE6IGlbM10sCiAgICAgIDI6IGlbNF0sCiAgICAgIDM6IGlbNV0KICAgIH07CiAgICB0aGlzWzNdID0gewogICAgICAxOiBpWzZdLAogICAgICAyOiBpWzddLAogICAgICAzOiBpWzhdCiAgICB9OwogIH0KCiAgYUYgPSBSLnByb3RvdHlwZTsKCiAgUi5JZGVudGl0eSA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBuZXcgUihbMSwgMCwgMCwgMCwgMSwgMCwgMCwgMCwgMV0pOwogIH07CgogIFIuUm90YXRpb24gPSBmdW5jdGlvbiAoYUksIGkpIHsKICAgIHZhciBqID0gYWgoYUkpLAogICAgICAgIGFIID0gdyhhSSksCiAgICAgICAgYUogPSAxIC0gYUg7CiAgICByZXR1cm4gbmV3IFIoW2FIICsgYXQoaS54LCAyKSAqIGFKLCBpLnggKiBpLnkgKiBhSiAtIGkueiAqIGosIGkueCAqIGkueiAqIGFKICsgaS55ICogaiwgaS55ICogaS54ICogYUogKyBpLnogKiBqLCBhSCArIGF0KGkueSwgMikgKiBhSiwgaS55ICogaS56ICogYUogLSBpLnggKiBqLCBpLnogKiBpLnggKiBhSiAtIGkueSAqIGosIGkueiAqIGkueSAqIGFKICsgaS54ICogaiwgYUggKyBhdChpLnosIDIpICogYUpdKTsKICB9OwoKICBhRi5tdWwgPSBmdW5jdGlvbiAoYUgpIHsKICAgIHZhciBhSSA9IFtdLAogICAgICAgIGFMLAogICAgICAgIGFLLAogICAgICAgIGFKID0gYUgueGZvcm0gPyAxIDogMDsKCiAgICBmb3IgKGFMID0gMTsgYUwgPD0gMzsgKythTCkgewogICAgICBmb3IgKGFLID0gMTsgYUsgPD0gMzsgKythSykgewogICAgICAgIGlmIChhSikgewogICAgICAgICAgYUkucHVzaCh0aGlzW2FMXVsxXSAqIGFIWzFdW2FLXSArIHRoaXNbYUxdWzJdICogYUhbMl1bYUtdICsgdGhpc1thTF1bM10gKiBhSFszXVthS10pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhSS5wdXNoKHRoaXNbYUxdW2FLXSAqIGFIKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbmV3IFIoYUkpOwogIH07CgogIGFGLnhmb3JtID0gZnVuY3Rpb24gKGFIKSB7CiAgICB2YXIgaiA9IHt9LAogICAgICAgIGkgPSBhSC54LAogICAgICAgIGFKID0gYUgueSwKICAgICAgICBhSSA9IGFILno7CiAgICBqLnggPSBpICogdGhpc1sxXVsxXSArIGFKICogdGhpc1syXVsxXSArIGFJICogdGhpc1szXVsxXTsKICAgIGoueSA9IGkgKiB0aGlzWzFdWzJdICsgYUogKiB0aGlzWzJdWzJdICsgYUkgKiB0aGlzWzNdWzJdOwogICAgai56ID0gaSAqIHRoaXNbMV1bM10gKyBhSiAqIHRoaXNbMl1bM10gKyBhSSAqIHRoaXNbM11bM107CiAgICByZXR1cm4gajsKICB9OwoKICBmdW5jdGlvbiBxKGFJLCBhSywgYVEsIGFOLCBhUCkgewogICAgdmFyIGFMLAogICAgICAgIGFPLAogICAgICAgIGosCiAgICAgICAgYU0sCiAgICAgICAgYVIgPSBbXSwKICAgICAgICBhSCA9IDIgLyBhSSwKICAgICAgICBhSjsKICAgIGFKID0gTWF0aC5QSSAqICgzIC0gRig1KSArIChwYXJzZUZsb2F0KGFQKSA/IHBhcnNlRmxvYXQoYVApIDogMCkpOwoKICAgIGZvciAoYUwgPSAwOyBhTCA8IGFJOyArK2FMKSB7CiAgICAgIGFPID0gYUwgKiBhSCAtIDEgKyBhSCAvIDI7CiAgICAgIGogPSBGKDEgLSBhTyAqIGFPKTsKICAgICAgYU0gPSBhTCAqIGFKOwogICAgICBhUi5wdXNoKFt3KGFNKSAqIGogKiBhSywgYU8gKiBhUSwgYWgoYU0pICogaiAqIGFOXSk7CiAgICB9CgogICAgcmV0dXJuIGFSOwogIH0KCiAgZnVuY3Rpb24gVyhhSiwgYUgsIGFNLCBhVCwgYVEsIGFTKSB7CiAgICB2YXIgYVIsCiAgICAgICAgYVUgPSBbXSwKICAgICAgICBhSSA9IDIgLyBhSiwKICAgICAgICBhSywKICAgICAgICBhUCwKICAgICAgICBhTywKICAgICAgICBhTiwKICAgICAgICBhTDsKICAgIGFLID0gTWF0aC5QSSAqICgzIC0gRig1KSArIChwYXJzZUZsb2F0KGFTKSA/IHBhcnNlRmxvYXQoYVMpIDogMCkpOwoKICAgIGZvciAoYVAgPSAwOyBhUCA8IGFKOyArK2FQKSB7CiAgICAgIGFPID0gYVAgKiBhSSAtIDEgKyBhSSAvIDI7CiAgICAgIGFSID0gYVAgKiBhSzsKICAgICAgYU4gPSB3KGFSKTsKICAgICAgYUwgPSBhaChhUik7CiAgICAgIGFVLnB1c2goYUggPyBbYU8gKiBhTSwgYU4gKiBhVCwgYUwgKiBhUV0gOiBbYU4gKiBhTSwgYU8gKiBhVCwgYUwgKiBhUV0pOwogICAgfQoKICAgIHJldHVybiBhVTsKICB9CgogIGZ1bmN0aW9uIE4oYUgsIGFJLCBhTCwgYVIsIGFQLCBhTikgewogICAgdmFyIGFRLAogICAgICAgIGFTID0gW10sCiAgICAgICAgYUogPSBNYXRoLlBJICogMiAvIGFJLAogICAgICAgIGFPLAogICAgICAgIGFNLAogICAgICAgIGFLOwoKICAgIGZvciAoYU8gPSAwOyBhTyA8IGFJOyArK2FPKSB7CiAgICAgIGFRID0gYU8gKiBhSjsKICAgICAgYU0gPSB3KGFRKTsKICAgICAgYUsgPSBhaChhUSk7CiAgICAgIGFTLnB1c2goYUggPyBbYU4gKiBhTCwgYU0gKiBhUiwgYUsgKiBhUF0gOiBbYU0gKiBhTCwgYU4gKiBhUiwgYUsgKiBhUF0pOwogICAgfQoKICAgIHJldHVybiBhUzsKICB9CgogIGZ1bmN0aW9uIGFtKGFKLCBqLCBhSCwgYUksIGkpIHsKICAgIHJldHVybiBXKGFKLCAwLCBqLCBhSCwgYUksIGkpOwogIH0KCiAgZnVuY3Rpb24gYXUoYUosIGosIGFILCBhSSwgaSkgewogICAgcmV0dXJuIFcoYUosIDEsIGosIGFILCBhSSwgaSk7CiAgfQoKICBmdW5jdGlvbiBkKGFKLCBpLCBqLCBhSCwgYUkpIHsKICAgIGFJID0gaXNOYU4oYUkpID8gMCA6IGFJICogMTsKICAgIHJldHVybiBOKDAsIGFKLCBpLCBqLCBhSCwgYUkpOwogIH0KCiAgZnVuY3Rpb24gbihhSiwgaSwgaiwgYUgsIGFJKSB7CiAgICBhSSA9IGlzTmFOKGFJKSA/IDAgOiBhSSAqIDE7CiAgICByZXR1cm4gTigxLCBhSiwgaSwgaiwgYUgsIGFJKTsKICB9CgogIGZ1bmN0aW9uIGFvKGFIKSB7CiAgICB2YXIgaiA9IG5ldyBJbWFnZSgpOwoKICAgIGoub25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgYUkgPSBqLndpZHRoIC8gMiwKICAgICAgICAgIGkgPSBqLmhlaWdodCAvIDI7CgogICAgICBhSC5jZW50cmVGdW5jID0gZnVuY3Rpb24gKGFOLCBhSywgYUwsIGFKLCBhTSkgewogICAgICAgIGFOLnNldFRyYW5zZm9ybSgxLCAwLCAwLCAxLCAwLCAwKTsKICAgICAgICBhTi5nbG9iYWxBbHBoYSA9IDE7CiAgICAgICAgYU4uZHJhd0ltYWdlKGosIGFKIC0gYUksIGFNIC0gaSk7CiAgICAgIH07CiAgICB9OwoKICAgIGouc3JjID0gYUguY2VudHJlSW1hZ2U7CiAgfQoKICBmdW5jdGlvbiBVKGFLLCBpKSB7CiAgICB2YXIgYUogPSBhSywKICAgICAgICBhSSwKICAgICAgICBhSCwKICAgICAgICBqID0gKGkgKiAxKS50b1ByZWNpc2lvbigzKSArICIpIjsKCiAgICBpZiAoYUtbMF0gPT09ICIjIikgewogICAgICBpZiAoIWhbYUtdKSB7CiAgICAgICAgaWYgKGFLLmxlbmd0aCA9PT0gNCkgewogICAgICAgICAgaFthS10gPSAicmdiYSgiICsgbVthS1sxXV0gKyBtW2FLWzJdXSArIG1bYUtbM11dOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBoW2FLXSA9ICJyZ2JhKCIgKyBsW2FLLnN1YnN0cigxLCAyKV0gKyBsW2FLLnN1YnN0cigzLCAyKV0gKyBsW2FLLnN1YnN0cig1LCAyKV07CiAgICAgICAgfQogICAgICB9CgogICAgICBhSiA9IGhbYUtdICsgajsKICAgIH0gZWxzZSB7CiAgICAgIGlmIChhSy5zdWJzdHIoMCwgNCkgPT09ICJyZ2IoIiB8fCBhSy5zdWJzdHIoMCwgNCkgPT09ICJoc2woIikgewogICAgICAgIGFKID0gYUsucmVwbGFjZSgiKCIsICJhKCIpLnJlcGxhY2UoIikiLCAiLCIgKyBqKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoYUsuc3Vic3RyKDAsIDUpID09PSAicmdiYSgiIHx8IGFLLnN1YnN0cigwLCA1KSA9PT0gImhzbGEoIikgewogICAgICAgICAgYUkgPSBhSy5sYXN0SW5kZXhPZigiLCIpICsgMSwgYUggPSBhSy5pbmRleE9mKCIpIik7CiAgICAgICAgICBpICo9IHBhcnNlRmxvYXQoYUsuc3Vic3RyaW5nKGFJLCBhSCkpOwogICAgICAgICAgYUogPSBhSy5zdWJzdHIoMCwgYUkpICsgaS50b1ByZWNpc2lvbigzKSArICIpIjsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gYUo7CiAgfQoKICBmdW5jdGlvbiBQKGksIGopIHsKICAgIGlmICh3aW5kb3cuR192bWxDYW52YXNNYW5hZ2VyKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIHZhciBhSCA9IEMuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7CiAgICBhSC53aWR0aCA9IGk7CiAgICBhSC5oZWlnaHQgPSBqOwogICAgcmV0dXJuIGFIOwogIH0KCiAgZnVuY3Rpb24gYWwoKSB7CiAgICB2YXIgaiA9IFAoMywgMyksCiAgICAgICAgYUksCiAgICAgICAgYUg7CgogICAgaWYgKCFqKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBhSSA9IGouZ2V0Q29udGV4dCgiMmQiKTsKICAgIGFJLnN0cm9rZVN0eWxlID0gIiMwMDAiOwogICAgYUkuc2hhZG93Q29sb3IgPSAiI2ZmZiI7CiAgICBhSS5zaGFkb3dCbHVyID0gMzsKICAgIGFJLmdsb2JhbEFscGhhID0gMDsKICAgIGFJLnN0cm9rZVJlY3QoMiwgMiwgMiwgMik7CiAgICBhSS5nbG9iYWxBbHBoYSA9IDE7CiAgICBhSCA9IGFJLmdldEltYWdlRGF0YSgyLCAyLCAxLCAxKTsKICAgIGogPSBudWxsOwogICAgcmV0dXJuIGFILmRhdGFbMF0gPiAwOwogIH0KCiAgZnVuY3Rpb24gYWsoYUwsIGosIGFLLCBhSikgewogICAgdmFyIGFJID0gYUwuY3JlYXRlTGluZWFyR3JhZGllbnQoMCwgMCwgaiwgMCksCiAgICAgICAgYUg7CgogICAgZm9yIChhSCBpbiBhSikgewogICAgICBhSS5hZGRDb2xvclN0b3AoMSAtIGFILCBhSlthSF0pOwogICAgfQoKICAgIGFMLmZpbGxTdHlsZSA9IGFJOwogICAgYUwuZmlsbFJlY3QoMCwgYUssIGosIDEpOwogIH0KCiAgZnVuY3Rpb24gayhhSiwgYUgsIGopIHsKICAgIHZhciBhSSA9IDEwMjQsCiAgICAgICAgYU4gPSAxLAogICAgICAgIGFNID0gYUoud2VpZ2h0R3JhZGllbnQsCiAgICAgICAgYUwsCiAgICAgICAgYVAsCiAgICAgICAgYUssCiAgICAgICAgYU87CgogICAgaWYgKGFKLmdDYW52YXMpIHsKICAgICAgYVAgPSBhSi5nQ2FudmFzLmdldENvbnRleHQoIjJkIik7CiAgICAgIGFOID0gYUouZ0NhbnZhcy5oZWlnaHQ7CiAgICB9IGVsc2UgewogICAgICBpZiAoSShhTVswXSkpIHsKICAgICAgICBhTiA9IGFNLmxlbmd0aDsKICAgICAgfSBlbHNlIHsKICAgICAgICBhTSA9IFthTV07CiAgICAgIH0KCiAgICAgIGFKLmdDYW52YXMgPSBhTCA9IFAoYUksIGFOKTsKCiAgICAgIGlmICghYUwpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQoKICAgICAgYVAgPSBhTC5nZXRDb250ZXh0KCIyZCIpOwoKICAgICAgZm9yIChhSyA9IDA7IGFLIDwgYU47ICsrYUspIHsKICAgICAgICBhayhhUCwgYUksIGFLLCBhTVthS10pOwogICAgICB9CiAgICB9CgogICAgaiA9IHMoYUQoaiB8fCAwLCBhTiAtIDEpLCAwKTsKICAgIGFPID0gYVAuZ2V0SW1hZ2VEYXRhKH5+KChhSSAtIDEpICogYUgpLCBqLCAxLCAxKS5kYXRhOwogICAgcmV0dXJuICJyZ2JhKCIgKyBhT1swXSArICIsIiArIGFPWzFdICsgIiwiICsgYU9bMl0gKyAiLCIgKyBhT1szXSAvIDI1NSArICIpIjsKICB9CgogIGZ1bmN0aW9uIFgoYVEsIGFKLCBqLCBhVSwgYVQsIGFSLCBhUCwgYUwsIGFJLCBhUywgYUssIGFPKSB7CiAgICB2YXIgYU4gPSBhVCArIChhTCB8fCAwKSArIChhSS5sZW5ndGggJiYgYUlbMF0gPCAwID8gTChhSVswXSkgOiAwKSwKICAgICAgICBhSCA9IGFSICsgKGFMIHx8IDApICsgKGFJLmxlbmd0aCAmJiBhSVsxXSA8IDAgPyBMKGFJWzFdKSA6IDApLAogICAgICAgIGFNLAogICAgICAgIGFWOwogICAgYVEuZm9udCA9IGFKOwogICAgYVEudGV4dEJhc2VsaW5lID0gInRvcCI7CiAgICBhUS5maWxsU3R5bGUgPSBqOwogICAgYVAgJiYgKGFRLnNoYWRvd0NvbG9yID0gYVApOwogICAgYUwgJiYgKGFRLnNoYWRvd0JsdXIgPSBhTCk7CiAgICBhSS5sZW5ndGggJiYgKGFRLnNoYWRvd09mZnNldFggPSBhSVswXSwgYVEuc2hhZG93T2Zmc2V0WSA9IGFJWzFdKTsKCiAgICBmb3IgKGFNID0gMDsgYU0gPCBhVS5sZW5ndGg7ICsrYU0pIHsKICAgICAgYVYgPSAwOwoKICAgICAgaWYgKGFLKSB7CiAgICAgICAgaWYgKCJyaWdodCIgPT0gYU8pIHsKICAgICAgICAgIGFWID0gYVMgLSBhS1thTV07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmICgiY2VudHJlIiA9PSBhTykgewogICAgICAgICAgICBhViA9IChhUyAtIGFLW2FNXSkgLyAyOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgYVEuZmlsbFRleHQoYVVbYU1dLCBhTiArIGFWLCBhSCk7CiAgICAgIGFIICs9IHBhcnNlSW50KGFKKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGFyKGFMLCBpLCBhSywgaiwgYUksIGFKLCBhSCkgewogICAgaWYgKGFKKSB7CiAgICAgIGFMLmJlZ2luUGF0aCgpOwogICAgICBhTC5tb3ZlVG8oaSwgYUsgKyBhSSAtIGFKKTsKICAgICAgYUwuYXJjVG8oaSwgYUssIGkgKyBhSiwgYUssIGFKKTsKICAgICAgYUwuYXJjVG8oaSArIGosIGFLLCBpICsgaiwgYUsgKyBhSiwgYUopOwogICAgICBhTC5hcmNUbyhpICsgaiwgYUsgKyBhSSwgaSArIGogLSBhSiwgYUsgKyBhSSwgYUopOwogICAgICBhTC5hcmNUbyhpLCBhSyArIGFJLCBpLCBhSyArIGFJIC0gYUosIGFKKTsKICAgICAgYUwuY2xvc2VQYXRoKCk7CiAgICAgIGFMW2FIID8gInN0cm9rZSIgOiAiZmlsbCJdKCk7CiAgICB9IGVsc2UgewogICAgICBhTFthSCA/ICJzdHJva2VSZWN0IiA6ICJmaWxsUmVjdCJdKGksIGFLLCBqLCBhSSk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBnKGFOLCBpLCBhTCwgYUksIGFNLCBhSCwgYUosIGFLLCBqKSB7CiAgICB0aGlzLnN0cmluZ3MgPSBhTjsKICAgIHRoaXMuZm9udCA9IGk7CiAgICB0aGlzLndpZHRoID0gYUw7CiAgICB0aGlzLmhlaWdodCA9IGFJOwogICAgdGhpcy5tYXhXaWR0aCA9IGFNOwogICAgdGhpcy5zdHJpbmdXaWR0aHMgPSBhSDsKICAgIHRoaXMuYWxpZ24gPSBhSjsKICAgIHRoaXMudmFsaWduID0gYUs7CiAgICB0aGlzLnNjYWxlID0gajsKICB9CgogIGFhID0gZy5wcm90b3R5cGU7CgogIGFhLlNldEltYWdlID0gZnVuY3Rpb24gKGFLLCBqLCBhSSwgaSwgYUosIGFNLCBhSCwgYUwpIHsKICAgIHRoaXMuaW1hZ2UgPSBhSzsKICAgIHRoaXMuaXdpZHRoID0gaiAqIHRoaXMuc2NhbGU7CiAgICB0aGlzLmloZWlnaHQgPSBhSSAqIHRoaXMuc2NhbGU7CiAgICB0aGlzLmlwb3MgPSBpOwogICAgdGhpcy5pcGFkID0gYUogKiB0aGlzLnNjYWxlOwogICAgdGhpcy5pc2NhbGUgPSBhTDsKICAgIHRoaXMuaWFsaWduID0gYU07CiAgICB0aGlzLml2YWxpZ24gPSBhSDsKICB9OwoKICBhYS5BbGlnbiA9IGZ1bmN0aW9uIChqLCBhSCwgaSkgewogICAgdmFyIGFJID0gMDsKCiAgICBpZiAoaSA9PSAicmlnaHQiIHx8IGkgPT0gImJvdHRvbSIpIHsKICAgICAgYUkgPSBhSCAtIGo7CiAgICB9IGVsc2UgewogICAgICBpZiAoaSAhPSAibGVmdCIgJiYgaSAhPSAidG9wIikgewogICAgICAgIGFJID0gKGFIIC0gaikgLyAyOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIGFJOwogIH07CgogIGFhLkNyZWF0ZSA9IGZ1bmN0aW9uIChhVSwgYTAsIGFULCBhMSwgYVosIGFZLCBpLCBhWCwgYVApIHsKICAgIHZhciBhTiwKICAgICAgICBhTCwKICAgICAgICBhViwKICAgICAgICBhNiwKICAgICAgICBhMywKICAgICAgICBhMiwKICAgICAgICBhSiwKICAgICAgICBhSSwKICAgICAgICBhSCwKICAgICAgICBqLAogICAgICAgIGFNLAogICAgICAgIGFLLAogICAgICAgIGFPLAogICAgICAgIGFXLAogICAgICAgIGFTLAogICAgICAgIGE1ID0gTChpWzBdKSwKICAgICAgICBhNCA9IEwoaVsxXSksCiAgICAgICAgYVEsCiAgICAgICAgYVI7CiAgICBhWCA9IHMoYVgsIGE1ICsgYVksIGE0ICsgYVkpOwogICAgYTMgPSAyICogKGFYICsgYTEpOwogICAgYUogPSAyICogKGFYICsgYTEpOwogICAgYUwgPSB0aGlzLndpZHRoICsgYTM7CiAgICBhViA9IHRoaXMuaGVpZ2h0ICsgYUo7CiAgICBhSCA9IGogPSBhWCArIGExOwoKICAgIGlmICh0aGlzLmltYWdlKSB7CiAgICAgIGFNID0gYUsgPSBhWCArIGExOwogICAgICBhTyA9IHRoaXMuaXdpZHRoOwogICAgICBhVyA9IHRoaXMuaWhlaWdodDsKCiAgICAgIGlmICh0aGlzLmlwb3MgPT0gInRvcCIgfHwgdGhpcy5pcG9zID09ICJib3R0b20iKSB7CiAgICAgICAgaWYgKGFPIDwgdGhpcy53aWR0aCkgewogICAgICAgICAgYU0gKz0gdGhpcy5BbGlnbihhTywgdGhpcy53aWR0aCwgdGhpcy5pYWxpZ24pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhSCArPSB0aGlzLkFsaWduKHRoaXMud2lkdGgsIGFPLCB0aGlzLmFsaWduKTsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLmlwb3MgPT0gInRvcCIpIHsKICAgICAgICAgIGogKz0gYVcgKyB0aGlzLmlwYWQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGFLICs9IHRoaXMuaGVpZ2h0ICsgdGhpcy5pcGFkOwogICAgICAgIH0KCiAgICAgICAgYUwgPSBzKGFMLCBhTyArIGEzKTsKICAgICAgICBhViArPSBhVyArIHRoaXMuaXBhZDsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoYVcgPCB0aGlzLmhlaWdodCkgewogICAgICAgICAgYUsgKz0gdGhpcy5BbGlnbihhVywgdGhpcy5oZWlnaHQsIHRoaXMuaXZhbGlnbik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGogKz0gdGhpcy5BbGlnbih0aGlzLmhlaWdodCwgYVcsIHRoaXMudmFsaWduKTsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLmlwb3MgPT0gInJpZ2h0IikgewogICAgICAgICAgYU0gKz0gdGhpcy53aWR0aCArIHRoaXMuaXBhZDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYUggKz0gYU8gKyB0aGlzLmlwYWQ7CiAgICAgICAgfQoKICAgICAgICBhTCArPSBhTyArIHRoaXMuaXBhZDsKICAgICAgICBhViA9IHMoYVYsIGFXICsgYUopOwogICAgICB9CiAgICB9CgogICAgYU4gPSBQKGFMLCBhVik7CgogICAgaWYgKCFhTikgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICBhMyA9IGFKID0gYTEgLyAyOwogICAgYTIgPSBhTCAtIGExOwogICAgYUkgPSBhViAtIGExOwogICAgYVMgPSBhRChhUCwgYTIgLyAyLCBhSSAvIDIpOwogICAgYTYgPSBhTi5nZXRDb250ZXh0KCIyZCIpOwoKICAgIGlmIChhMCkgewogICAgICBhNi5maWxsU3R5bGUgPSBhMDsKICAgICAgYXIoYTYsIGEzLCBhSiwgYTIsIGFJLCBhUyk7CiAgICB9CgogICAgaWYgKGExKSB7CiAgICAgIGE2LnN0cm9rZVN0eWxlID0gYVQ7CiAgICAgIGE2LmxpbmVXaWR0aCA9IGExOwogICAgICBhcihhNiwgYTMsIGFKLCBhMiwgYUksIGFTLCB0cnVlKTsKICAgIH0KCiAgICBpZiAoYVkgfHwgYTUgfHwgYTQpIHsKICAgICAgYVEgPSBQKGFMLCBhVik7CgogICAgICBpZiAoYVEpIHsKICAgICAgICBhUiA9IGE2OwogICAgICAgIGE2ID0gYVEuZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgfQogICAgfQoKICAgIFgoYTYsIHRoaXMuZm9udCwgYVUsIHRoaXMuc3RyaW5ncywgYUgsIGosIDAsIDAsIFtdLCB0aGlzLm1heFdpZHRoLCB0aGlzLnN0cmluZ1dpZHRocywgdGhpcy5hbGlnbik7CgogICAgaWYgKHRoaXMuaW1hZ2UpIHsKICAgICAgYTYuZHJhd0ltYWdlKHRoaXMuaW1hZ2UsIGFNLCBhSywgYU8sIGFXKTsKICAgIH0KCiAgICBpZiAoYVIpIHsKICAgICAgYTYgPSBhUjsKICAgICAgYVogJiYgKGE2LnNoYWRvd0NvbG9yID0gYVopOwogICAgICBhWSAmJiAoYTYuc2hhZG93Qmx1ciA9IGFZKTsKICAgICAgYTYuc2hhZG93T2Zmc2V0WCA9IGlbMF07CiAgICAgIGE2LnNoYWRvd09mZnNldFkgPSBpWzFdOwogICAgICBhNi5kcmF3SW1hZ2UoYVEsIDAsIDApOwogICAgfQoKICAgIHJldHVybiBhTjsKICB9OwoKICBmdW5jdGlvbiB2KGFJLCBqLCBhSikgewogICAgdmFyIGFIID0gUChqLCBhSiksCiAgICAgICAgYUs7CgogICAgaWYgKCFhSCkgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICBhSyA9IGFILmdldENvbnRleHQoIjJkIik7CiAgICBhSy5kcmF3SW1hZ2UoYUksIChqIC0gYUkud2lkdGgpIC8gMiwgKGFKIC0gYUkuaGVpZ2h0KSAvIDIpOwogICAgcmV0dXJuIGFIOwogIH0KCiAgZnVuY3Rpb24gYXgoYUksIGosIGFKKSB7CiAgICB2YXIgYUggPSBQKGosIGFKKSwKICAgICAgICBhSzsKCiAgICBpZiAoIWFIKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIGFLID0gYUguZ2V0Q29udGV4dCgiMmQiKTsKICAgIGFLLmRyYXdJbWFnZShhSSwgMCwgMCwgaiwgYUopOwogICAgcmV0dXJuIGFIOwogIH0KCiAgZnVuY3Rpb24gYUMoYVUsIGFQLCBhViwgYVosIGFRLCBhTywgYU0sIGFTLCBhSywgYUwpIHsKICAgIHZhciBhSSA9IGFQICsgKDIgKiBhUyArIGFPKSAqIGFaLAogICAgICAgIGFSID0gYVYgKyAoMiAqIGFTICsgYU8pICogYVosCiAgICAgICAgYUogPSBQKGFJLCBhUiksCiAgICAgICAgYVksCiAgICAgICAgYVgsCiAgICAgICAgYUgsCiAgICAgICAgYVcsCiAgICAgICAgaiwKICAgICAgICBhMCwKICAgICAgICBhVCwKICAgICAgICBhTjsKCiAgICBpZiAoIWFKKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIGFPICo9IGFaOwogICAgYUsgKj0gYVo7CiAgICBhWCA9IGFIID0gYU8gLyAyOwogICAgYVcgPSBhSSAtIGFPOwogICAgaiA9IGFSIC0gYU87CiAgICBhUyA9IGFTICogYVogKyBhWDsKICAgIGFZID0gYUouZ2V0Q29udGV4dCgiMmQiKTsKICAgIGFOID0gYUQoYUssIGFXIC8gMiwgaiAvIDIpOwoKICAgIGlmIChhUSkgewogICAgICBhWS5maWxsU3R5bGUgPSBhUTsKICAgICAgYXIoYVksIGFYLCBhSCwgYVcsIGosIGFOKTsKICAgIH0KCiAgICBpZiAoYU8pIHsKICAgICAgYVkuc3Ryb2tlU3R5bGUgPSBhTTsKICAgICAgYVkubGluZVdpZHRoID0gYU87CiAgICAgIGFyKGFZLCBhWCwgYUgsIGFXLCBqLCBhTiwgdHJ1ZSk7CiAgICB9CgogICAgaWYgKGFMKSB7CiAgICAgIGEwID0gUChhSSwgYVIpOwogICAgICBhVCA9IGEwLmdldENvbnRleHQoIjJkIik7CiAgICAgIGFULmRyYXdJbWFnZShhVSwgYVMsIGFTLCBhUCwgYVYpOwogICAgICBhVC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAic291cmNlLWluIjsKICAgICAgYVQuZmlsbFN0eWxlID0gYU07CiAgICAgIGFULmZpbGxSZWN0KDAsIDAsIGFJLCBhUik7CiAgICAgIGFULmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICJkZXN0aW5hdGlvbi1vdmVyIjsKICAgICAgYVQuZHJhd0ltYWdlKGFKLCAwLCAwKTsKICAgICAgYVQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gInNvdXJjZS1vdmVyIjsKICAgICAgYVkuZHJhd0ltYWdlKGEwLCAwLCAwKTsKICAgIH0gZWxzZSB7CiAgICAgIGFZLmRyYXdJbWFnZShhVSwgYVMsIGFTLCBhVS53aWR0aCwgYVUuaGVpZ2h0KTsKICAgIH0KCiAgICByZXR1cm4gewogICAgICBpbWFnZTogYUosCiAgICAgIHdpZHRoOiBhSSAvIGFaLAogICAgICBoZWlnaHQ6IGFSIC8gYVoKICAgIH07CiAgfQoKICBmdW5jdGlvbiBhcShhSywgaiwgYUosIGFOLCBhTykgewogICAgdmFyIGFMLAogICAgICAgIGFNLAogICAgICAgIGFIID0gcGFyc2VGbG9hdChqKSwKICAgICAgICBhSSA9IHMoYUosIGFOKTsKICAgIGFMID0gUChhSiwgYU4pOwoKICAgIGlmICghYUwpIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgaWYgKGouaW5kZXhPZigiJSIpID4gMCkgewogICAgICBhSCA9IGFJICogYUggLyAxMDA7CiAgICB9IGVsc2UgewogICAgICBhSCA9IGFIICogYU87CiAgICB9CgogICAgYU0gPSBhTC5nZXRDb250ZXh0KCIyZCIpOwogICAgYU0uZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gInNvdXJjZS1vdmVyIjsKICAgIGFNLmZpbGxTdHlsZSA9ICIjZmZmIjsKCiAgICBpZiAoYUggPj0gYUkgLyAyKSB7CiAgICAgIGFIID0gYUQoYUosIGFOKSAvIDI7CiAgICAgIGFNLmJlZ2luUGF0aCgpOwogICAgICBhTS5tb3ZlVG8oYUogLyAyLCBhTiAvIDIpOwogICAgICBhTS5hcmMoYUogLyAyLCBhTiAvIDIsIGFILCAwLCAyICogTWF0aC5QSSwgZmFsc2UpOwogICAgICBhTS5maWxsKCk7CiAgICAgIGFNLmNsb3NlUGF0aCgpOwogICAgfSBlbHNlIHsKICAgICAgYUggPSBhRChhSiAvIDIsIGFOIC8gMiwgYUgpOwogICAgICBhcihhTSwgMCwgMCwgYUosIGFOLCBhSCwgdHJ1ZSk7CiAgICAgIGFNLmZpbGwoKTsKICAgIH0KCiAgICBhTS5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAic291cmNlLWluIjsKICAgIGFNLmRyYXdJbWFnZShhSywgMCwgMCwgYUosIGFOKTsKICAgIHJldHVybiBhTDsKICB9CgogIGZ1bmN0aW9uIFooYU4sIGFULCBhUCwgYUosIGFSLCBhUywgYUkpIHsKICAgIHZhciBhVSA9IEwoYUlbMF0pLAogICAgICAgIGFPID0gTChhSVsxXSksCiAgICAgICAgYUsgPSBhVCArIChhVSA+IGFTID8gYVUgKyBhUyA6IGFTICogMikgKiBhSiwKICAgICAgICBqID0gYVAgKyAoYU8gPiBhUyA/IGFPICsgYVMgOiBhUyAqIDIpICogYUosCiAgICAgICAgYU0gPSBhSiAqICgoYVMgfHwgMCkgKyAoYUlbMF0gPCAwID8gYVUgOiAwKSksCiAgICAgICAgYUggPSBhSiAqICgoYVMgfHwgMCkgKyAoYUlbMV0gPCAwID8gYU8gOiAwKSksCiAgICAgICAgYUwsCiAgICAgICAgYVE7CiAgICBhTCA9IFAoYUssIGopOwoKICAgIGlmICghYUwpIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgYVEgPSBhTC5nZXRDb250ZXh0KCIyZCIpOwogICAgYVIgJiYgKGFRLnNoYWRvd0NvbG9yID0gYVIpOwogICAgYVMgJiYgKGFRLnNoYWRvd0JsdXIgPSBhUyAqIGFKKTsKICAgIGFJICYmIChhUS5zaGFkb3dPZmZzZXRYID0gYUlbMF0gKiBhSiwgYVEuc2hhZG93T2Zmc2V0WSA9IGFJWzFdICogYUopOwogICAgYVEuZHJhd0ltYWdlKGFOLCBhTSwgYUgsIGFULCBhUCk7CiAgICByZXR1cm4gewogICAgICBpbWFnZTogYUwsCiAgICAgIHdpZHRoOiBhSyAvIGFKLAogICAgICBoZWlnaHQ6IGogLyBhSgogICAgfTsKICB9CgogIGZ1bmN0aW9uIHQoYVQsIGFMLCBhUikgewogICAgdmFyIGFTID0gcGFyc2VJbnQoYVQudG9TdHJpbmcoKS5sZW5ndGggKiBhUiksCiAgICAgICAgYUsgPSBwYXJzZUludChhUiAqIDIgKiBhVC5sZW5ndGgpLAogICAgICAgIGFJID0gUChhUywgYUspLAogICAgICAgIGFPLAogICAgICAgIGosCiAgICAgICAgYUosCiAgICAgICAgYU4sCiAgICAgICAgYVEsCiAgICAgICAgYVAsCiAgICAgICAgYUgsCiAgICAgICAgYU07CgogICAgaWYgKCFhSSkgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICBhTyA9IGFJLmdldENvbnRleHQoIjJkIik7CiAgICBhTy5maWxsU3R5bGUgPSAiIzAwMCI7CiAgICBhTy5maWxsUmVjdCgwLCAwLCBhUywgYUspOwogICAgWChhTywgYVIgKyAicHggIiArIGFMLCAiI2ZmZiIsIGFULCAwLCAwLCAwLCAwLCBbXSwgImNlbnRyZSIpOwogICAgaiA9IGFPLmdldEltYWdlRGF0YSgwLCAwLCBhUywgYUspOwogICAgYUogPSBqLndpZHRoOwogICAgYU4gPSBqLmhlaWdodDsKICAgIGFNID0gewogICAgICBtaW46IHsKICAgICAgICB4OiBhSiwKICAgICAgICB5OiBhTgogICAgICB9LAogICAgICBtYXg6IHsKICAgICAgICB4OiAtMSwKICAgICAgICB5OiAtMQogICAgICB9CiAgICB9OwoKICAgIGZvciAoYVAgPSAwOyBhUCA8IGFOOyArK2FQKSB7CiAgICAgIGZvciAoYVEgPSAwOyBhUSA8IGFKOyArK2FRKSB7CiAgICAgICAgYUggPSAoYVAgKiBhSiArIGFRKSAqIDQ7CgogICAgICAgIGlmIChqLmRhdGFbYUggKyAxXSA+IDApIHsKICAgICAgICAgIGlmIChhUSA8IGFNLm1pbi54KSB7CiAgICAgICAgICAgIGFNLm1pbi54ID0gYVE7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGFRID4gYU0ubWF4LngpIHsKICAgICAgICAgICAgYU0ubWF4LnggPSBhUTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoYVAgPCBhTS5taW4ueSkgewogICAgICAgICAgICBhTS5taW4ueSA9IGFQOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChhUCA+IGFNLm1heC55KSB7CiAgICAgICAgICAgIGFNLm1heC55ID0gYVA7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgaWYgKGFKICE9IGFTKSB7CiAgICAgIGFNLm1pbi54ICo9IGFTIC8gYUo7CiAgICAgIGFNLm1heC54ICo9IGFTIC8gYUo7CiAgICB9CgogICAgaWYgKGFOICE9IGFLKSB7CiAgICAgIGFNLm1pbi55ICo9IGFTIC8gYU47CiAgICAgIGFNLm1heC55ICo9IGFTIC8gYU47CiAgICB9CgogICAgYUkgPSBudWxsOwogICAgcmV0dXJuIGFNOwogIH0KCiAgZnVuY3Rpb24gbyhpKSB7CiAgICByZXR1cm4gIiciICsgaS5yZXBsYWNlKC8oXCd8XCIpL2csICIiKS5yZXBsYWNlKC9ccyosXHMqL2csICInLCAnIikgKyAiJyI7CiAgfQoKICBmdW5jdGlvbiBhZChpLCBqLCBhSCkgewogICAgYUggPSBhSCB8fCBDOwoKICAgIGlmIChhSC5hZGRFdmVudExpc3RlbmVyKSB7CiAgICAgIGFILmFkZEV2ZW50TGlzdGVuZXIoaSwgaiwgZmFsc2UpOwogICAgfSBlbHNlIHsKICAgICAgYUguYXR0YWNoRXZlbnQoIm9uIiArIGksIGopOwogICAgfQogIH0KCiAgZnVuY3Rpb24gYShpLCBqLCBhSCkgewogICAgYUggPSBhSCB8fCBDOwoKICAgIGlmIChhSC5yZW1vdmVFdmVudExpc3RlbmVyKSB7CiAgICAgIGFILnJlbW92ZUV2ZW50TGlzdGVuZXIoaSwgaik7CiAgICB9IGVsc2UgewogICAgICBhSC5kZXRhY2hFdmVudCgib24iICsgaSwgaik7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBhdyhhTCwgYUgsIGFQLCBhSykgewogICAgdmFyIGFRID0gYUsuaW1hZ2VTY2FsZSwKICAgICAgICBhTiwKICAgICAgICBhSSwKICAgICAgICBhTSwKICAgICAgICBqLAogICAgICAgIGFKLAogICAgICAgIGFPOwoKICAgIGlmICghYUguY29tcGxldGUpIHsKICAgICAgcmV0dXJuIGFkKCJsb2FkIiwgZnVuY3Rpb24gKCkgewogICAgICAgIGF3KGFMLCBhSCwgYVAsIGFLKTsKICAgICAgfSwgYUgpOwogICAgfQoKICAgIGlmICghYUwuY29tcGxldGUpIHsKICAgICAgcmV0dXJuIGFkKCJsb2FkIiwgZnVuY3Rpb24gKCkgewogICAgICAgIGF3KGFMLCBhSCwgYVAsIGFLKTsKICAgICAgfSwgYUwpOwogICAgfQoKICAgIGFILndpZHRoID0gYUgud2lkdGg7CiAgICBhSC5oZWlnaHQgPSBhSC5oZWlnaHQ7CgogICAgaWYgKGFRKSB7CiAgICAgIGFMLndpZHRoID0gYUgud2lkdGggKiBhUTsKICAgICAgYUwuaGVpZ2h0ID0gYUguaGVpZ2h0ICogYVE7CiAgICB9CgogICAgYVAuaXcgPSBhTC53aWR0aDsKICAgIGFQLmloID0gYUwuaGVpZ2h0OwoKICAgIGlmIChhSy50eHRPcHQpIHsKICAgICAgYUkgPSBhTDsKICAgICAgYU4gPSBhSy56b29tTWF4ICogYUsudHh0U2NhbGU7CiAgICAgIGFKID0gYVAuaXcgKiBhTjsKICAgICAgYU8gPSBhUC5paCAqIGFOOwoKICAgICAgaWYgKGFKIDwgYUgubmF0dXJhbFdpZHRoIHx8IGFPIDwgYUgubmF0dXJhbEhlaWdodCkgewogICAgICAgIGFJID0gYXgoYUwsIGFKLCBhTyk7CgogICAgICAgIGlmIChhSSkgewogICAgICAgICAgYVAuZmltYWdlID0gYUk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGFKID0gYVAuaXc7CiAgICAgICAgYU8gPSBhUC5paDsKICAgICAgICBhTiA9IDE7CiAgICAgIH0KCiAgICAgIGlmIChwYXJzZUZsb2F0KGFLLmltYWdlUmFkaXVzKSkgewogICAgICAgIGFQLmltYWdlID0gYVAuZmltYWdlID0gYUwgPSBhcShhUC5pbWFnZSwgYUsuaW1hZ2VSYWRpdXMsIGFKLCBhTywgYU4pOwogICAgICB9CgogICAgICBpZiAoIWFQLkhhc1RleHQoKSkgewogICAgICAgIGlmIChhSy5zaGFkb3cpIHsKICAgICAgICAgIGFJID0gWihhUC5pbWFnZSwgYUosIGFPLCBhTiwgYUsuc2hhZG93LCBhSy5zaGFkb3dCbHVyLCBhSy5zaGFkb3dPZmZzZXQpOwoKICAgICAgICAgIGlmIChhSSkgewogICAgICAgICAgICBhUC5maW1hZ2UgPSBhSS5pbWFnZTsKICAgICAgICAgICAgYVAudyA9IGFJLndpZHRoOwogICAgICAgICAgICBhUC5oID0gYUkuaGVpZ2h0OwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGFLLmJnQ29sb3VyIHx8IGFLLmJnT3V0bGluZVRoaWNrbmVzcykgewogICAgICAgICAgYU0gPSBhSy5iZ0NvbG91ciA9PSAidGFnIiA/IFkoYVAuYSwgImJhY2tncm91bmQtY29sb3IiKSA6IGFLLmJnQ29sb3VyOwogICAgICAgICAgaiA9IGFLLmJnT3V0bGluZSA9PSAidGFnIiA/IFkoYVAuYSwgImNvbG9yIikgOiBhSy5iZ091dGxpbmUgfHwgYUsudGV4dENvbG91cjsKICAgICAgICAgIGFKID0gYVAuZmltYWdlLndpZHRoOwogICAgICAgICAgYU8gPSBhUC5maW1hZ2UuaGVpZ2h0OwoKICAgICAgICAgIGlmIChhSy5vdXRsaW5lTWV0aG9kID09ICJjb2xvdXIiKSB7CiAgICAgICAgICAgIGFJID0gYUMoYVAuZmltYWdlLCBhSiwgYU8sIGFOLCBhTSwgYUsuYmdPdXRsaW5lVGhpY2tuZXNzLCBhUC5vdXRsaW5lLmNvbG91ciwgYUsucGFkZGluZywgYUsuYmdSYWRpdXMsIDEpOwoKICAgICAgICAgICAgaWYgKGFJKSB7CiAgICAgICAgICAgICAgYVAub2ltYWdlID0gYUkuaW1hZ2U7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBhSSA9IGFDKGFQLmZpbWFnZSwgYUosIGFPLCBhTiwgYU0sIGFLLmJnT3V0bGluZVRoaWNrbmVzcywgaiwgYUsucGFkZGluZywgYUsuYmdSYWRpdXMpOwoKICAgICAgICAgIGlmIChhSSkgewogICAgICAgICAgICBhUC5maW1hZ2UgPSBhSS5pbWFnZTsKICAgICAgICAgICAgYVAudyA9IGFJLndpZHRoOwogICAgICAgICAgICBhUC5oID0gYUkuaGVpZ2h0OwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGFLLm91dGxpbmVNZXRob2QgPT0gInNpemUiKSB7CiAgICAgICAgICBpZiAoYUsub3V0bGluZUluY3JlYXNlID4gMCkgewogICAgICAgICAgICBhUC5pdyArPSAyICogYUsub3V0bGluZUluY3JlYXNlOwogICAgICAgICAgICBhUC5paCArPSAyICogYUsub3V0bGluZUluY3JlYXNlOwogICAgICAgICAgICBhSiA9IGFOICogYVAuaXc7CiAgICAgICAgICAgIGFPID0gYU4gKiBhUC5paDsKICAgICAgICAgICAgYUkgPSBheChhUC5maW1hZ2UsIGFKLCBhTyk7CiAgICAgICAgICAgIGFQLm9pbWFnZSA9IGFJOwogICAgICAgICAgICBhUC5maW1hZ2UgPSB2KGFQLmZpbWFnZSwgYVAub2ltYWdlLndpZHRoLCBhUC5vaW1hZ2UuaGVpZ2h0KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGFKID0gYU4gKiAoYVAuaXcgKyAyICogYUsub3V0bGluZUluY3JlYXNlKTsKICAgICAgICAgICAgYU8gPSBhTiAqIChhUC5paCArIDIgKiBhSy5vdXRsaW5lSW5jcmVhc2UpOwogICAgICAgICAgICBhSSA9IGF4KGFQLmZpbWFnZSwgYUosIGFPKTsKICAgICAgICAgICAgYVAub2ltYWdlID0gdihhSSwgYVAuZmltYWdlLndpZHRoLCBhUC5maW1hZ2UuaGVpZ2h0KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBhUC5Jbml0KCk7CiAgfQoKICBmdW5jdGlvbiBZKGFJLCBhSCkgewogICAgdmFyIGogPSBDLmRlZmF1bHRWaWV3LAogICAgICAgIGkgPSBhSC5yZXBsYWNlKC9cLShbYS16XSkvZywgZnVuY3Rpb24gKGFKKSB7CiAgICAgIHJldHVybiBhSi5jaGFyQXQoMSkudG9VcHBlckNhc2UoKTsKICAgIH0pOwogICAgcmV0dXJuIGogJiYgai5nZXRDb21wdXRlZFN0eWxlICYmIGouZ2V0Q29tcHV0ZWRTdHlsZShhSSwgbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZShhSCkgfHwgYUkuY3VycmVudFN0eWxlICYmIGFJLmN1cnJlbnRTdHlsZVtpXTsKICB9CgogIGZ1bmN0aW9uIHUoaiwgYUksIGFIKSB7CiAgICB2YXIgaSA9IDEsCiAgICAgICAgYUo7CgogICAgaWYgKGFJKSB7CiAgICAgIGkgPSAxICogKGouZ2V0QXR0cmlidXRlKGFJKSB8fCBhSCk7CiAgICB9IGVsc2UgewogICAgICBpZiAoYUogPSBZKGosICJmb250LXNpemUiKSkgewogICAgICAgIGkgPSBhSi5pbmRleE9mKCJweCIpID4gLTEgJiYgYUoucmVwbGFjZSgicHgiLCAiIikgKiAxIHx8IGFKLmluZGV4T2YoInB0IikgPiAtMSAmJiBhSi5yZXBsYWNlKCJwdCIsICIiKSAqIDEuMjUgfHwgYUogKiAzLjM7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gaTsKICB9CgogIGZ1bmN0aW9uIGYoaSkgewogICAgcmV0dXJuIGkudGFyZ2V0ICYmIGFpKGkudGFyZ2V0LmlkKSA/IGkudGFyZ2V0LmlkIDogaS5zcmNFbGVtZW50LnBhcmVudE5vZGUuaWQ7CiAgfQoKICBmdW5jdGlvbiBTKGFKLCBhSykgewogICAgdmFyIGFJLAogICAgICAgIGFILAogICAgICAgIGkgPSBwYXJzZUludChZKGFLLCAid2lkdGgiKSkgLyBhSy53aWR0aCwKICAgICAgICBqID0gcGFyc2VJbnQoWShhSywgImhlaWdodCIpKSAvIGFLLmhlaWdodDsKCiAgICBpZiAoYWkoYUoub2Zmc2V0WCkpIHsKICAgICAgYUkgPSB7CiAgICAgICAgeDogYUoub2Zmc2V0WCwKICAgICAgICB5OiBhSi5vZmZzZXRZCiAgICAgIH07CiAgICB9IGVsc2UgewogICAgICBhSCA9IGFiKGFLLmlkKTsKCiAgICAgIGlmIChhaShhSi5jaGFuZ2VkVG91Y2hlcykpIHsKICAgICAgICBhSiA9IGFKLmNoYW5nZWRUb3VjaGVzWzBdOwogICAgICB9CgogICAgICBpZiAoYUoucGFnZVgpIHsKICAgICAgICBhSSA9IHsKICAgICAgICAgIHg6IGFKLnBhZ2VYIC0gYUgueCwKICAgICAgICAgIHk6IGFKLnBhZ2VZIC0gYUgueQogICAgICAgIH07CiAgICAgIH0KICAgIH0KCiAgICBpZiAoYUkgJiYgaSAmJiBqKSB7CiAgICAgIGFJLnggLz0gaTsKICAgICAgYUkueSAvPSBqOwogICAgfQoKICAgIHJldHVybiBhSTsKICB9CgogIGZ1bmN0aW9uIEIoYUgpIHsKICAgIHZhciBqID0gYUgudGFyZ2V0IHx8IGFILmZyb21FbGVtZW50LnBhcmVudE5vZGUsCiAgICAgICAgaSA9IHkudGNbai5pZF07CgogICAgaWYgKGkpIHsKICAgICAgaS5teCA9IGkubXkgPSAtMTsKICAgICAgaS5VbkZyZWV6ZSgpOwogICAgICBpLkVuZERyYWcoKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGFmKGFMKSB7CiAgICB2YXIgYUksCiAgICAgICAgYUggPSB5LAogICAgICAgIGosCiAgICAgICAgYUssCiAgICAgICAgYUogPSBmKGFMKTsKCiAgICBmb3IgKGFJIGluIGFILnRjKSB7CiAgICAgIGogPSBhSC50Y1thSV07CgogICAgICBpZiAoai50dHRpbWVyKSB7CiAgICAgICAgY2xlYXJUaW1lb3V0KGoudHR0aW1lcik7CiAgICAgICAgai50dHRpbWVyID0gbnVsbDsKICAgICAgfQogICAgfQoKICAgIGlmIChhSiAmJiBhSC50Y1thSl0pIHsKICAgICAgaiA9IGFILnRjW2FKXTsKCiAgICAgIGlmIChhSyA9IFMoYUwsIGouY2FudmFzKSkgewogICAgICAgIGoubXggPSBhSy54OwogICAgICAgIGoubXkgPSBhSy55OwogICAgICAgIGouRHJhZyhhTCwgYUspOwogICAgICB9CgogICAgICBqLmRyYXduID0gMDsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHooYUkpIHsKICAgIHZhciBqID0geSwKICAgICAgICBpID0gQy5hZGRFdmVudExpc3RlbmVyID8gMCA6IDEsCiAgICAgICAgYUggPSBmKGFJKTsKCiAgICBpZiAoYUggJiYgYUkuYnV0dG9uID09IGkgJiYgai50Y1thSF0pIHsKICAgICAgai50Y1thSF0uQmVnaW5EcmFnKGFJKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGFFKGFKKSB7CiAgICB2YXIgYUggPSB5LAogICAgICAgIGogPSBDLmFkZEV2ZW50TGlzdGVuZXIgPyAwIDogMSwKICAgICAgICBhSSA9IGYoYUopLAogICAgICAgIGk7CgogICAgaWYgKGFJICYmIGFKLmJ1dHRvbiA9PSBqICYmIGFILnRjW2FJXSkgewogICAgICBpID0gYUgudGNbYUldOwogICAgICBhZihhSik7CgogICAgICBpZiAoIWkuRW5kRHJhZygpICYmICFpLnRvdWNoU3RhdGUpIHsKICAgICAgICBpLkNsaWNrZWQoYUopOwogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiBUKGFJKSB7CiAgICB2YXIgaiA9IGYoYUkpLAogICAgICAgIGkgPSBqICYmIHkudGNbal0sCiAgICAgICAgYUg7CgogICAgaWYgKGkgJiYgYUkuY2hhbmdlZFRvdWNoZXMpIHsKICAgICAgaWYgKGFJLnRvdWNoZXMubGVuZ3RoID09IDEgJiYgaS50b3VjaFN0YXRlID09IDApIHsKICAgICAgICBpLnRvdWNoU3RhdGUgPSAxOwogICAgICAgIGkuQmVnaW5EcmFnKGFJKTsKCiAgICAgICAgaWYgKGFIID0gUyhhSSwgaS5jYW52YXMpKSB7CiAgICAgICAgICBpLm14ID0gYUgueDsKICAgICAgICAgIGkubXkgPSBhSC55OwogICAgICAgICAgaS5kcmF3biA9IDA7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmIChhSS50YXJnZXRUb3VjaGVzLmxlbmd0aCA9PSAyICYmIGkucGluY2hab29tKSB7CiAgICAgICAgICBpLnRvdWNoU3RhdGUgPSAzOwogICAgICAgICAgaS5FbmREcmFnKCk7CiAgICAgICAgICBpLkJlZ2luUGluY2goYUkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpLkVuZERyYWcoKTsKICAgICAgICAgIGkuRW5kUGluY2goKTsKICAgICAgICAgIGkudG91Y2hTdGF0ZSA9IDA7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiByKGFIKSB7CiAgICB2YXIgaiA9IGYoYUgpLAogICAgICAgIGkgPSBqICYmIHkudGNbal07CgogICAgaWYgKGkgJiYgYUguY2hhbmdlZFRvdWNoZXMpIHsKICAgICAgc3dpdGNoIChpLnRvdWNoU3RhdGUpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBpLkRyYXcoKTsKICAgICAgICAgIGkuQ2xpY2tlZCgpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMjoKICAgICAgICAgIGkuRW5kRHJhZygpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIGkuRW5kUGluY2goKTsKICAgICAgfQoKICAgICAgaS50b3VjaFN0YXRlID0gMDsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGF6KGFMKSB7CiAgICB2YXIgYUksCiAgICAgICAgYUggPSB5LAogICAgICAgIGosCiAgICAgICAgYUssCiAgICAgICAgYUogPSBmKGFMKTsKCiAgICBmb3IgKGFJIGluIGFILnRjKSB7CiAgICAgIGogPSBhSC50Y1thSV07CgogICAgICBpZiAoai50dHRpbWVyKSB7CiAgICAgICAgY2xlYXJUaW1lb3V0KGoudHR0aW1lcik7CiAgICAgICAgai50dHRpbWVyID0gbnVsbDsKICAgICAgfQogICAgfQoKICAgIGogPSBhSiAmJiBhSC50Y1thSl07CgogICAgaWYgKGogJiYgYUwuY2hhbmdlZFRvdWNoZXMgJiYgai50b3VjaFN0YXRlKSB7CiAgICAgIHN3aXRjaCAoai50b3VjaFN0YXRlKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgIGNhc2UgMjoKICAgICAgICAgIGlmIChhSyA9IFMoYUwsIGouY2FudmFzKSkgewogICAgICAgICAgICBqLm14ID0gYUsueDsKICAgICAgICAgICAgai5teSA9IGFLLnk7CgogICAgICAgICAgICBpZiAoai5EcmFnKGFMLCBhSykpIHsKICAgICAgICAgICAgICBqLnRvdWNoU3RhdGUgPSAyOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIGouUGluY2goYUwpOwogICAgICB9CgogICAgICBqLmRyYXduID0gMDsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGFnKGFIKSB7CiAgICB2YXIgaSA9IHksCiAgICAgICAgaiA9IGYoYUgpOwoKICAgIGlmIChqICYmIGkudGNbal0pIHsKICAgICAgYUguY2FuY2VsQnViYmxlID0gdHJ1ZTsKICAgICAgYUgucmV0dXJuVmFsdWUgPSBmYWxzZTsKICAgICAgYUgucHJldmVudERlZmF1bHQgJiYgYUgucHJldmVudERlZmF1bHQoKTsKICAgICAgaS50Y1tqXS5XaGVlbCgoYUgud2hlZWxEZWx0YSB8fCBhSC5kZXRhaWwpID4gMCk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBhYyhhSSkgewogICAgdmFyIGFILAogICAgICAgIGogPSB5OwogICAgY2xlYXJUaW1lb3V0KGouc2Nyb2xsVGltZXIpOwoKICAgIGZvciAoYUggaW4gai50YykgewogICAgICBqLnRjW2FIXS5QYXVzZSgpOwogICAgfQoKICAgIGouc2Nyb2xsVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGFLLAogICAgICAgICAgYUogPSB5OwoKICAgICAgZm9yIChhSyBpbiBhSi50YykgewogICAgICAgIGFKLnRjW2FLXS5SZXN1bWUoKTsKICAgICAgfQogICAgfSwgai5zY3JvbGxQYXVzZSk7CiAgfQoKICBmdW5jdGlvbiBPKCkgewogICAgRShHKCkpOwogIH0KCiAgZnVuY3Rpb24gRShhSSkgewogICAgdmFyIGogPSB5LnRjLAogICAgICAgIGFIOwogICAgeS5OZXh0RnJhbWUoeS5pbnRlcnZhbCk7CiAgICBhSSA9IGFJIHx8IEcoKTsKCiAgICBmb3IgKGFIIGluIGopIHsKICAgICAgalthSF0uRHJhdyhhSSk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBhYihhSCkgewogICAgdmFyIGFLID0gQy5nZXRFbGVtZW50QnlJZChhSCksCiAgICAgICAgaSA9IGFLLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLAogICAgICAgIGFOID0gQy5kb2N1bWVudEVsZW1lbnQsCiAgICAgICAgYUwgPSBDLmJvZHksCiAgICAgICAgYU0gPSB3aW5kb3csCiAgICAgICAgYUkgPSBhTS5wYWdlWE9mZnNldCB8fCBhTi5zY3JvbGxMZWZ0LAogICAgICAgIGFPID0gYU0ucGFnZVlPZmZzZXQgfHwgYU4uc2Nyb2xsVG9wLAogICAgICAgIGFKID0gYU4uY2xpZW50TGVmdCB8fCBhTC5jbGllbnRMZWZ0LAogICAgICAgIGogPSBhTi5jbGllbnRUb3AgfHwgYUwuY2xpZW50VG9wOwogICAgcmV0dXJuIHsKICAgICAgeDogaS5sZWZ0ICsgYUkgLSBhSiwKICAgICAgeTogaS50b3AgKyBhTyAtIGoKICAgIH07CiAgfQoKICBmdW5jdGlvbiBWKGosIGFJLCBhSiwgYUgpIHsKICAgIHZhciBpID0gai5yYWRpdXMgKiBqLnoxIC8gKGouejEgKyBqLnoyICsgYUkueik7CiAgICByZXR1cm4gewogICAgICB4OiBhSS54ICogaSAqIGFKLAogICAgICB5OiBhSS55ICogaSAqIGFILAogICAgICB6OiBhSS56LAogICAgICB3OiAoai56MSAtIGFJLnopIC8gai56MgogICAgfTsKICB9CgogIGZ1bmN0aW9uIGFCKGkpIHsKICAgIHRoaXMuZSA9IGk7CiAgICB0aGlzLmJyID0gMDsKICAgIHRoaXMubGluZSA9IFtdOwogICAgdGhpcy50ZXh0ID0gW107CiAgICB0aGlzLm9yaWdpbmFsID0gaS5pbm5lclRleHQgfHwgaS50ZXh0Q29udGVudDsKICB9CgogIGFHID0gYUIucHJvdG90eXBlOwoKICBhRy5FbXB0eSA9IGZ1bmN0aW9uICgpIHsKICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGhpcy50ZXh0Lmxlbmd0aDsgKytqKSB7CiAgICAgIGlmICh0aGlzLnRleHRbal0ubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHRydWU7CiAgfTsKCiAgYUcuTGluZXMgPSBmdW5jdGlvbiAoYUopIHsKICAgIHZhciBhSSA9IGFKID8gMSA6IDAsCiAgICAgICAgYUssCiAgICAgICAgaiwKICAgICAgICBhSDsKICAgIGFKID0gYUogfHwgdGhpcy5lOwogICAgYUsgPSBhSi5jaGlsZE5vZGVzOwogICAgaiA9IGFLLmxlbmd0aDsKCiAgICBmb3IgKGFIID0gMDsgYUggPCBqOyArK2FIKSB7CiAgICAgIGlmIChhS1thSF0ubm9kZU5hbWUgPT0gIkJSIikgewogICAgICAgIHRoaXMudGV4dC5wdXNoKHRoaXMubGluZS5qb2luKCIgIikpOwogICAgICAgIHRoaXMuYnIgPSAxOwogICAgICB9IGVsc2UgewogICAgICAgIGlmIChhS1thSF0ubm9kZVR5cGUgPT0gMykgewogICAgICAgICAgaWYgKHRoaXMuYnIpIHsKICAgICAgICAgICAgdGhpcy5saW5lID0gW2FLW2FIXS5ub2RlVmFsdWVdOwogICAgICAgICAgICB0aGlzLmJyID0gMDsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMubGluZS5wdXNoKGFLW2FIXS5ub2RlVmFsdWUpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLkxpbmVzKGFLW2FIXSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgYUkgfHwgdGhpcy5iciB8fCB0aGlzLnRleHQucHVzaCh0aGlzLmxpbmUuam9pbigiICIpKTsKICAgIHJldHVybiB0aGlzLnRleHQ7CiAgfTsKCiAgYUcuU3BsaXRXaWR0aCA9IGZ1bmN0aW9uIChhSCwgYU8sIGFMLCBhSykgewogICAgdmFyIGFKLAogICAgICAgIGFJLAogICAgICAgIGFOLAogICAgICAgIGFNID0gW107CiAgICBhTy5mb250ID0gYUsgKyAicHggIiArIGFMOwoKICAgIGZvciAoYUogPSAwOyBhSiA8IHRoaXMudGV4dC5sZW5ndGg7ICsrYUopIHsKICAgICAgYU4gPSB0aGlzLnRleHRbYUpdLnNwbGl0KC9ccysvKTsKICAgICAgdGhpcy5saW5lID0gW2FOWzBdXTsKCiAgICAgIGZvciAoYUkgPSAxOyBhSSA8IGFOLmxlbmd0aDsgKythSSkgewogICAgICAgIGlmIChhTy5tZWFzdXJlVGV4dCh0aGlzLmxpbmUuam9pbigiICIpICsgIiAiICsgYU5bYUldKS53aWR0aCA+IGFIKSB7CiAgICAgICAgICBhTS5wdXNoKHRoaXMubGluZS5qb2luKCIgIikpOwogICAgICAgICAgdGhpcy5saW5lID0gW2FOW2FJXV07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMubGluZS5wdXNoKGFOW2FJXSk7CiAgICAgICAgfQogICAgICB9CgogICAgICBhTS5wdXNoKHRoaXMubGluZS5qb2luKCIgIikpOwogICAgfQoKICAgIHJldHVybiB0aGlzLnRleHQgPSBhTTsKICB9OwoKICBmdW5jdGlvbiBKKGksIGopIHsKICAgIHRoaXMudHMgPSBudWxsOwogICAgdGhpcy50YyA9IGk7CiAgICB0aGlzLnRhZyA9IGo7CiAgICB0aGlzLnggPSB0aGlzLnkgPSB0aGlzLncgPSB0aGlzLmggPSB0aGlzLnNjID0gMTsKICAgIHRoaXMueiA9IDA7CiAgICB0aGlzLnB1bHNlID0gMTsKICAgIHRoaXMucHVsc2F0ZSA9IGkucHVsc2F0ZVRvIDwgMTsKICAgIHRoaXMuY29sb3VyID0gaS5vdXRsaW5lQ29sb3VyOwogICAgdGhpcy5hZGFzaCA9IH5+aS5vdXRsaW5lRGFzaDsKICAgIHRoaXMuYWdhcCA9IH5+aS5vdXRsaW5lRGFzaFNwYWNlIHx8IHRoaXMuYWRhc2g7CiAgICB0aGlzLmFzcGVlZCA9IGkub3V0bGluZURhc2hTcGVlZCAqIDE7CgogICAgaWYgKHRoaXMuY29sb3VyID09ICJ0YWciKSB7CiAgICAgIHRoaXMuY29sb3VyID0gWShqLmEsICJjb2xvciIpOwogICAgfSBlbHNlIHsKICAgICAgaWYgKHRoaXMuY29sb3VyID09ICJ0YWdiZyIpIHsKICAgICAgICB0aGlzLmNvbG91ciA9IFkoai5hLCAiYmFja2dyb3VuZC1jb2xvciIpOwogICAgICB9CiAgICB9CgogICAgdGhpcy5EcmF3ID0gdGhpcy5wdWxzYXRlID8gdGhpcy5EcmF3UHVsc2F0ZSA6IHRoaXMuRHJhd1NpbXBsZTsKICAgIHRoaXMucmFkaXVzID0gaS5vdXRsaW5lUmFkaXVzIHwgMDsKICAgIHRoaXMuU2V0TWV0aG9kKGkub3V0bGluZU1ldGhvZCk7CiAgfQoKICB4ID0gSi5wcm90b3R5cGU7CgogIHguU2V0TWV0aG9kID0gZnVuY3Rpb24gKGFIKSB7CiAgICB2YXIgaiA9IHsKICAgICAgYmxvY2s6IFsiUHJlRHJhdyIsICJEcmF3QmxvY2siXSwKICAgICAgY29sb3VyOiBbIlByZURyYXciLCAiRHJhd0NvbG91ciJdLAogICAgICBvdXRsaW5lOiBbIlBvc3REcmF3IiwgIkRyYXdPdXRsaW5lIl0sCiAgICAgIGNsYXNzaWM6IFsiTGFzdERyYXciLCAiRHJhd091dGxpbmUiXSwKICAgICAgc2l6ZTogWyJQcmVEcmF3IiwgIkRyYXdTaXplIl0sCiAgICAgIG5vbmU6IFsiTGFzdERyYXciXQogICAgfSwKICAgICAgICBpID0galthSF0gfHwgai5vdXRsaW5lOwoKICAgIGlmIChhSCA9PSAibm9uZSIpIHsKICAgICAgdGhpcy5EcmF3ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiAxOwogICAgICB9OwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5kcmF3RnVuYyA9IHRoaXNbaVsxXV07CiAgICB9CgogICAgdGhpc1tpWzBdXSA9IHRoaXMuRHJhdzsKICB9OwoKICB4LlVwZGF0ZSA9IGZ1bmN0aW9uIChhTiwgYU0sIGFPLCBhSiwgYUssIGFMLCBhSSwgaSkgewogICAgdmFyIGogPSB0aGlzLnRjLm91dGxpbmVPZmZzZXQsCiAgICAgICAgYUggPSAyICogajsKICAgIHRoaXMueCA9IGFLICogYU4gKyBhSSAtIGo7CiAgICB0aGlzLnkgPSBhSyAqIGFNICsgaSAtIGo7CiAgICB0aGlzLncgPSBhSyAqIGFPICsgYUg7CiAgICB0aGlzLmggPSBhSyAqIGFKICsgYUg7CiAgICB0aGlzLnNjID0gYUs7CiAgICB0aGlzLnogPSBhTDsKICB9OwoKICB4LkFudHMgPSBmdW5jdGlvbiAoYU0pIHsKICAgIGlmICghdGhpcy5hZGFzaCkgewogICAgICByZXR1cm47CiAgICB9CgogICAgdmFyIGFKID0gdGhpcy5hZGFzaCwKICAgICAgICBhTCA9IHRoaXMuYWdhcCwKICAgICAgICBhUCA9IHRoaXMuYXNwZWVkLAogICAgICAgIGogPSBhSiArIGFMLAogICAgICAgIGFLID0gMCwKICAgICAgICBhSSA9IGFKLAogICAgICAgIGkgPSBhTCwKICAgICAgICBhTyA9IDAsCiAgICAgICAgYU4gPSAwLAogICAgICAgIGFIOwoKICAgIGlmIChhUCkgewogICAgICBhTiA9IEwoYVApICogKEcoKSAtIHRoaXMudHMpIC8gNTA7CgogICAgICBpZiAoYVAgPCAwKSB7CiAgICAgICAgYU4gPSA4NjQwMDAwIC0gYU47CiAgICAgIH0KCiAgICAgIGFQID0gfn5hTiAlIGo7CiAgICB9CgogICAgaWYgKGFQKSB7CiAgICAgIGlmIChhSiA+PSBhUCkgewogICAgICAgIGFLID0gYUogLSBhUDsKICAgICAgICBhSSA9IGFQOwogICAgICB9IGVsc2UgewogICAgICAgIGkgPSBqIC0gYVA7CiAgICAgICAgYU8gPSBhTCAtIGk7CiAgICAgIH0KCiAgICAgIGFIID0gW2FLLCBpLCBhSSwgYU9dOwogICAgfSBlbHNlIHsKICAgICAgYUggPSBbYUosIGFMXTsKICAgIH0KCiAgICBhTS5zZXRMaW5lRGFzaChhSCk7CiAgfTsKCiAgeC5EcmF3T3V0bGluZSA9IGZ1bmN0aW9uIChhTCwgaSwgYUssIGosIGFILCBhSikgewogICAgdmFyIGFJID0gYUQodGhpcy5yYWRpdXMsIGFIIC8gMiwgaiAvIDIpOwogICAgYUwuc3Ryb2tlU3R5bGUgPSBhSjsKICAgIHRoaXMuQW50cyhhTCk7CiAgICBhcihhTCwgaSwgYUssIGosIGFILCBhSSwgdHJ1ZSk7CiAgfTsKCiAgeC5EcmF3U2l6ZSA9IGZ1bmN0aW9uIChhTywgYVIsIGFQLCBhUywgYU0sIGosIGFULCBhSSwgYVEpIHsKICAgIHZhciBhTCA9IGFULncsCiAgICAgICAgYUggPSBhVC5oLAogICAgICAgIGFKLAogICAgICAgIGFLLAogICAgICAgIGFOOwoKICAgIGlmICh0aGlzLnB1bHNhdGUpIHsKICAgICAgaWYgKGFULmltYWdlKSB7CiAgICAgICAgYU4gPSAoYVQuaW1hZ2UuaGVpZ2h0ICsgdGhpcy50Yy5vdXRsaW5lSW5jcmVhc2UpIC8gYVQuaW1hZ2UuaGVpZ2h0OwogICAgICB9IGVsc2UgewogICAgICAgIGFOID0gYVQub3NjYWxlOwogICAgICB9CgogICAgICBhSyA9IGFULmZpbWFnZSB8fCBhVC5pbWFnZTsKICAgICAgYUogPSAxICsgKGFOIC0gMSkgKiAoMSAtIHRoaXMucHVsc2UpOwogICAgICBhVC5oICo9IGFKOwogICAgICBhVC53ICo9IGFKOwogICAgfSBlbHNlIHsKICAgICAgYUsgPSBhVC5vaW1hZ2U7CiAgICB9CgogICAgYVQuYWxwaGEgPSAxOwogICAgYVQuRHJhdyhhTywgYUksIGFRLCBhSyk7CiAgICBhVC5oID0gYUg7CiAgICBhVC53ID0gYUw7CiAgICByZXR1cm4gMTsKICB9OwoKICB4LkRyYXdDb2xvdXIgPSBmdW5jdGlvbiAoYUksIGFMLCBhSiwgYU0sIGFILCBpLCBhTiwgaiwgYUspIHsKICAgIGlmIChhTi5vaW1hZ2UpIHsKICAgICAgaWYgKHRoaXMucHVsc2UgPCAxKSB7CiAgICAgICAgYU4uYWxwaGEgPSAxIC0gYXQodGhpcy5wdWxzZSwgMik7CiAgICAgICAgYU4uRHJhdyhhSSwgaiwgYUssIGFOLmZpbWFnZSk7CiAgICAgICAgYU4uYWxwaGEgPSB0aGlzLnB1bHNlOwogICAgICB9IGVsc2UgewogICAgICAgIGFOLmFscGhhID0gMTsKICAgICAgfQoKICAgICAgYU4uRHJhdyhhSSwgaiwgYUssIGFOLm9pbWFnZSk7CiAgICAgIHJldHVybiAxOwogICAgfQoKICAgIHJldHVybiB0aGlzW2FOLmltYWdlID8gIkRyYXdDb2xvdXJJbWFnZSIgOiAiRHJhd0NvbG91clRleHQiXShhSSwgYUwsIGFKLCBhTSwgYUgsIGksIGFOLCBqLCBhSyk7CiAgfTsKCiAgeC5EcmF3Q29sb3VyVGV4dCA9IGZ1bmN0aW9uIChhSiwgYU0sIGFLLCBhTiwgYUgsIGksIGFPLCBqLCBhTCkgewogICAgdmFyIGFJID0gYU8uY29sb3VyOwogICAgYU8uY29sb3VyID0gaTsKICAgIGFPLmFscGhhID0gMTsKICAgIGFPLkRyYXcoYUosIGosIGFMKTsKICAgIGFPLmNvbG91ciA9IGFJOwogICAgcmV0dXJuIDE7CiAgfTsKCiAgeC5EcmF3Q29sb3VySW1hZ2UgPSBmdW5jdGlvbiAoYU0sIGFQLCBhTiwgYVEsIGFMLCBpLCBhVCwgaiwgYU8pIHsKICAgIHZhciBhUiA9IGFNLmNhbnZhcywKICAgICAgICBhSiA9IH5+cyhhUCwgMCksCiAgICAgICAgYUkgPSB+fnMoYU4sIDApLAogICAgICAgIGFLID0gYUQoYVIud2lkdGggLSBhSiwgYVEpICsgMC41IHwgMCwKICAgICAgICBhUyA9IGFEKGFSLmhlaWdodCAtIGFJLCBhTCkgKyAwLjUgfCAwLAogICAgICAgIGFIOwoKICAgIGlmIChwKSB7CiAgICAgIHAud2lkdGggPSBhSywgcC5oZWlnaHQgPSBhUzsKICAgIH0gZWxzZSB7CiAgICAgIHAgPSBQKGFLLCBhUyk7CiAgICB9CgogICAgaWYgKCFwKSB7CiAgICAgIHJldHVybiB0aGlzLlNldE1ldGhvZCgib3V0bGluZSIpOwogICAgfQoKICAgIGFIID0gcC5nZXRDb250ZXh0KCIyZCIpOwogICAgYUguZHJhd0ltYWdlKGFSLCBhSiwgYUksIGFLLCBhUywgMCwgMCwgYUssIGFTKTsKICAgIGFNLmNsZWFyUmVjdChhSiwgYUksIGFLLCBhUyk7CgogICAgaWYgKHRoaXMucHVsc2F0ZSkgewogICAgICBhVC5hbHBoYSA9IDEgLSBhdCh0aGlzLnB1bHNlLCAyKTsKICAgIH0gZWxzZSB7CiAgICAgIGFULmFscGhhID0gMTsKICAgIH0KCiAgICBhVC5EcmF3KGFNLCBqLCBhTyk7CiAgICBhTS5zZXRUcmFuc2Zvcm0oMSwgMCwgMCwgMSwgMCwgMCk7CiAgICBhTS5zYXZlKCk7CiAgICBhTS5iZWdpblBhdGgoKTsKICAgIGFNLnJlY3QoYUosIGFJLCBhSywgYVMpOwogICAgYU0uY2xpcCgpOwogICAgYU0uZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gInNvdXJjZS1pbiI7CiAgICBhTS5maWxsU3R5bGUgPSBpOwogICAgYU0uZmlsbFJlY3QoYUosIGFJLCBhSywgYVMpOwogICAgYU0ucmVzdG9yZSgpOwogICAgYU0uZ2xvYmFsQWxwaGEgPSAxOwogICAgYU0uZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gImRlc3RpbmF0aW9uLW92ZXIiOwogICAgYU0uZHJhd0ltYWdlKHAsIDAsIDAsIGFLLCBhUywgYUosIGFJLCBhSywgYVMpOwogICAgYU0uZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gInNvdXJjZS1vdmVyIjsKICAgIHJldHVybiAxOwogIH07CgogIHguRHJhd0Jsb2NrID0gZnVuY3Rpb24gKGFMLCBpLCBhSywgaiwgYUgsIGFKKSB7CiAgICB2YXIgYUkgPSBhRCh0aGlzLnJhZGl1cywgYUggLyAyLCBqIC8gMik7CiAgICBhTC5maWxsU3R5bGUgPSBhSjsKICAgIGFyKGFMLCBpLCBhSywgaiwgYUgsIGFJKTsKICB9OwoKICB4LkRyYXdTaW1wbGUgPSBmdW5jdGlvbiAoYUwsIGksIGosIGFJLCBhSywgYUopIHsKICAgIHZhciBhSCA9IHRoaXMudGM7CiAgICBhTC5zZXRUcmFuc2Zvcm0oMSwgMCwgMCwgMSwgMCwgMCk7CiAgICBhTC5zdHJva2VTdHlsZSA9IHRoaXMuY29sb3VyOwogICAgYUwubGluZVdpZHRoID0gYUgub3V0bGluZVRoaWNrbmVzczsKICAgIGFMLnNoYWRvd0JsdXIgPSBhTC5zaGFkb3dPZmZzZXRYID0gYUwuc2hhZG93T2Zmc2V0WSA9IDA7CiAgICBhTC5nbG9iYWxBbHBoYSA9IGFKID8gYUsgOiAxOwogICAgcmV0dXJuIHRoaXMuZHJhd0Z1bmMoYUwsIHRoaXMueCwgdGhpcy55LCB0aGlzLncsIHRoaXMuaCwgdGhpcy5jb2xvdXIsIGksIGosIGFJKTsKICB9OwoKICB4LkRyYXdQdWxzYXRlID0gZnVuY3Rpb24gKGFMLCBpLCBqLCBhSSkgewogICAgdmFyIGFKID0gRygpIC0gdGhpcy50cywKICAgICAgICBhSCA9IHRoaXMudGMsCiAgICAgICAgYUsgPSBhSC5wdWxzYXRlVG8gKyAoMSAtIGFILnB1bHNhdGVUbykgKiAoMC41ICsgdygyICogTWF0aC5QSSAqIGFKIC8gKDEwMDAgKiBhSC5wdWxzYXRlVGltZSkpIC8gMik7CiAgICB0aGlzLnB1bHNlID0gYUsgPSB5LlNtb290aCgxLCBhSyk7CiAgICByZXR1cm4gdGhpcy5EcmF3U2ltcGxlKGFMLCBpLCBqLCBhSSwgYUssIDEpOwogIH07CgogIHguQWN0aXZlID0gZnVuY3Rpb24gKGFJLCBpLCBhSCkgewogICAgdmFyIGogPSBpID49IHRoaXMueCAmJiBhSCA+PSB0aGlzLnkgJiYgaSA8PSB0aGlzLnggKyB0aGlzLncgJiYgYUggPD0gdGhpcy55ICsgdGhpcy5oOwoKICAgIGlmIChqKSB7CiAgICAgIHRoaXMudHMgPSB0aGlzLnRzIHx8IEcoKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMudHMgPSBudWxsOwogICAgfQoKICAgIHJldHVybiBqOwogIH07CgogIHguUHJlRHJhdyA9IHguUG9zdERyYXcgPSB4Lkxhc3REcmF3ID0gYUE7CgogIGZ1bmN0aW9uIGUoYUksIGFTLCBhTywgYVIsIGFQLCBhSiwgYUgsIGFMLCBhUSwgYUssIGFOLCBqLCBhTSwgaSkgewogICAgdGhpcy50YyA9IGFJOwogICAgdGhpcy5pbWFnZSA9IG51bGw7CiAgICB0aGlzLnRleHQgPSBhUzsKICAgIHRoaXMudGV4dF9vcmlnaW5hbCA9IGk7CiAgICB0aGlzLmxpbmVfd2lkdGhzID0gW107CiAgICB0aGlzLnRpdGxlID0gYU8udGl0bGUgfHwgbnVsbDsKICAgIHRoaXMuYSA9IGFPOwogICAgdGhpcy5wb3NpdGlvbiA9IG5ldyBhZShhUlswXSwgYVJbMV0sIGFSWzJdKTsKICAgIHRoaXMueCA9IHRoaXMueSA9IHRoaXMueiA9IDA7CiAgICB0aGlzLncgPSBhUDsKICAgIHRoaXMuaCA9IGFKOwogICAgdGhpcy5jb2xvdXIgPSBhSCB8fCBhSS50ZXh0Q29sb3VyOwogICAgdGhpcy5iZ0NvbG91ciA9IGFMIHx8IGFJLmJnQ29sb3VyOwogICAgdGhpcy5iZ1JhZGl1cyA9IGFRIHwgMDsKICAgIHRoaXMuYmdPdXRsaW5lID0gYUsgfHwgdGhpcy5jb2xvdXI7CiAgICB0aGlzLmJnT3V0bGluZVRoaWNrbmVzcyA9IGFOIHwgMDsKICAgIHRoaXMudGV4dEZvbnQgPSBqIHx8IGFJLnRleHRGb250OwogICAgdGhpcy5wYWRkaW5nID0gYU0gfCAwOwogICAgdGhpcy5zYyA9IHRoaXMuYWxwaGEgPSAxOwogICAgdGhpcy53ZWlnaHRlZCA9ICFhSS53ZWlnaHQ7CiAgICB0aGlzLm91dGxpbmUgPSBuZXcgSihhSSwgdGhpcyk7CiAgfQoKICBjID0gZS5wcm90b3R5cGU7CgogIGMuSW5pdCA9IGZ1bmN0aW9uIChqKSB7CiAgICB2YXIgaSA9IHRoaXMudGM7CiAgICB0aGlzLnRleHRIZWlnaHQgPSBpLnRleHRIZWlnaHQ7CgogICAgaWYgKHRoaXMuSGFzVGV4dCgpKSB7CiAgICAgIHRoaXMuTWVhc3VyZShpLmN0eHQsIGkpOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy53ID0gdGhpcy5pdzsKICAgICAgdGhpcy5oID0gdGhpcy5paDsKICAgIH0KCiAgICB0aGlzLlNldFNoYWRvd0NvbG91ciA9IGkuc2hhZG93QWxwaGEgPyB0aGlzLlNldFNoYWRvd0NvbG91ckFscGhhIDogdGhpcy5TZXRTaGFkb3dDb2xvdXJGaXhlZDsKICAgIHRoaXMuU2V0RHJhdyhpKTsKICB9OwoKICBjLkRyYXcgPSBhQTsKCiAgYy5IYXNUZXh0ID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHRoaXMudGV4dCAmJiB0aGlzLnRleHRbMF0ubGVuZ3RoID4gMDsKICB9OwoKICBjLkVxdWFsVG8gPSBmdW5jdGlvbiAoYUgpIHsKICAgIHZhciBqID0gYUguZ2V0RWxlbWVudHNCeVRhZ05hbWUoImltZyIpOwoKICAgIGlmICh0aGlzLmEuaHJlZiAhPSBhSC5ocmVmKSB7CiAgICAgIHJldHVybiAwOwogICAgfQoKICAgIGlmIChqLmxlbmd0aCkgewogICAgICByZXR1cm4gdGhpcy5pbWFnZS5zcmMgPT0galswXS5zcmM7CiAgICB9CgogICAgcmV0dXJuIChhSC5pbm5lclRleHQgfHwgYUgudGV4dENvbnRlbnQpID09IHRoaXMudGV4dF9vcmlnaW5hbDsKICB9OwoKICBjLlNldEltYWdlID0gZnVuY3Rpb24gKGopIHsKICAgIHRoaXMuaW1hZ2UgPSB0aGlzLmZpbWFnZSA9IGo7CiAgfTsKCiAgYy5TZXREcmF3ID0gZnVuY3Rpb24gKGkpIHsKICAgIHRoaXMuRHJhdyA9IHRoaXMuZmltYWdlID8gaS5pZSA+IDcgPyB0aGlzLkRyYXdJbWFnZUlFIDogdGhpcy5EcmF3SW1hZ2UgOiB0aGlzLkRyYXdUZXh0OwogICAgaS5ub1NlbGVjdCAmJiAodGhpcy5DaGVja0FjdGl2ZSA9IGFBKTsKICB9OwoKICBjLk1lYXN1cmVUZXh0ID0gZnVuY3Rpb24gKGFLKSB7CiAgICB2YXIgYUksCiAgICAgICAgYUggPSB0aGlzLnRleHQubGVuZ3RoLAogICAgICAgIGogPSAwLAogICAgICAgIGFKOwoKICAgIGZvciAoYUkgPSAwOyBhSSA8IGFIOyArK2FJKSB7CiAgICAgIHRoaXMubGluZV93aWR0aHNbYUldID0gYUogPSBhSy5tZWFzdXJlVGV4dCh0aGlzLnRleHRbYUldKS53aWR0aDsKICAgICAgaiA9IHMoaiwgYUopOwogICAgfQoKICAgIHJldHVybiBqOwogIH07CgogIGMuTWVhc3VyZSA9IGZ1bmN0aW9uIChhTSwgYVApIHsKICAgIHZhciBhTiA9IHQodGhpcy50ZXh0LCB0aGlzLnRleHRGb250LCB0aGlzLnRleHRIZWlnaHQpLAogICAgICAgIGFRLAogICAgICAgIGksCiAgICAgICAgYUosCiAgICAgICAgaiwKICAgICAgICBhSCwKICAgICAgICBhTCwKICAgICAgICBhTywKICAgICAgICBhSSwKICAgICAgICBhSzsKICAgIGFPID0gYU4gPyBhTi5tYXgueSArIGFOLm1pbi55IDogdGhpcy50ZXh0SGVpZ2h0OwogICAgYU0uZm9udCA9IHRoaXMuZm9udCA9IHRoaXMudGV4dEhlaWdodCArICJweCAiICsgdGhpcy50ZXh0Rm9udDsKICAgIGFMID0gdGhpcy5NZWFzdXJlVGV4dChhTSk7CgogICAgaWYgKGFQLnR4dE9wdCkgewogICAgICBhUSA9IGFQLnR4dFNjYWxlOwogICAgICBpID0gYVEgKiB0aGlzLnRleHRIZWlnaHQ7CiAgICAgIGFKID0gaSArICJweCAiICsgdGhpcy50ZXh0Rm9udDsKICAgICAgaiA9IFthUSAqIGFQLnNoYWRvd09mZnNldFswXSwgYVEgKiBhUC5zaGFkb3dPZmZzZXRbMV1dOwogICAgICBhTS5mb250ID0gYUo7CiAgICAgIGFIID0gdGhpcy5NZWFzdXJlVGV4dChhTSk7CiAgICAgIGFLID0gbmV3IGcodGhpcy50ZXh0LCBhSiwgYUggKyBhUSwgYVEgKiBhTyArIGFRLCBhSCwgdGhpcy5saW5lX3dpZHRocywgYVAudGV4dEFsaWduLCBhUC50ZXh0VkFsaWduLCBhUSk7CgogICAgICBpZiAodGhpcy5pbWFnZSkgewogICAgICAgIGFLLlNldEltYWdlKHRoaXMuaW1hZ2UsIHRoaXMuaXcsIHRoaXMuaWgsIGFQLmltYWdlUG9zaXRpb24sIGFQLmltYWdlUGFkZGluZywgYVAuaW1hZ2VBbGlnbiwgYVAuaW1hZ2VWQWxpZ24sIGFQLmltYWdlU2NhbGUpOwogICAgICB9CgogICAgICBhSSA9IGFLLkNyZWF0ZSh0aGlzLmNvbG91ciwgdGhpcy5iZ0NvbG91ciwgdGhpcy5iZ091dGxpbmUsIGFRICogdGhpcy5iZ091dGxpbmVUaGlja25lc3MsIGFQLnNoYWRvdywgYVEgKiBhUC5zaGFkb3dCbHVyLCBqLCBhUSAqIHRoaXMucGFkZGluZywgYVEgKiB0aGlzLmJnUmFkaXVzKTsKCiAgICAgIGlmIChhUC5vdXRsaW5lTWV0aG9kID09ICJjb2xvdXIiKSB7CiAgICAgICAgdGhpcy5vaW1hZ2UgPSBhSy5DcmVhdGUodGhpcy5vdXRsaW5lLmNvbG91ciwgdGhpcy5iZ0NvbG91ciwgdGhpcy5vdXRsaW5lLmNvbG91ciwgYVEgKiB0aGlzLmJnT3V0bGluZVRoaWNrbmVzcywgYVAuc2hhZG93LCBhUSAqIGFQLnNoYWRvd0JsdXIsIGosIGFRICogdGhpcy5wYWRkaW5nLCBhUSAqIHRoaXMuYmdSYWRpdXMpOwogICAgICB9IGVsc2UgewogICAgICAgIGlmIChhUC5vdXRsaW5lTWV0aG9kID09ICJzaXplIikgewogICAgICAgICAgYU4gPSB0KHRoaXMudGV4dCwgdGhpcy50ZXh0Rm9udCwgdGhpcy50ZXh0SGVpZ2h0ICsgYVAub3V0bGluZUluY3JlYXNlKTsKICAgICAgICAgIGkgPSBhTi5tYXgueSArIGFOLm1pbi55OwogICAgICAgICAgYUogPSBhUSAqICh0aGlzLnRleHRIZWlnaHQgKyBhUC5vdXRsaW5lSW5jcmVhc2UpICsgInB4ICIgKyB0aGlzLnRleHRGb250OwogICAgICAgICAgYU0uZm9udCA9IGFKOwogICAgICAgICAgYUggPSB0aGlzLk1lYXN1cmVUZXh0KGFNKTsKICAgICAgICAgIGFLID0gbmV3IGcodGhpcy50ZXh0LCBhSiwgYUggKyBhUSwgYVEgKiBpICsgYVEsIGFILCB0aGlzLmxpbmVfd2lkdGhzLCBhUC50ZXh0QWxpZ24sIGFQLnRleHRWQWxpZ24sIGFRKTsKCiAgICAgICAgICBpZiAodGhpcy5pbWFnZSkgewogICAgICAgICAgICBhSy5TZXRJbWFnZSh0aGlzLmltYWdlLCB0aGlzLml3ICsgYVAub3V0bGluZUluY3JlYXNlLCB0aGlzLmloICsgYVAub3V0bGluZUluY3JlYXNlLCBhUC5pbWFnZVBvc2l0aW9uLCBhUC5pbWFnZVBhZGRpbmcsIGFQLmltYWdlQWxpZ24sIGFQLmltYWdlVkFsaWduLCBhUC5pbWFnZVNjYWxlKTsKICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLm9pbWFnZSA9IGFLLkNyZWF0ZSh0aGlzLmNvbG91ciwgdGhpcy5iZ0NvbG91ciwgdGhpcy5iZ091dGxpbmUsIGFRICogdGhpcy5iZ091dGxpbmVUaGlja25lc3MsIGFQLnNoYWRvdywgYVEgKiBhUC5zaGFkb3dCbHVyLCBqLCBhUSAqIHRoaXMucGFkZGluZywgYVEgKiB0aGlzLmJnUmFkaXVzKTsKICAgICAgICAgIHRoaXMub3NjYWxlID0gdGhpcy5vaW1hZ2Uud2lkdGggLyBhSS53aWR0aDsKCiAgICAgICAgICBpZiAoYVAub3V0bGluZUluY3JlYXNlID4gMCkgewogICAgICAgICAgICBhSSA9IHYoYUksIHRoaXMub2ltYWdlLndpZHRoLCB0aGlzLm9pbWFnZS5oZWlnaHQpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5vaW1hZ2UgPSB2KHRoaXMub2ltYWdlLCBhSS53aWR0aCwgYUkuaGVpZ2h0KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChhSSkgewogICAgICAgIHRoaXMuZmltYWdlID0gYUk7CiAgICAgICAgYUwgPSB0aGlzLmZpbWFnZS53aWR0aCAvIGFROwogICAgICAgIGFPID0gdGhpcy5maW1hZ2UuaGVpZ2h0IC8gYVE7CiAgICAgIH0KCiAgICAgIHRoaXMuU2V0RHJhdyhhUCk7CiAgICAgIGFQLnR4dE9wdCA9ICEhdGhpcy5maW1hZ2U7CiAgICB9CgogICAgdGhpcy5oID0gYU87CiAgICB0aGlzLncgPSBhTDsKICB9OwoKICBjLlNldEZvbnQgPSBmdW5jdGlvbiAoaiwgYUksIGFILCBpKSB7CiAgICB0aGlzLnRleHRGb250ID0gajsKICAgIHRoaXMuY29sb3VyID0gYUk7CiAgICB0aGlzLmJnQ29sb3VyID0gYUg7CiAgICB0aGlzLmJnT3V0bGluZSA9IGk7CiAgICB0aGlzLk1lYXN1cmUodGhpcy50Yy5jdHh0LCB0aGlzLnRjKTsKICB9OwoKICBjLlNldFdlaWdodCA9IGZ1bmN0aW9uIChhSCkgewogICAgdmFyIGogPSB0aGlzLnRjLAogICAgICAgIGFKID0gai53ZWlnaHRNb2RlLnNwbGl0KC9bLCBdLyksCiAgICAgICAgaSwKICAgICAgICBhSSwKICAgICAgICBhSyA9IGFILmxlbmd0aDsKCiAgICBpZiAoIXRoaXMuSGFzVGV4dCgpKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB0aGlzLndlaWdodGVkID0gdHJ1ZTsKCiAgICBmb3IgKGFJID0gMDsgYUkgPCBhSzsgKythSSkgewogICAgICBpID0gYUpbYUldIHx8ICJzaXplIjsKCiAgICAgIGlmICgiYm90aCIgPT0gaSkgewogICAgICAgIHRoaXMuV2VpZ2h0KGFIW2FJXSwgai5jdHh0LCBqLCAic2l6ZSIsIGoubWluX3dlaWdodFthSV0sIGoubWF4X3dlaWdodFthSV0sIGFJKTsKICAgICAgICB0aGlzLldlaWdodChhSFthSV0sIGouY3R4dCwgaiwgImNvbG91ciIsIGoubWluX3dlaWdodFthSV0sIGoubWF4X3dlaWdodFthSV0sIGFJKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLldlaWdodChhSFthSV0sIGouY3R4dCwgaiwgaSwgai5taW5fd2VpZ2h0W2FJXSwgai5tYXhfd2VpZ2h0W2FJXSwgYUkpOwogICAgICB9CiAgICB9CgogICAgdGhpcy5NZWFzdXJlKGouY3R4dCwgaik7CiAgfTsKCiAgYy5XZWlnaHQgPSBmdW5jdGlvbiAoYUgsIGFNLCBhSSwgaiwgYUwsIGFKLCBhSykgewogICAgYUggPSBpc05hTihhSCkgPyAxIDogYUg7CiAgICB2YXIgaSA9IChhSCAtIGFMKSAvIChhSiAtIGFMKTsKCiAgICBpZiAoImNvbG91ciIgPT0gaikgewogICAgICB0aGlzLmNvbG91ciA9IGsoYUksIGksIGFLKTsKICAgIH0gZWxzZSB7CiAgICAgIGlmICgiYmdjb2xvdXIiID09IGopIHsKICAgICAgICB0aGlzLmJnQ29sb3VyID0gayhhSSwgaSwgYUspOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICgiYmdvdXRsaW5lIiA9PSBqKSB7CiAgICAgICAgICB0aGlzLmJnT3V0bGluZSA9IGsoYUksIGksIGFLKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKCJvdXRsaW5lIiA9PSBqKSB7CiAgICAgICAgICAgIHRoaXMub3V0bGluZS5jb2xvdXIgPSBrKGFJLCBpLCBhSyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAoInNpemUiID09IGopIHsKICAgICAgICAgICAgICBpZiAoYUkud2VpZ2h0U2l6ZU1pbiA+IDAgJiYgYUkud2VpZ2h0U2l6ZU1heCA+IGFJLndlaWdodFNpemVNaW4pIHsKICAgICAgICAgICAgICAgIHRoaXMudGV4dEhlaWdodCA9IGFJLndlaWdodFNpemUgKiAoYUkud2VpZ2h0U2l6ZU1pbiArIChhSS53ZWlnaHRTaXplTWF4IC0gYUkud2VpZ2h0U2l6ZU1pbikgKiBpKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy50ZXh0SGVpZ2h0ID0gcygxLCBhSCAqIGFJLndlaWdodFNpemUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH07CgogIGMuU2V0U2hhZG93Q29sb3VyRml4ZWQgPSBmdW5jdGlvbiAoYUgsIGosIGkpIHsKICAgIGFILnNoYWRvd0NvbG9yID0gajsKICB9OwoKICBjLlNldFNoYWRvd0NvbG91ckFscGhhID0gZnVuY3Rpb24gKGFILCBqLCBpKSB7CiAgICBhSC5zaGFkb3dDb2xvciA9IFUoaiwgaSk7CiAgfTsKCiAgYy5EcmF3VGV4dCA9IGZ1bmN0aW9uIChhSiwgYU0sIGFJKSB7CiAgICB2YXIgYU4gPSB0aGlzLnRjLAogICAgICAgIGFMID0gdGhpcy54LAogICAgICAgIGFLID0gdGhpcy55LAogICAgICAgIGFPID0gdGhpcy5zYywKICAgICAgICBqLAogICAgICAgIGFIOwogICAgYUouZ2xvYmFsQWxwaGEgPSB0aGlzLmFscGhhOwogICAgYUouZmlsbFN0eWxlID0gdGhpcy5jb2xvdXI7CiAgICBhTi5zaGFkb3cgJiYgdGhpcy5TZXRTaGFkb3dDb2xvdXIoYUosIGFOLnNoYWRvdywgdGhpcy5hbHBoYSk7CiAgICBhSi5mb250ID0gdGhpcy5mb250OwogICAgYUwgKz0gYU0gLyBhTzsKICAgIGFLICs9IGFJIC8gYU8gLSB0aGlzLmggLyAyOwoKICAgIGZvciAoaiA9IDA7IGogPCB0aGlzLnRleHQubGVuZ3RoOyArK2opIHsKICAgICAgYUggPSBhTDsKCiAgICAgIGlmICgicmlnaHQiID09IGFOLnRleHRBbGlnbikgewogICAgICAgIGFIICs9IHRoaXMudyAvIDIgLSB0aGlzLmxpbmVfd2lkdGhzW2pdOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICgiY2VudHJlIiA9PSBhTi50ZXh0QWxpZ24pIHsKICAgICAgICAgIGFIIC09IHRoaXMubGluZV93aWR0aHNbal0gLyAyOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhSCAtPSB0aGlzLncgLyAyOwogICAgICAgIH0KICAgICAgfQoKICAgICAgYUouc2V0VHJhbnNmb3JtKGFPLCAwLCAwLCBhTywgYU8gKiBhSCwgYU8gKiBhSyk7CiAgICAgIGFKLmZpbGxUZXh0KHRoaXMudGV4dFtqXSwgMCwgMCk7CiAgICAgIGFLICs9IHRoaXMudGV4dEhlaWdodDsKICAgIH0KICB9OwoKICBjLkRyYXdJbWFnZSA9IGZ1bmN0aW9uIChhSiwgYVEsIGFJLCBhTCkgewogICAgdmFyIGFOID0gdGhpcy54LAogICAgICAgIGFLID0gdGhpcy55LAogICAgICAgIGFSID0gdGhpcy5zYywKICAgICAgICBqID0gYUwgfHwgdGhpcy5maW1hZ2UsCiAgICAgICAgYU8gPSB0aGlzLncsCiAgICAgICAgYUggPSB0aGlzLmgsCiAgICAgICAgYU0gPSB0aGlzLmFscGhhLAogICAgICAgIGFQID0gdGhpcy5zaGFkb3c7CiAgICBhSi5nbG9iYWxBbHBoYSA9IGFNOwogICAgYVAgJiYgdGhpcy5TZXRTaGFkb3dDb2xvdXIoYUosIGFQLCBhTSk7CiAgICBhTiArPSBhUSAvIGFSIC0gYU8gLyAyOwogICAgYUsgKz0gYUkgLyBhUiAtIGFIIC8gMjsKICAgIGFKLnNldFRyYW5zZm9ybShhUiwgMCwgMCwgYVIsIGFSICogYU4sIGFSICogYUspOwogICAgYUouZHJhd0ltYWdlKGosIDAsIDAsIGFPLCBhSCk7CiAgfTsKCiAgYy5EcmF3SW1hZ2VJRSA9IGZ1bmN0aW9uIChhSiwgYU4sIGFJKSB7CiAgICB2YXIgaiA9IHRoaXMuZmltYWdlLAogICAgICAgIGFPID0gdGhpcy5zYywKICAgICAgICBhTSA9IGoud2lkdGggPSB0aGlzLncgKiBhTywKICAgICAgICBhSCA9IGouaGVpZ2h0ID0gdGhpcy5oICogYU8sCiAgICAgICAgYUwgPSB0aGlzLnggKiBhTyArIGFOIC0gYU0gLyAyLAogICAgICAgIGFLID0gdGhpcy55ICogYU8gKyBhSSAtIGFIIC8gMjsKICAgIGFKLnNldFRyYW5zZm9ybSgxLCAwLCAwLCAxLCAwLCAwKTsKICAgIGFKLmdsb2JhbEFscGhhID0gdGhpcy5hbHBoYTsKICAgIGFKLmRyYXdJbWFnZShqLCBhTCwgYUspOwogIH07CgogIGMuQ2FsYyA9IGZ1bmN0aW9uIChpLCBhSCkgewogICAgdmFyIGosCiAgICAgICAgYUsgPSB0aGlzLnRjLAogICAgICAgIGFKID0gYUsubWluQnJpZ2h0bmVzcywKICAgICAgICBhSSA9IGFLLm1heEJyaWdodG5lc3MsCiAgICAgICAgYUwgPSBhSy5tYXhfcmFkaXVzOwogICAgaiA9IGkueGZvcm0odGhpcy5wb3NpdGlvbik7CiAgICB0aGlzLnhmb3JtZWQgPSBqOwogICAgaiA9IFYoYUssIGosIGFLLnN0cmV0Y2hYLCBhSy5zdHJldGNoWSk7CiAgICB0aGlzLnggPSBqLng7CiAgICB0aGlzLnkgPSBqLnk7CiAgICB0aGlzLnogPSBqLno7CiAgICB0aGlzLnNjID0gai53OwogICAgdGhpcy5hbHBoYSA9IGFIICogYXYoYUogKyAoYUkgLSBhSikgKiAoYUwgLSB0aGlzLnopIC8gKDIgKiBhTCksIDAsIDEpOwogICAgcmV0dXJuIHRoaXMueGZvcm1lZDsKICB9OwoKICBjLlVwZGF0ZUFjdGl2ZSA9IGZ1bmN0aW9uIChhTSwgYUgsIGFLKSB7CiAgICB2YXIgYUogPSB0aGlzLm91dGxpbmUsCiAgICAgICAgaiA9IHRoaXMudywKICAgICAgICBhSSA9IHRoaXMuaCwKICAgICAgICBpID0gdGhpcy54IC0gaiAvIDIsCiAgICAgICAgYUwgPSB0aGlzLnkgLSBhSSAvIDI7CiAgICBhSi5VcGRhdGUoaSwgYUwsIGosIGFJLCB0aGlzLnNjLCB0aGlzLnosIGFILCBhSyk7CiAgICByZXR1cm4gYUo7CiAgfTsKCiAgYy5DaGVja0FjdGl2ZSA9IGZ1bmN0aW9uIChhSiwgaSwgYUkpIHsKICAgIHZhciBqID0gdGhpcy50YywKICAgICAgICBhSCA9IHRoaXMuVXBkYXRlQWN0aXZlKGFKLCBpLCBhSSk7CiAgICByZXR1cm4gYUguQWN0aXZlKGFKLCBqLm14LCBqLm15KSA/IGFIIDogbnVsbDsKICB9OwoKICBjLkNsaWNrZWQgPSBmdW5jdGlvbiAoYUspIHsKICAgIHZhciBqID0gdGhpcy5hLAogICAgICAgIGFIID0gai50YXJnZXQsCiAgICAgICAgYUkgPSBqLmhyZWYsCiAgICAgICAgaTsKCiAgICBpZiAoYUggIT0gIiIgJiYgYUggIT0gIl9zZWxmIikgewogICAgICBpZiAoc2VsZi5mcmFtZXNbYUhdKSB7CiAgICAgICAgc2VsZi5mcmFtZXNbYUhdLmRvY3VtZW50LmxvY2F0aW9uID0gYUk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGlmICh0b3AuZnJhbWVzW2FIXSkgewogICAgICAgICAgICB0b3AuZnJhbWVzW2FIXS5kb2N1bWVudC5sb2NhdGlvbiA9IGFJOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoYUopIHt9CgogICAgICAgIHdpbmRvdy5vcGVuKGFJLCBhSCk7CiAgICAgIH0KCiAgICAgIHJldHVybjsKICAgIH0KCiAgICBpZiAoQy5jcmVhdGVFdmVudCkgewogICAgICBpID0gQy5jcmVhdGVFdmVudCgiTW91c2VFdmVudHMiKTsKICAgICAgaS5pbml0TW91c2VFdmVudCgiY2xpY2siLCAxLCAxLCB3aW5kb3csIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIG51bGwpOwoKICAgICAgaWYgKCFqLmRpc3BhdGNoRXZlbnQoaSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGlmIChqLmZpcmVFdmVudCkgewogICAgICAgIGlmICghai5maXJlRXZlbnQoIm9uY2xpY2siKSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIEMubG9jYXRpb24gPSBhSTsKICB9OwoKICBmdW5jdGlvbiB5KGFOLCBqLCBhSSkgewogICAgdmFyIGFILAogICAgICAgIGFLLAogICAgICAgIGFNID0gQy5nZXRFbGVtZW50QnlJZChhTiksCiAgICAgICAgYUogPSBbImlkIiwgImNsYXNzIiwgImlubmVySFRNTCJdLAogICAgICAgIGFMOwoKICAgIGlmICghYU0pIHsKICAgICAgdGhyb3cgMDsKICAgIH0KCiAgICBpZiAoYWkod2luZG93Lkdfdm1sQ2FudmFzTWFuYWdlcikpIHsKICAgICAgYU0gPSB3aW5kb3cuR192bWxDYW52YXNNYW5hZ2VyLmluaXRFbGVtZW50KGFNKTsKICAgICAgdGhpcy5pZSA9IHBhcnNlRmxvYXQobmF2aWdhdG9yLmFwcFZlcnNpb24uc3BsaXQoIk1TSUUiKVsxXSk7CiAgICB9CgogICAgaWYgKGFNICYmICghYU0uZ2V0Q29udGV4dCB8fCAhYU0uZ2V0Q29udGV4dCgiMmQiKS5maWxsVGV4dCkpIHsKICAgICAgYUsgPSBDLmNyZWF0ZUVsZW1lbnQoIkRJViIpOwoKICAgICAgZm9yIChhSCA9IDA7IGFIIDwgYUoubGVuZ3RoOyArK2FIKSB7CiAgICAgICAgYUtbYUpbYUhdXSA9IGFNW2FKW2FIXV07CiAgICAgIH0KCiAgICAgIGFNLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGFLLCBhTSk7CiAgICAgIGFNLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYU0pOwogICAgICB0aHJvdyAwOwogICAgfQoKICAgIGZvciAoYUggaW4geS5vcHRpb25zKSB7CiAgICAgIHRoaXNbYUhdID0gYUkgJiYgYWkoYUlbYUhdKSA/IGFJW2FIXSA6IGFpKHlbYUhdKSA/IHlbYUhdIDogeS5vcHRpb25zW2FIXTsKICAgIH0KCiAgICB0aGlzLmNhbnZhcyA9IGFNOwogICAgdGhpcy5jdHh0ID0gYU0uZ2V0Q29udGV4dCgiMmQiKTsKICAgIHRoaXMuejEgPSAyNTAgLyBzKHRoaXMuZGVwdGgsIDAuMDAxKTsKICAgIHRoaXMuejIgPSB0aGlzLnoxIC8gdGhpcy56b29tOwogICAgdGhpcy5yYWRpdXMgPSBhRChhTS5oZWlnaHQsIGFNLndpZHRoKSAqIDAuMDA3NTsKICAgIHRoaXMubWF4X3JhZGl1cyA9IDEwMDsKICAgIHRoaXMubWF4X3dlaWdodCA9IFtdOwogICAgdGhpcy5taW5fd2VpZ2h0ID0gW107CiAgICB0aGlzLnRleHRGb250ID0gdGhpcy50ZXh0Rm9udCAmJiBvKHRoaXMudGV4dEZvbnQpOwogICAgdGhpcy50ZXh0SGVpZ2h0ICo9IDE7CiAgICB0aGlzLmltYWdlUmFkaXVzID0gdGhpcy5pbWFnZVJhZGl1cy50b1N0cmluZygpOwogICAgdGhpcy5wdWxzYXRlVG8gPSBhdih0aGlzLnB1bHNhdGVUbywgMCwgMSk7CiAgICB0aGlzLm1pbkJyaWdodG5lc3MgPSBhdih0aGlzLm1pbkJyaWdodG5lc3MsIDAsIDEpOwogICAgdGhpcy5tYXhCcmlnaHRuZXNzID0gYXYodGhpcy5tYXhCcmlnaHRuZXNzLCB0aGlzLm1pbkJyaWdodG5lc3MsIDEpOwogICAgdGhpcy5jdHh0LnRleHRCYXNlbGluZSA9ICJ0b3AiOwogICAgdGhpcy5seCA9ICh0aGlzLmxvY2sgKyAiIikuaW5kZXhPZigieCIpICsgMTsKICAgIHRoaXMubHkgPSAodGhpcy5sb2NrICsgIiIpLmluZGV4T2YoInkiKSArIDE7CiAgICB0aGlzLmZyb3plbiA9IHRoaXMuZHggPSB0aGlzLmR5ID0gdGhpcy5maXhlZEFuaW0gPSB0aGlzLnRvdWNoU3RhdGUgPSAwOwogICAgdGhpcy5maXhlZEFscGhhID0gMTsKICAgIHRoaXMuc291cmNlID0gaiB8fCBhTjsKICAgIHRoaXMucmVwZWF0VGFncyA9IGFEKDY0LCB+fnRoaXMucmVwZWF0VGFncyk7CiAgICB0aGlzLm1pblRhZ3MgPSBhRCgyMDAsIH5+dGhpcy5taW5UYWdzKTsKCiAgICBpZiAofn50aGlzLnNjcm9sbFBhdXNlID4gMCkgewogICAgICB5LnNjcm9sbFBhdXNlID0gfn50aGlzLnNjcm9sbFBhdXNlOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5zY3JvbGxQYXVzZSA9IDA7CiAgICB9CgogICAgaWYgKHRoaXMubWluVGFncyA+IDAgJiYgdGhpcy5yZXBlYXRUYWdzIDwgMSAmJiAoYUggPSB0aGlzLkdldFRhZ3MoKS5sZW5ndGgpKSB7CiAgICAgIHRoaXMucmVwZWF0VGFncyA9IGFwKHRoaXMubWluVGFncyAvIGFIKSAtIDE7CiAgICB9CgogICAgdGhpcy50cmFuc2Zvcm0gPSBSLklkZW50aXR5KCk7CiAgICB0aGlzLnN0YXJ0VGltZSA9IHRoaXMudGltZSA9IEcoKTsKICAgIHRoaXMubXggPSB0aGlzLm15ID0gLTE7CiAgICB0aGlzLmNlbnRyZUltYWdlICYmIGFvKHRoaXMpOwogICAgdGhpcy5BbmltYXRlID0gdGhpcy5kcmFnQ29udHJvbCA/IHRoaXMuQW5pbWF0ZURyYWcgOiB0aGlzLkFuaW1hdGVQb3NpdGlvbjsKICAgIHRoaXMuYW5pbVRpbWluZyA9IHR5cGVvZiB5W3RoaXMuYW5pbVRpbWluZ10gPT0gImZ1bmN0aW9uIiA/IHlbdGhpcy5hbmltVGltaW5nXSA6IHkuU21vb3RoOwoKICAgIGlmICh0aGlzLnNoYWRvd0JsdXIgfHwgdGhpcy5zaGFkb3dPZmZzZXRbMF0gfHwgdGhpcy5zaGFkb3dPZmZzZXRbMV0pIHsKICAgICAgdGhpcy5jdHh0LnNoYWRvd0NvbG9yID0gdGhpcy5zaGFkb3c7CiAgICAgIHRoaXMuc2hhZG93ID0gdGhpcy5jdHh0LnNoYWRvd0NvbG9yOwogICAgICB0aGlzLnNoYWRvd0FscGhhID0gYWwoKTsKICAgIH0gZWxzZSB7CiAgICAgIGRlbGV0ZSB0aGlzLnNoYWRvdzsKICAgIH0KCiAgICB0aGlzLkxvYWQoKTsKCiAgICBpZiAoaiAmJiB0aGlzLmhpZGVUYWdzKSB7CiAgICAgIChmdW5jdGlvbiAoaSkgewogICAgICAgIGlmICh5LmxvYWRlZCkgewogICAgICAgICAgaS5IaWRlVGFncygpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhZCgibG9hZCIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaS5IaWRlVGFncygpOwogICAgICAgICAgfSwgd2luZG93KTsKICAgICAgICB9CiAgICAgIH0pKHRoaXMpOwogICAgfQoKICAgIHRoaXMueWF3ID0gdGhpcy5pbml0aWFsID8gdGhpcy5pbml0aWFsWzBdICogdGhpcy5tYXhTcGVlZCA6IDA7CiAgICB0aGlzLnBpdGNoID0gdGhpcy5pbml0aWFsID8gdGhpcy5pbml0aWFsWzFdICogdGhpcy5tYXhTcGVlZCA6IDA7CgogICAgaWYgKHRoaXMudG9vbHRpcCkgewogICAgICB0aGlzLmN0aXRsZSA9IGFNLnRpdGxlOwogICAgICBhTS50aXRsZSA9ICIiOwoKICAgICAgaWYgKHRoaXMudG9vbHRpcCA9PSAibmF0aXZlIikgewogICAgICAgIHRoaXMuVG9vbHRpcCA9IHRoaXMuVG9vbHRpcE5hdGl2ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLlRvb2x0aXAgPSB0aGlzLlRvb2x0aXBEaXY7CgogICAgICAgIGlmICghdGhpcy50dGRpdikgewogICAgICAgICAgdGhpcy50dGRpdiA9IEMuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgICAgICB0aGlzLnR0ZGl2LmNsYXNzTmFtZSA9IHRoaXMudG9vbHRpcENsYXNzOwogICAgICAgICAgdGhpcy50dGRpdi5zdHlsZS5wb3NpdGlvbiA9ICJhYnNvbHV0ZSI7CiAgICAgICAgICB0aGlzLnR0ZGl2LnN0eWxlLnpJbmRleCA9IGFNLnN0eWxlLnpJbmRleCArIDE7CiAgICAgICAgICBhZCgibW91c2VvdmVyIiwgZnVuY3Rpb24gKGkpIHsKICAgICAgICAgICAgaS50YXJnZXQuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgICAgIH0sIHRoaXMudHRkaXYpOwogICAgICAgICAgQy5ib2R5LmFwcGVuZENoaWxkKHRoaXMudHRkaXYpOwogICAgICAgIH0KICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgdGhpcy5Ub29sdGlwID0gdGhpcy5Ub29sdGlwTm9uZTsKICAgIH0KCiAgICBpZiAoIXRoaXMubm9Nb3VzZSAmJiAhYlthTl0pIHsKICAgICAgYlthTl0gPSBbWyJtb3VzZW1vdmUiLCBhZl0sIFsibW91c2VvdXQiLCBCXSwgWyJtb3VzZXVwIiwgYUVdLCBbInRvdWNoc3RhcnQiLCBUXSwgWyJ0b3VjaGVuZCIsIHJdLCBbInRvdWNoY2FuY2VsIiwgcl0sIFsidG91Y2htb3ZlIiwgYXpdXTsKCiAgICAgIGlmICh0aGlzLmRyYWdDb250cm9sKSB7CiAgICAgICAgYlthTl0ucHVzaChbIm1vdXNlZG93biIsIHpdKTsKICAgICAgICBiW2FOXS5wdXNoKFsic2VsZWN0c3RhcnQiLCBhQV0pOwogICAgICB9CgogICAgICBpZiAodGhpcy53aGVlbFpvb20pIHsKICAgICAgICBiW2FOXS5wdXNoKFsibW91c2V3aGVlbCIsIGFnXSk7CiAgICAgICAgYlthTl0ucHVzaChbIkRPTU1vdXNlU2Nyb2xsIiwgYWddKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuc2Nyb2xsUGF1c2UpIHsKICAgICAgICBiW2FOXS5wdXNoKFsic2Nyb2xsIiwgYWMsIHdpbmRvd10pOwogICAgICB9CgogICAgICBmb3IgKGFIID0gMDsgYUggPCBiW2FOXS5sZW5ndGg7ICsrYUgpIHsKICAgICAgICBhSyA9IGJbYU5dW2FIXTsKICAgICAgICBhZChhS1swXSwgYUtbMV0sIGFLWzJdID8gYUtbMl0gOiBhTSk7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoIXkuc3RhcnRlZCkgewogICAgICBhTCA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cubXNSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7CiAgICAgIHkuTmV4dEZyYW1lID0gYUwgPyB5Lk5leHRGcmFtZVJBRiA6IHkuTmV4dEZyYW1lVGltZW91dDsKICAgICAgeS5pbnRlcnZhbCA9IHRoaXMuaW50ZXJ2YWw7CiAgICAgIHkuTmV4dEZyYW1lKHRoaXMuaW50ZXJ2YWwpOwogICAgICB5LnN0YXJ0ZWQgPSAxOwogICAgfQogIH0KCiAgUSA9IHkucHJvdG90eXBlOwoKICBRLlNvdXJjZUVsZW1lbnRzID0gZnVuY3Rpb24gKCkgewogICAgaWYgKEMucXVlcnlTZWxlY3RvckFsbCkgewogICAgICByZXR1cm4gQy5xdWVyeVNlbGVjdG9yQWxsKCIjIiArIHRoaXMuc291cmNlKTsKICAgIH0KCiAgICByZXR1cm4gW0MuZ2V0RWxlbWVudEJ5SWQodGhpcy5zb3VyY2UpXTsKICB9OwoKICBRLkhpZGVUYWdzID0gZnVuY3Rpb24gKCkgewogICAgdmFyIGFIID0gdGhpcy5Tb3VyY2VFbGVtZW50cygpLAogICAgICAgIGo7CgogICAgZm9yIChqID0gMDsgaiA8IGFILmxlbmd0aDsgKytqKSB7CiAgICAgIGFIW2pdLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICB9CiAgfTsKCiAgUS5HZXRUYWdzID0gZnVuY3Rpb24gKCkgewogICAgdmFyIGFNID0gdGhpcy5Tb3VyY2VFbGVtZW50cygpLAogICAgICAgIGFMLAogICAgICAgIGFJID0gW10sCiAgICAgICAgYUssCiAgICAgICAgYUosCiAgICAgICAgYUg7CgogICAgZm9yIChhSCA9IDA7IGFIIDw9IHRoaXMucmVwZWF0VGFnczsgKythSCkgewogICAgICBmb3IgKGFLID0gMDsgYUsgPCBhTS5sZW5ndGg7ICsrYUspIHsKICAgICAgICBhTCA9IGFNW2FLXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYSIpOwoKICAgICAgICBmb3IgKGFKID0gMDsgYUogPCBhTC5sZW5ndGg7ICsrYUopIHsKICAgICAgICAgIGFJLnB1c2goYUxbYUpdKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gYUk7CiAgfTsKCiAgUS5NZXNzYWdlID0gZnVuY3Rpb24gKGFNKSB7CiAgICB2YXIgYU8gPSBbXSwKICAgICAgICBhSSwKICAgICAgICBqLAogICAgICAgIGFIID0gYU0uc3BsaXQoIiIpLAogICAgICAgIGFLLAogICAgICAgIGFOLAogICAgICAgIGFMLAogICAgICAgIGFKOwoKICAgIGZvciAoYUkgPSAwOyBhSSA8IGFILmxlbmd0aDsgKythSSkgewogICAgICBpZiAoYUhbYUldICE9ICIgIikgewogICAgICAgIGogPSBhSSAtIGFILmxlbmd0aCAvIDI7CiAgICAgICAgYUsgPSBDLmNyZWF0ZUVsZW1lbnQoIkEiKTsKICAgICAgICBhSy5ocmVmID0gIiMiOwogICAgICAgIGFLLmlubmVyVGV4dCA9IGFIW2FJXTsKICAgICAgICBhTCA9IDEwMCAqIGFoKGogLyA5KTsKICAgICAgICBhSiA9IC0xMDAgKiB3KGogLyA5KTsKICAgICAgICBhTiA9IG5ldyBlKHRoaXMsIGFIW2FJXSwgYUssIFthTCwgMCwgYUpdLCAyLCAxOCwgIiMwMDAiLCAiI2ZmZiIsIDAsIDAsIDAsICJtb25vc3BhY2UiLCAyLCBhSFthSV0pOwogICAgICAgIGFOLkluaXQoKTsKICAgICAgICBhTy5wdXNoKGFOKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBhTzsKICB9OwoKICBRLkNyZWF0ZVRhZyA9IGZ1bmN0aW9uIChhTCkgewogICAgdmFyIGFPLAogICAgICAgIGFKLAogICAgICAgIGFQLAogICAgICAgIGFLLAogICAgICAgIGFOLAogICAgICAgIGFILAogICAgICAgIGFNLAogICAgICAgIGFJLAogICAgICAgIGogPSBbMCwgMCwgMF07CgogICAgaWYgKCJ0ZXh0IiAhPSB0aGlzLmltYWdlTW9kZSkgewogICAgICBhTyA9IGFMLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJpbWciKTsKCiAgICAgIGlmIChhTy5sZW5ndGgpIHsKICAgICAgICBhSiA9IG5ldyBJbWFnZSgpOwogICAgICAgIGFKLnNyYyA9IGFPWzBdLnNyYzsKCiAgICAgICAgaWYgKCF0aGlzLmltYWdlTW9kZSkgewogICAgICAgICAgYVAgPSBuZXcgZSh0aGlzLCAiIiwgYUwsIGosIDAsIDApOwogICAgICAgICAgYVAuU2V0SW1hZ2UoYUopOwogICAgICAgICAgYXcoYUosIGFPWzBdLCBhUCwgdGhpcyk7CiAgICAgICAgICByZXR1cm4gYVA7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgaWYgKCJpbWFnZSIgIT0gdGhpcy5pbWFnZU1vZGUpIHsKICAgICAgYU4gPSBuZXcgYUIoYUwpOwogICAgICBhSyA9IGFOLkxpbmVzKCk7CgogICAgICBpZiAoIWFOLkVtcHR5KCkpIHsKICAgICAgICBhSCA9IHRoaXMudGV4dEZvbnQgfHwgbyhZKGFMLCAiZm9udC1mYW1pbHkiKSk7CgogICAgICAgIGlmICh0aGlzLnNwbGl0V2lkdGgpIHsKICAgICAgICAgIGFLID0gYU4uU3BsaXRXaWR0aCh0aGlzLnNwbGl0V2lkdGgsIHRoaXMuY3R4dCwgYUgsIHRoaXMudGV4dEhlaWdodCk7CiAgICAgICAgfQoKICAgICAgICBhTSA9IHRoaXMuYmdDb2xvdXIgPT0gInRhZyIgPyBZKGFMLCAiYmFja2dyb3VuZC1jb2xvciIpIDogdGhpcy5iZ0NvbG91cjsKICAgICAgICBhSSA9IHRoaXMuYmdPdXRsaW5lID09ICJ0YWciID8gWShhTCwgImNvbG9yIikgOiB0aGlzLmJnT3V0bGluZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBhTiA9IG51bGw7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoYU4gfHwgYUopIHsKICAgICAgYVAgPSBuZXcgZSh0aGlzLCBhSywgYUwsIGosIDIsIHRoaXMudGV4dEhlaWdodCArIDIsIHRoaXMudGV4dENvbG91ciB8fCBZKGFMLCAiY29sb3IiKSwgYU0sIHRoaXMuYmdSYWRpdXMsIGFJLCB0aGlzLmJnT3V0bGluZVRoaWNrbmVzcywgYUgsIHRoaXMucGFkZGluZywgYU4gJiYgYU4ub3JpZ2luYWwpOwoKICAgICAgaWYgKGFKKSB7CiAgICAgICAgYVAuU2V0SW1hZ2UoYUopOwogICAgICAgIGF3KGFKLCBhT1swXSwgYVAsIHRoaXMpOwogICAgICB9IGVsc2UgewogICAgICAgIGFQLkluaXQoKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGFQOwogICAgfQogIH07CgogIFEuVXBkYXRlVGFnID0gZnVuY3Rpb24gKGFILCBpKSB7CiAgICB2YXIgYUsgPSB0aGlzLnRleHRDb2xvdXIgfHwgWShpLCAiY29sb3IiKSwKICAgICAgICBqID0gdGhpcy50ZXh0Rm9udCB8fCBvKFkoaSwgImZvbnQtZmFtaWx5IikpLAogICAgICAgIGFKID0gdGhpcy5iZ0NvbG91ciA9PSAidGFnIiA/IFkoaSwgImJhY2tncm91bmQtY29sb3IiKSA6IHRoaXMuYmdDb2xvdXIsCiAgICAgICAgYUkgPSB0aGlzLmJnT3V0bGluZSA9PSAidGFnIiA/IFkoaSwgImNvbG9yIikgOiB0aGlzLmJnT3V0bGluZTsKICAgIGFILmEgPSBpOwogICAgYUgudGl0bGUgPSBpLnRpdGxlOwoKICAgIGlmIChhSC5jb2xvdXIgIT0gYUsgfHwgYUgudGV4dEZvbnQgIT0gaiB8fCBhSC5iZ0NvbG91ciAhPSBhSiB8fCBhSC5iZ091dGxpbmUgIT0gYUkpIHsKICAgICAgYUguU2V0Rm9udChqLCBhSywgYUosIGFJKTsKICAgIH0KICB9OwoKICBRLldlaWdodCA9IGZ1bmN0aW9uIChhTikgewogICAgdmFyIGFKID0gYU4ubGVuZ3RoLAogICAgICAgIGFMLAogICAgICAgIGFILAogICAgICAgIGFPLAogICAgICAgIGFLID0gW10sCiAgICAgICAgaiwKICAgICAgICBhSSA9IHRoaXMud2VpZ2h0RnJvbSA/IHRoaXMud2VpZ2h0RnJvbS5zcGxpdCgvWywgXS8pIDogW251bGxdLAogICAgICAgIGFNID0gYUkubGVuZ3RoOwoKICAgIGZvciAoYUggPSAwOyBhSCA8IGFKOyArK2FIKSB7CiAgICAgIGFLW2FIXSA9IFtdOwoKICAgICAgZm9yIChhTyA9IDA7IGFPIDwgYU07ICsrYU8pIHsKICAgICAgICBhTCA9IHUoYU5bYUhdLmEsIGFJW2FPXSwgdGhpcy50ZXh0SGVpZ2h0KTsKCiAgICAgICAgaWYgKCF0aGlzLm1heF93ZWlnaHRbYU9dIHx8IGFMID4gdGhpcy5tYXhfd2VpZ2h0W2FPXSkgewogICAgICAgICAgdGhpcy5tYXhfd2VpZ2h0W2FPXSA9IGFMOwogICAgICAgIH0KCiAgICAgICAgaWYgKCF0aGlzLm1pbl93ZWlnaHRbYU9dIHx8IGFMIDwgdGhpcy5taW5fd2VpZ2h0W2FPXSkgewogICAgICAgICAgdGhpcy5taW5fd2VpZ2h0W2FPXSA9IGFMOwogICAgICAgIH0KCiAgICAgICAgYUtbYUhdW2FPXSA9IGFMOwogICAgICB9CiAgICB9CgogICAgZm9yIChhTyA9IDA7IGFPIDwgYU07ICsrYU8pIHsKICAgICAgaWYgKHRoaXMubWF4X3dlaWdodFthT10gPiB0aGlzLm1pbl93ZWlnaHRbYU9dKSB7CiAgICAgICAgaiA9IDE7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoaikgewogICAgICBmb3IgKGFIID0gMDsgYUggPCBhSjsgKythSCkgewogICAgICAgIGFOW2FIXS5TZXRXZWlnaHQoYUtbYUhdKTsKICAgICAgfQogICAgfQogIH07CgogIFEuTG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBhUiA9IHRoaXMuR2V0VGFncygpLAogICAgICAgIGFNID0gW10sCiAgICAgICAgYVAsCiAgICAgICAgYVEsCiAgICAgICAgYUwsCiAgICAgICAgYUksCiAgICAgICAgYUgsCiAgICAgICAgaiwKICAgICAgICBhSiwKICAgICAgICBhTywKICAgICAgICBhSyA9IFtdLAogICAgICAgIGFOID0gewogICAgICBzcGhlcmU6IHEsCiAgICAgIHZjeWxpbmRlcjogYW0sCiAgICAgIGhjeWxpbmRlcjogYXUsCiAgICAgIHZyaW5nOiBkLAogICAgICBocmluZzogbgogICAgfTsKCiAgICBpZiAoYVIubGVuZ3RoKSB7CiAgICAgIGFLLmxlbmd0aCA9IGFSLmxlbmd0aDsKCiAgICAgIGZvciAoYU8gPSAwOyBhTyA8IGFSLmxlbmd0aDsgKythTykgewogICAgICAgIGFLW2FPXSA9IGFPOwogICAgICB9CgogICAgICB0aGlzLnNodWZmbGVUYWdzICYmIGFuKGFLKTsKICAgICAgYUkgPSAxMDAgKiB0aGlzLnJhZGl1c1g7CiAgICAgIGFIID0gMTAwICogdGhpcy5yYWRpdXNZOwogICAgICBqID0gMTAwICogdGhpcy5yYWRpdXNaOwogICAgICB0aGlzLm1heF9yYWRpdXMgPSBzKGFJLCBzKGFILCBqKSk7CgogICAgICBmb3IgKGFPID0gMDsgYU8gPCBhUi5sZW5ndGg7ICsrYU8pIHsKICAgICAgICBhUSA9IHRoaXMuQ3JlYXRlVGFnKGFSW2FLW2FPXV0pOwoKICAgICAgICBpZiAoYVEpIHsKICAgICAgICAgIGFNLnB1c2goYVEpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy53ZWlnaHQgJiYgdGhpcy5XZWlnaHQoYU0sIHRydWUpOwoKICAgICAgaWYgKHRoaXMuc2hhcGVBcmdzKSB7CiAgICAgICAgdGhpcy5zaGFwZUFyZ3NbMF0gPSBhTS5sZW5ndGg7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYUwgPSB0aGlzLnNoYXBlLnRvU3RyaW5nKCkuc3BsaXQoL1soKSxdLyk7CiAgICAgICAgYVAgPSBhTC5zaGlmdCgpOwoKICAgICAgICBpZiAodHlwZW9mIHdpbmRvd1thUF0gPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgIHRoaXMuc2hhcGUgPSB3aW5kb3dbYVBdOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnNoYXBlID0gYU5bYVBdIHx8IGFOLnNwaGVyZTsKICAgICAgICB9CgogICAgICAgIHRoaXMuc2hhcGVBcmdzID0gW2FNLmxlbmd0aCwgYUksIGFILCBqXS5jb25jYXQoYUwpOwogICAgICB9CgogICAgICBhSiA9IHRoaXMuc2hhcGUuYXBwbHkodGhpcywgdGhpcy5zaGFwZUFyZ3MpOwogICAgICB0aGlzLmxpc3RMZW5ndGggPSBhTS5sZW5ndGg7CgogICAgICBmb3IgKGFPID0gMDsgYU8gPCBhTS5sZW5ndGg7ICsrYU8pIHsKICAgICAgICBhTVthT10ucG9zaXRpb24gPSBuZXcgYWUoYUpbYU9dWzBdLCBhSlthT11bMV0sIGFKW2FPXVsyXSk7CiAgICAgIH0KICAgIH0KCiAgICBpZiAodGhpcy5ub1RhZ3NNZXNzYWdlICYmICFhTS5sZW5ndGgpIHsKICAgICAgYU8gPSB0aGlzLmltYWdlTW9kZSAmJiB0aGlzLmltYWdlTW9kZSAhPSAiYm90aCIgPyB0aGlzLmltYWdlTW9kZSArICIgIiA6ICIiOwogICAgICBhTSA9IHRoaXMuTWVzc2FnZSgiTm8gIiArIGFPICsgInRhZ3MiKTsKICAgIH0KCiAgICB0aGlzLnRhZ2xpc3QgPSBhTTsKICB9OwoKICBRLlVwZGF0ZSA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBhUSA9IHRoaXMuR2V0VGFncygpLAogICAgICAgIGFQID0gW10sCiAgICAgICAgYUsgPSB0aGlzLnRhZ2xpc3QsCiAgICAgICAgYVIsCiAgICAgICAgYU8gPSBbXSwKICAgICAgICBhTSA9IFtdLAogICAgICAgIGFJLAogICAgICAgIGFOLAogICAgICAgIGFILAogICAgICAgIGFMLAogICAgICAgIGFKOwoKICAgIGlmICghdGhpcy5zaGFwZUFyZ3MpIHsKICAgICAgcmV0dXJuIHRoaXMuTG9hZCgpOwogICAgfQoKICAgIGlmIChhUS5sZW5ndGgpIHsKICAgICAgYUggPSB0aGlzLmxpc3RMZW5ndGggPSBhUS5sZW5ndGg7CiAgICAgIGFOID0gYUsubGVuZ3RoOwoKICAgICAgZm9yIChhTCA9IDA7IGFMIDwgYU47ICsrYUwpIHsKICAgICAgICBhUC5wdXNoKGFLW2FMXSk7CiAgICAgICAgYU0ucHVzaChhTCk7CiAgICAgIH0KCiAgICAgIGZvciAoYUwgPSAwOyBhTCA8IGFIOyArK2FMKSB7CiAgICAgICAgZm9yIChhSiA9IDAsIGFSID0gMDsgYUogPCBhTjsgKythSikgewogICAgICAgICAgaWYgKGFLW2FKXS5FcXVhbFRvKGFRW2FMXSkpIHsKICAgICAgICAgICAgdGhpcy5VcGRhdGVUYWcoYVBbYUpdLCBhUVthTF0pOwogICAgICAgICAgICBhUiA9IGFNW2FKXSA9IC0xOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKCFhUikgewogICAgICAgICAgYU8ucHVzaChhTCk7CiAgICAgICAgfQogICAgICB9CgogICAgICBmb3IgKGFMID0gMCwgYUogPSAwOyBhTCA8IGFOOyArK2FMKSB7CiAgICAgICAgaWYgKGFNW2FKXSA9PSAtMSkgewogICAgICAgICAgYU0uc3BsaWNlKGFKLCAxKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgKythSjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChhTS5sZW5ndGgpIHsKICAgICAgICBhbihhTSk7CgogICAgICAgIHdoaWxlIChhTS5sZW5ndGggJiYgYU8ubGVuZ3RoKSB7CiAgICAgICAgICBhTCA9IGFNLnNoaWZ0KCk7CiAgICAgICAgICBhSiA9IGFPLnNoaWZ0KCk7CiAgICAgICAgICBhUFthTF0gPSB0aGlzLkNyZWF0ZVRhZyhhUVthSl0pOwogICAgICAgIH0KCiAgICAgICAgYU0uc29ydChmdW5jdGlvbiAoaiwgaSkgewogICAgICAgICAgcmV0dXJuIGogLSBpOwogICAgICAgIH0pOwoKICAgICAgICB3aGlsZSAoYU0ubGVuZ3RoKSB7CiAgICAgICAgICBhUC5zcGxpY2UoYU0ucG9wKCksIDEpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgYUogPSBhUC5sZW5ndGggLyAoYU8ubGVuZ3RoICsgMSk7CiAgICAgIGFMID0gMDsKCiAgICAgIHdoaWxlIChhTy5sZW5ndGgpIHsKICAgICAgICBhUC5zcGxpY2UoYXAoKythTCAqIGFKKSwgMCwgdGhpcy5DcmVhdGVUYWcoYVFbYU8uc2hpZnQoKV0pKTsKICAgICAgfQoKICAgICAgdGhpcy5zaGFwZUFyZ3NbMF0gPSBhSCA9IGFQLmxlbmd0aDsKICAgICAgYUkgPSB0aGlzLnNoYXBlLmFwcGx5KHRoaXMsIHRoaXMuc2hhcGVBcmdzKTsKCiAgICAgIGZvciAoYUwgPSAwOyBhTCA8IGFIOyArK2FMKSB7CiAgICAgICAgYVBbYUxdLnBvc2l0aW9uID0gbmV3IGFlKGFJW2FMXVswXSwgYUlbYUxdWzFdLCBhSVthTF1bMl0pOwogICAgICB9CgogICAgICB0aGlzLndlaWdodCAmJiB0aGlzLldlaWdodChhUCk7CiAgICB9CgogICAgdGhpcy50YWdsaXN0ID0gYVA7CiAgfTsKCiAgUS5TZXRTaGFkb3cgPSBmdW5jdGlvbiAoaSkgewogICAgaS5zaGFkb3dCbHVyID0gdGhpcy5zaGFkb3dCbHVyOwogICAgaS5zaGFkb3dPZmZzZXRYID0gdGhpcy5zaGFkb3dPZmZzZXRbMF07CiAgICBpLnNoYWRvd09mZnNldFkgPSB0aGlzLnNoYWRvd09mZnNldFsxXTsKICB9OwoKICBRLkRyYXcgPSBmdW5jdGlvbiAoYVIpIHsKICAgIGlmICh0aGlzLnBhdXNlZCkgewogICAgICByZXR1cm47CiAgICB9CgogICAgdmFyIGFMID0gdGhpcy5jYW52YXMsCiAgICAgICAgYUogPSBhTC53aWR0aCwKICAgICAgICBhUSA9IGFMLmhlaWdodCwKICAgICAgICBhVCA9IDAsCiAgICAgICAgYUkgPSAoYVIgLSB0aGlzLnRpbWUpICogeS5pbnRlcnZhbCAvIDEwMDAsCiAgICAgICAgYVAgPSBhSiAvIDIgKyB0aGlzLm9mZnNldFgsCiAgICAgICAgYU8gPSBhUSAvIDIgKyB0aGlzLm9mZnNldFksCiAgICAgICAgYVggPSB0aGlzLmN0eHQsCiAgICAgICAgYU4sCiAgICAgICAgYVksCiAgICAgICAgYVYsCiAgICAgICAgYUggPSAtMSwKICAgICAgICBhSyA9IHRoaXMudGFnbGlzdCwKICAgICAgICBhVSA9IGFLLmxlbmd0aCwKICAgICAgICBqID0gdGhpcy5mcm9udFNlbGVjdCwKICAgICAgICBhUyA9IHRoaXMuY2VudHJlRnVuYyA9PSBhQSwKICAgICAgICBhTTsKICAgIHRoaXMudGltZSA9IGFSOwoKICAgIGlmICh0aGlzLmZyb3plbiAmJiB0aGlzLmRyYXduKSB7CiAgICAgIHJldHVybiB0aGlzLkFuaW1hdGUoYUosIGFRLCBhSSk7CiAgICB9CgogICAgYU0gPSB0aGlzLkFuaW1hdGVGaXhlZCgpOwogICAgYVguc2V0VHJhbnNmb3JtKDEsIDAsIDAsIDEsIDAsIDApOwoKICAgIGZvciAoYVYgPSAwOyBhViA8IGFVOyArK2FWKSB7CiAgICAgIGFLW2FWXS5DYWxjKHRoaXMudHJhbnNmb3JtLCB0aGlzLmZpeGVkQWxwaGEpOwogICAgfQoKICAgIGFLID0gQShhSywgZnVuY3Rpb24gKGFaLCBpKSB7CiAgICAgIHJldHVybiBpLnogLSBhWi56OwogICAgfSk7CgogICAgaWYgKGFNICYmIHRoaXMuZml4ZWRBbmltLmFjdGl2ZSkgewogICAgICBhTiA9IHRoaXMuZml4ZWRBbmltLnRhZy5VcGRhdGVBY3RpdmUoYVgsIGFQLCBhTyk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLmFjdGl2ZSA9IG51bGw7CgogICAgICBmb3IgKGFWID0gMDsgYVYgPCBhVTsgKythVikgewogICAgICAgIGFZID0gdGhpcy5teCA+PSAwICYmIHRoaXMubXkgPj0gMCAmJiB0aGlzLnRhZ2xpc3RbYVZdLkNoZWNrQWN0aXZlKGFYLCBhUCwgYU8pOwoKICAgICAgICBpZiAoYVkgJiYgYVkuc2MgPiBhVCAmJiAoIWogfHwgYVkueiA8PSAwKSkgewogICAgICAgICAgYU4gPSBhWTsKICAgICAgICAgIGFIID0gYVY7CiAgICAgICAgICBhTi50YWcgPSB0aGlzLnRhZ2xpc3RbYVZdOwogICAgICAgICAgYVQgPSBhWS5zYzsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuYWN0aXZlID0gYU47CiAgICB9CgogICAgdGhpcy50eHRPcHQgfHwgdGhpcy5zaGFkb3cgJiYgdGhpcy5TZXRTaGFkb3coYVgpOwogICAgYVguY2xlYXJSZWN0KDAsIDAsIGFKLCBhUSk7CgogICAgZm9yIChhViA9IDA7IGFWIDwgYVU7ICsrYVYpIHsKICAgICAgaWYgKCFhUyAmJiBhS1thVl0ueiA8PSAwKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHRoaXMuY2VudHJlRnVuYyhhWCwgYUosIGFRLCBhUCwgYU8pOwogICAgICAgIH0gY2F0Y2ggKGFXKSB7CiAgICAgICAgICBhbGVydChhVyk7CiAgICAgICAgICB0aGlzLmNlbnRyZUZ1bmMgPSBhQTsKICAgICAgICB9CgogICAgICAgIGFTID0gdHJ1ZTsKICAgICAgfQoKICAgICAgaWYgKCEoYU4gJiYgYU4udGFnID09IGFLW2FWXSAmJiBhTi5QcmVEcmF3KGFYLCBhS1thVl0sIGFQLCBhTykpKSB7CiAgICAgICAgYUtbYVZdLkRyYXcoYVgsIGFQLCBhTyk7CiAgICAgIH0KCiAgICAgIGFOICYmIGFOLnRhZyA9PSBhS1thVl0gJiYgYU4uUG9zdERyYXcoYVgpOwogICAgfQoKICAgIGlmICh0aGlzLmZyZWV6ZUFjdGl2ZSAmJiBhTikgewogICAgICB0aGlzLkZyZWV6ZSgpOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5VbkZyZWV6ZSgpOwogICAgICB0aGlzLmRyYXduID0gYVUgPT0gdGhpcy5saXN0TGVuZ3RoOwogICAgfQoKICAgIGlmICh0aGlzLmZpeGVkQ2FsbGJhY2spIHsKICAgICAgdGhpcy5maXhlZENhbGxiYWNrKHRoaXMsIHRoaXMuZml4ZWRDYWxsYmFja1RhZyk7CiAgICAgIHRoaXMuZml4ZWRDYWxsYmFjayA9IG51bGw7CiAgICB9CgogICAgYU0gfHwgdGhpcy5BbmltYXRlKGFKLCBhUSwgYUkpOwogICAgYU4gJiYgYU4uTGFzdERyYXcoYVgpOwogICAgYUwuc3R5bGUuY3Vyc29yID0gYU4gPyB0aGlzLmFjdGl2ZUN1cnNvciA6ICIiOwogICAgdGhpcy5Ub29sdGlwKGFOLCB0aGlzLnRhZ2xpc3RbYUhdKTsKICB9OwoKICBRLlRvb2x0aXBOb25lID0gZnVuY3Rpb24gKCkge307CgogIFEuVG9vbHRpcE5hdGl2ZSA9IGZ1bmN0aW9uIChqLCBpKSB7CiAgICBpZiAoaikgewogICAgICB0aGlzLmNhbnZhcy50aXRsZSA9IGkgJiYgaS50aXRsZSA/IGkudGl0bGUgOiAiIjsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuY2FudmFzLnRpdGxlID0gdGhpcy5jdGl0bGU7CiAgICB9CiAgfTsKCiAgUS5TZXRUVERpdiA9IGZ1bmN0aW9uIChhSSwgaikgewogICAgdmFyIGkgPSB0aGlzLAogICAgICAgIGFIID0gaS50dGRpdi5zdHlsZTsKCiAgICBpZiAoYUkgIT0gaS50dGRpdi5pbm5lckhUTUwpIHsKICAgICAgYUguZGlzcGxheSA9ICJub25lIjsKICAgIH0KCiAgICBpLnR0ZGl2LmlubmVySFRNTCA9IGFJOwogICAgaiAmJiAoai50aXRsZSA9IGkudHRkaXYuaW5uZXJIVE1MKTsKCiAgICBpZiAoYUguZGlzcGxheSA9PSAibm9uZSIgJiYgIWkudHR0aW1lcikgewogICAgICBpLnR0dGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgYUogPSBhYihpLmNhbnZhcy5pZCk7CiAgICAgICAgYUguZGlzcGxheSA9ICJibG9jayI7CiAgICAgICAgYUgubGVmdCA9IGFKLnggKyBpLm14ICsgInB4IjsKICAgICAgICBhSC50b3AgPSBhSi55ICsgaS5teSArIDI0ICsgInB4IjsKICAgICAgICBpLnR0dGltZXIgPSBudWxsOwogICAgICB9LCBpLnRvb2x0aXBEZWxheSk7CiAgICB9CiAgfTsKCiAgUS5Ub29sdGlwRGl2ID0gZnVuY3Rpb24gKGosIGkpIHsKICAgIGlmIChqICYmIGkgJiYgaS50aXRsZSkgewogICAgICB0aGlzLlNldFRURGl2KGkudGl0bGUsIGkpOwogICAgfSBlbHNlIHsKICAgICAgaWYgKCFqICYmIHRoaXMubXggIT0gLTEgJiYgdGhpcy5teSAhPSAtMSAmJiB0aGlzLmN0aXRsZS5sZW5ndGgpIHsKICAgICAgICB0aGlzLlNldFRURGl2KHRoaXMuY3RpdGxlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnR0ZGl2LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgIH0KICAgIH0KICB9OwoKICBRLlRyYW5zZm9ybSA9IGZ1bmN0aW9uIChhSywgaSwgYU0pIHsKICAgIGlmIChpIHx8IGFNKSB7CiAgICAgIHZhciBqID0gYWgoaSksCiAgICAgICAgICBhTCA9IHcoaSksCiAgICAgICAgICBhTiA9IGFoKGFNKSwKICAgICAgICAgIGFKID0gdyhhTSksCiAgICAgICAgICBhSCA9IG5ldyBSKFthSiwgMCwgYU4sIDAsIDEsIDAsIC1hTiwgMCwgYUpdKSwKICAgICAgICAgIGFJID0gbmV3IFIoWzEsIDAsIDAsIDAsIGFMLCAtaiwgMCwgaiwgYUxdKTsKICAgICAgYUsudHJhbnNmb3JtID0gYUsudHJhbnNmb3JtLm11bChhSC5tdWwoYUkpKTsKICAgIH0KICB9OwoKICBRLkFuaW1hdGVGaXhlZCA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBhSCwgaiwgYUosIGksIGFJOwoKICAgIGlmICh0aGlzLmZhZGVJbikgewogICAgICBqID0gRygpIC0gdGhpcy5zdGFydFRpbWU7CgogICAgICBpZiAoaiA+PSB0aGlzLmZhZGVJbikgewogICAgICAgIHRoaXMuZmFkZUluID0gMDsKICAgICAgICB0aGlzLmZpeGVkQWxwaGEgPSAxOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZml4ZWRBbHBoYSA9IGogLyB0aGlzLmZhZGVJbjsKICAgICAgfQogICAgfQoKICAgIGlmICh0aGlzLmZpeGVkQW5pbSkgewogICAgICBpZiAoIXRoaXMuZml4ZWRBbmltLnRyYW5zZm9ybSkgewogICAgICAgIHRoaXMuZml4ZWRBbmltLnRyYW5zZm9ybSA9IHRoaXMudHJhbnNmb3JtOwogICAgICB9CgogICAgICBhSCA9IHRoaXMuZml4ZWRBbmltLCBqID0gRygpIC0gYUgudDAsIGFKID0gYUguYW5nbGUsIGksIGFJID0gdGhpcy5hbmltVGltaW5nKGFILnQsIGopOwogICAgICB0aGlzLnRyYW5zZm9ybSA9IGFILnRyYW5zZm9ybTsKCiAgICAgIGlmIChqID49IGFILnQpIHsKICAgICAgICB0aGlzLmZpeGVkQ2FsbGJhY2tUYWcgPSBhSC50YWc7CiAgICAgICAgdGhpcy5maXhlZENhbGxiYWNrID0gYUguY2I7CiAgICAgICAgdGhpcy5maXhlZEFuaW0gPSB0aGlzLnlhdyA9IHRoaXMucGl0Y2ggPSAwOwogICAgICB9IGVsc2UgewogICAgICAgIGFKICo9IGFJOwogICAgICB9CgogICAgICBpID0gUi5Sb3RhdGlvbihhSiwgYUguYXhpcyk7CiAgICAgIHRoaXMudHJhbnNmb3JtID0gdGhpcy50cmFuc2Zvcm0ubXVsKGkpOwogICAgICByZXR1cm4gdGhpcy5maXhlZEFuaW0gIT0gMDsKICAgIH0KCiAgICByZXR1cm4gZmFsc2U7CiAgfTsKCiAgUS5BbmltYXRlUG9zaXRpb24gPSBmdW5jdGlvbiAoYUgsIGFLLCBhSSkgewogICAgdmFyIGogPSB0aGlzLAogICAgICAgIGkgPSBqLm14LAogICAgICAgIGFNID0gai5teSwKICAgICAgICBhSiwKICAgICAgICBhTDsKCiAgICBpZiAoIWouZnJvemVuICYmIGkgPj0gMCAmJiBhTSA+PSAwICYmIGkgPCBhSCAmJiBhTSA8IGFLKSB7CiAgICAgIGFKID0gai5tYXhTcGVlZCwgYUwgPSBqLnJldmVyc2UgPyAtMSA6IDE7CiAgICAgIGoubHggfHwgKGoueWF3ID0gKGkgKiAyICogYUogLyBhSCAtIGFKKSAqIGFMICogYUkpOwogICAgICBqLmx5IHx8IChqLnBpdGNoID0gKGFNICogMiAqIGFKIC8gYUsgLSBhSikgKiAtYUwgKiBhSSk7CiAgICAgIGouaW5pdGlhbCA9IG51bGw7CiAgICB9IGVsc2UgewogICAgICBpZiAoIWouaW5pdGlhbCkgewogICAgICAgIGlmIChqLmZyb3plbiAmJiAhai5mcmVlemVEZWNlbCkgewogICAgICAgICAgai55YXcgPSBqLnBpdGNoID0gMDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgai5EZWNlbChqKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICB0aGlzLlRyYW5zZm9ybShqLCBqLnBpdGNoLCBqLnlhdyk7CiAgfTsKCiAgUS5BbmltYXRlRHJhZyA9IGZ1bmN0aW9uIChqLCBhSiwgYUkpIHsKICAgIHZhciBpID0gdGhpcywKICAgICAgICBhSCA9IDEwMCAqIGFJICogaS5tYXhTcGVlZCAvIGkubWF4X3JhZGl1cyAvIGkuem9vbTsKCiAgICBpZiAoaS5keCB8fCBpLmR5KSB7CiAgICAgIGkubHggfHwgKGkueWF3ID0gaS5keCAqIGFIIC8gaS5zdHJldGNoWCk7CiAgICAgIGkubHkgfHwgKGkucGl0Y2ggPSBpLmR5ICogLWFIIC8gaS5zdHJldGNoWSk7CiAgICAgIGkuZHggPSBpLmR5ID0gMDsKICAgICAgaS5pbml0aWFsID0gbnVsbDsKICAgIH0gZWxzZSB7CiAgICAgIGlmICghaS5pbml0aWFsKSB7CiAgICAgICAgaS5EZWNlbChpKTsKICAgICAgfQogICAgfQoKICAgIHRoaXMuVHJhbnNmb3JtKGksIGkucGl0Y2gsIGkueWF3KTsKICB9OwoKICBRLkZyZWV6ZSA9IGZ1bmN0aW9uICgpIHsKICAgIGlmICghdGhpcy5mcm96ZW4pIHsKICAgICAgdGhpcy5wcmVGcmVlemUgPSBbdGhpcy55YXcsIHRoaXMucGl0Y2hdOwogICAgICB0aGlzLmZyb3plbiA9IDE7CiAgICAgIHRoaXMuZHJhd24gPSAwOwogICAgfQogIH07CgogIFEuVW5GcmVlemUgPSBmdW5jdGlvbiAoKSB7CiAgICBpZiAodGhpcy5mcm96ZW4pIHsKICAgICAgdGhpcy55YXcgPSB0aGlzLnByZUZyZWV6ZVswXTsKICAgICAgdGhpcy5waXRjaCA9IHRoaXMucHJlRnJlZXplWzFdOwogICAgICB0aGlzLmZyb3plbiA9IDA7CiAgICB9CiAgfTsKCiAgUS5EZWNlbCA9IGZ1bmN0aW9uIChpKSB7CiAgICB2YXIgYUggPSBpLm1pblNwZWVkLAogICAgICAgIGFJID0gTChpLnlhdyksCiAgICAgICAgaiA9IEwoaS5waXRjaCk7CgogICAgaWYgKCFpLmx4ICYmIGFJID4gYUgpIHsKICAgICAgaS55YXcgPSBhSSA+IGkuejAgPyBpLnlhdyAqIGkuZGVjZWwgOiAwOwogICAgfQoKICAgIGlmICghaS5seSAmJiBqID4gYUgpIHsKICAgICAgaS5waXRjaCA9IGogPiBpLnowID8gaS5waXRjaCAqIGkuZGVjZWwgOiAwOwogICAgfQogIH07CgogIFEuWm9vbSA9IGZ1bmN0aW9uIChpKSB7CiAgICB0aGlzLnoyID0gdGhpcy56MSAqICgxIC8gaSk7CiAgICB0aGlzLmRyYXduID0gMDsKICB9OwoKICBRLkNsaWNrZWQgPSBmdW5jdGlvbiAoYUgpIHsKICAgIHZhciBpID0gdGhpcy5hY3RpdmU7CgogICAgdHJ5IHsKICAgICAgaWYgKGkgJiYgaS50YWcpIHsKICAgICAgICBpZiAodGhpcy5jbGlja1RvRnJvbnQgPT09IGZhbHNlIHx8IHRoaXMuY2xpY2tUb0Zyb250ID09PSBudWxsKSB7CiAgICAgICAgICBpLnRhZy5DbGlja2VkKGFIKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5UYWdUb0Zyb250KGkudGFnLCB0aGlzLmNsaWNrVG9Gcm9udCwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpLnRhZy5DbGlja2VkKGFIKTsKICAgICAgICAgIH0sIHRydWUpOwogICAgICAgIH0KICAgICAgfQogICAgfSBjYXRjaCAoaikge30KICB9OwoKICBRLldoZWVsID0gZnVuY3Rpb24gKGopIHsKICAgIHZhciBhSCA9IHRoaXMuem9vbSArIHRoaXMuem9vbVN0ZXAgKiAoaiA/IDEgOiAtMSk7CiAgICB0aGlzLnpvb20gPSBhRCh0aGlzLnpvb21NYXgsIHModGhpcy56b29tTWluLCBhSCkpOwogICAgdGhpcy5ab29tKHRoaXMuem9vbSk7CiAgfTsKCiAgUS5CZWdpbkRyYWcgPSBmdW5jdGlvbiAoaSkgewogICAgdGhpcy5kb3duID0gUyhpLCB0aGlzLmNhbnZhcyk7CiAgICBpLmNhbmNlbEJ1YmJsZSA9IHRydWU7CiAgICBpLnJldHVyblZhbHVlID0gZmFsc2U7CiAgICBpLnByZXZlbnREZWZhdWx0ICYmIGkucHJldmVudERlZmF1bHQoKTsKICB9OwoKICBRLkRyYWcgPSBmdW5jdGlvbiAoYUosIGFJKSB7CiAgICBpZiAodGhpcy5kcmFnQ29udHJvbCAmJiB0aGlzLmRvd24pIHsKICAgICAgdmFyIGFIID0gdGhpcy5kcmFnVGhyZXNob2xkICogdGhpcy5kcmFnVGhyZXNob2xkLAogICAgICAgICAgaiA9IGFJLnggLSB0aGlzLmRvd24ueCwKICAgICAgICAgIGkgPSBhSS55IC0gdGhpcy5kb3duLnk7CgogICAgICBpZiAodGhpcy5kcmFnZ2luZyB8fCBqICogaiArIGkgKiBpID4gYUgpIHsKICAgICAgICB0aGlzLmR4ID0gajsKICAgICAgICB0aGlzLmR5ID0gaTsKICAgICAgICB0aGlzLmRyYWdnaW5nID0gMTsKICAgICAgICB0aGlzLmRvd24gPSBhSTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiB0aGlzLmRyYWdnaW5nOwogIH07CgogIFEuRW5kRHJhZyA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBpID0gdGhpcy5kcmFnZ2luZzsKICAgIHRoaXMuZHJhZ2dpbmcgPSB0aGlzLmRvd24gPSBudWxsOwogICAgcmV0dXJuIGk7CiAgfTsKCiAgZnVuY3Rpb24gRChhSCkgewogICAgdmFyIGogPSBhSC50YXJnZXRUb3VjaGVzWzBdLAogICAgICAgIGkgPSBhSC50YXJnZXRUb3VjaGVzWzFdOwogICAgcmV0dXJuIEYoYXQoaS5wYWdlWCAtIGoucGFnZVgsIDIpICsgYXQoaS5wYWdlWSAtIGoucGFnZVksIDIpKTsKICB9CgogIFEuQmVnaW5QaW5jaCA9IGZ1bmN0aW9uIChpKSB7CiAgICB0aGlzLnBpbmNoZWQgPSBbRChpKSwgdGhpcy56b29tXTsKICAgIGkucHJldmVudERlZmF1bHQgJiYgaS5wcmV2ZW50RGVmYXVsdCgpOwogIH07CgogIFEuUGluY2ggPSBmdW5jdGlvbiAoaikgewogICAgdmFyIGFJLAogICAgICAgIGFILAogICAgICAgIGkgPSB0aGlzLnBpbmNoZWQ7CgogICAgaWYgKCFpKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBhSCA9IEQoaik7CiAgICBhSSA9IGlbMV0gKiBhSCAvIGlbMF07CiAgICB0aGlzLnpvb20gPSBhRCh0aGlzLnpvb21NYXgsIHModGhpcy56b29tTWluLCBhSSkpOwogICAgdGhpcy5ab29tKHRoaXMuem9vbSk7CiAgfTsKCiAgUS5FbmRQaW5jaCA9IGZ1bmN0aW9uIChpKSB7CiAgICB0aGlzLnBpbmNoZWQgPSBudWxsOwogIH07CgogIFEuUGF1c2UgPSBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLnBhdXNlZCA9IHRydWU7CiAgfTsKCiAgUS5SZXN1bWUgPSBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLnBhdXNlZCA9IGZhbHNlOwogIH07CgogIFEuU2V0U3BlZWQgPSBmdW5jdGlvbiAoaikgewogICAgdGhpcy5pbml0aWFsID0gajsKICAgIHRoaXMueWF3ID0galswXSAqIHRoaXMubWF4U3BlZWQ7CiAgICB0aGlzLnBpdGNoID0galsxXSAqIHRoaXMubWF4U3BlZWQ7CiAgfTsKCiAgUS5GaW5kVGFnID0gZnVuY3Rpb24gKGFIKSB7CiAgICBpZiAoIWFpKGFIKSkgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICBhaShhSC5pbmRleCkgJiYgKGFIID0gYUguaW5kZXgpOwoKICAgIGlmICghSShhSCkpIHsKICAgICAgcmV0dXJuIHRoaXMudGFnbGlzdFthSF07CiAgICB9CgogICAgdmFyIGFJLCBhSiwgajsKCiAgICBpZiAoYWkoYUguaWQpKSB7CiAgICAgIGFJID0gImlkIiwgYUogPSBhSC5pZDsKICAgIH0gZWxzZSB7CiAgICAgIGlmIChhaShhSC50ZXh0KSkgewogICAgICAgIGFJID0gImlubmVyVGV4dCIsIGFKID0gYUgudGV4dDsKICAgICAgfQogICAgfQoKICAgIGZvciAoaiA9IDA7IGogPCB0aGlzLnRhZ2xpc3QubGVuZ3RoOyArK2opIHsKICAgICAgaWYgKHRoaXMudGFnbGlzdFtqXS5hW2FJXSA9PSBhSikgewogICAgICAgIHJldHVybiB0aGlzLnRhZ2xpc3Rbal07CiAgICAgIH0KICAgIH0KICB9OwoKICBRLlJvdGF0ZVRhZyA9IGZ1bmN0aW9uIChhUCwgYUksIGFPLCBpLCBhTSwgYUgpIHsKICAgIHZhciBhTiA9IGFQLkNhbGModGhpcy50cmFuc2Zvcm0sIDEpLAogICAgICAgIGFLID0gbmV3IGFlKGFOLngsIGFOLnksIGFOLnopLAogICAgICAgIGFKID0gYWooYU8sIGFJKSwKICAgICAgICBqID0gYUsuYW5nbGUoYUopLAogICAgICAgIGFMID0gYUsuY3Jvc3MoYUopLnVuaXQoKTsKCiAgICBpZiAoaiA9PSAwKSB7CiAgICAgIHRoaXMuZml4ZWRDYWxsYmFja1RhZyA9IGFQOwogICAgICB0aGlzLmZpeGVkQ2FsbGJhY2sgPSBhTTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuZml4ZWRBbmltID0gewogICAgICAgIGFuZ2xlOiAtaiwKICAgICAgICBheGlzOiBhTCwKICAgICAgICB0OiBpLAogICAgICAgIHQwOiBHKCksCiAgICAgICAgY2I6IGFNLAogICAgICAgIHRhZzogYVAsCiAgICAgICAgYWN0aXZlOiBhSAogICAgICB9OwogICAgfQogIH07CgogIFEuVGFnVG9Gcm9udCA9IGZ1bmN0aW9uIChpLCBhSCwgYUksIGopIHsKICAgIHRoaXMuUm90YXRlVGFnKGksIDAsIDAsIGFILCBhSSwgaik7CiAgfTsKCiAgeS5TdGFydCA9IGZ1bmN0aW9uIChhSCwgaSwgaikgewogICAgeS5EZWxldGUoYUgpOwogICAgeS50Y1thSF0gPSBuZXcgeShhSCwgaSwgaik7CiAgfTsKCiAgZnVuY3Rpb24gYXkoaSwgaikgewogICAgeS50Y1tqXSAmJiB5LnRjW2pdW2ldKCk7CiAgfQoKICB5LkxpbmVhciA9IGZ1bmN0aW9uIChpLCBqKSB7CiAgICByZXR1cm4gaiAvIGk7CiAgfTsKCiAgeS5TbW9vdGggPSBmdW5jdGlvbiAoaSwgaikgewogICAgcmV0dXJuIDAuNSAtIHcoaiAqIE1hdGguUEkgLyBpKSAvIDI7CiAgfTsKCiAgeS5QYXVzZSA9IGZ1bmN0aW9uIChpKSB7CiAgICBheSgiUGF1c2UiLCBpKTsKICB9OwoKICB5LlJlc3VtZSA9IGZ1bmN0aW9uIChpKSB7CiAgICBheSgiUmVzdW1lIiwgaSk7CiAgfTsKCiAgeS5SZWxvYWQgPSBmdW5jdGlvbiAoaSkgewogICAgYXkoIkxvYWQiLCBpKTsKICB9OwoKICB5LlVwZGF0ZSA9IGZ1bmN0aW9uIChpKSB7CiAgICBheSgiVXBkYXRlIiwgaSk7CiAgfTsKCiAgeS5TZXRTcGVlZCA9IGZ1bmN0aW9uIChqLCBpKSB7CiAgICBpZiAoSShpKSAmJiB5LnRjW2pdICYmICFpc05hTihpWzBdKSAmJiAhaXNOYU4oaVsxXSkpIHsKICAgICAgeS50Y1tqXS5TZXRTcGVlZChpKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgcmV0dXJuIGZhbHNlOwogIH07CgogIHkuVGFnVG9Gcm9udCA9IGZ1bmN0aW9uIChqLCBpKSB7CiAgICBpZiAoIUkoaSkpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIGkubGF0ID0gaS5sbmcgPSAwOwogICAgcmV0dXJuIHkuUm90YXRlVGFnKGosIGkpOwogIH07CgogIHkuUm90YXRlVGFnID0gZnVuY3Rpb24gKGFILCBpKSB7CiAgICBpZiAoSShpKSAmJiB5LnRjW2FIXSkgewogICAgICBpZiAoaXNOYU4oaS50aW1lKSkgewogICAgICAgIGkudGltZSA9IDUwMDsKICAgICAgfQoKICAgICAgdmFyIGogPSB5LnRjW2FIXS5GaW5kVGFnKGkpOwoKICAgICAgaWYgKGopIHsKICAgICAgICB5LnRjW2FIXS5Sb3RhdGVUYWcoaiwgaS5sYXQsIGkubG5nLCBpLnRpbWUsIGkuY2FsbGJhY2ssIGkuYWN0aXZlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBmYWxzZTsKICB9OwoKICB5LkRlbGV0ZSA9IGZ1bmN0aW9uIChhSSkgewogICAgdmFyIGosIGFIOwoKICAgIGlmIChiW2FJXSkgewogICAgICBhSCA9IEMuZ2V0RWxlbWVudEJ5SWQoYUkpOwoKICAgICAgaWYgKGFIKSB7CiAgICAgICAgZm9yIChqID0gMDsgaiA8IGJbYUldLmxlbmd0aDsgKytqKSB7CiAgICAgICAgICBhKGJbYUldW2pdWzBdLCBiW2FJXVtqXVsxXSwgYUgpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGRlbGV0ZSBiW2FJXTsKICAgIGRlbGV0ZSB5LnRjW2FJXTsKICB9OwoKICB5Lk5leHRGcmFtZVJBRiA9IGZ1bmN0aW9uICgpIHsKICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShFKTsKICB9OwoKICB5Lk5leHRGcmFtZVRpbWVvdXQgPSBmdW5jdGlvbiAoaSkgewogICAgc2V0VGltZW91dChPLCBpKTsKICB9OwoKICB5LnRjID0ge307CiAgeS5vcHRpb25zID0gewogICAgejE6IDIwMDAwLAogICAgejI6IDIwMDAwLAogICAgejA6IDAuMDAwMiwKICAgIGZyZWV6ZUFjdGl2ZTogZmFsc2UsCiAgICBmcmVlemVEZWNlbDogZmFsc2UsCiAgICBhY3RpdmVDdXJzb3I6ICJwb2ludGVyIiwKICAgIHB1bHNhdGVUbzogMSwKICAgIHB1bHNhdGVUaW1lOiAzLAogICAgcmV2ZXJzZTogZmFsc2UsCiAgICBkZXB0aDogMC41LAogICAgbWF4U3BlZWQ6IDAuMDUsCiAgICBtaW5TcGVlZDogMCwKICAgIGRlY2VsOiAwLjk1LAogICAgaW50ZXJ2YWw6IDIwLAogICAgbWluQnJpZ2h0bmVzczogMC4xLAogICAgbWF4QnJpZ2h0bmVzczogMSwKICAgIG91dGxpbmVDb2xvdXI6ICIjZmZmZjk5IiwKICAgIG91dGxpbmVUaGlja25lc3M6IDIsCiAgICBvdXRsaW5lT2Zmc2V0OiA1LAogICAgb3V0bGluZU1ldGhvZDogIm91dGxpbmUiLAogICAgb3V0bGluZVJhZGl1czogMCwKICAgIHRleHRDb2xvdXI6ICIjZmY5OWZmIiwKICAgIHRleHRIZWlnaHQ6IDE1LAogICAgdGV4dEZvbnQ6ICJIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmIiwKICAgIHNoYWRvdzogIiMwMDAiLAogICAgc2hhZG93Qmx1cjogMCwKICAgIHNoYWRvd09mZnNldDogWzAsIDBdLAogICAgaW5pdGlhbDogbnVsbCwKICAgIGhpZGVUYWdzOiB0cnVlLAogICAgem9vbTogMSwKICAgIHdlaWdodDogZmFsc2UsCiAgICB3ZWlnaHRNb2RlOiAic2l6ZSIsCiAgICB3ZWlnaHRGcm9tOiBudWxsLAogICAgd2VpZ2h0U2l6ZTogMSwKICAgIHdlaWdodFNpemVNaW46IG51bGwsCiAgICB3ZWlnaHRTaXplTWF4OiBudWxsLAogICAgd2VpZ2h0R3JhZGllbnQ6IHsKICAgICAgMDogIiNmMDAiLAogICAgICAwLjMzOiAiI2ZmMCIsCiAgICAgIDAuNjY6ICIjMGYwIiwKICAgICAgMTogIiMwMGYiCiAgICB9LAogICAgdHh0T3B0OiB0cnVlLAogICAgdHh0U2NhbGU6IDIsCiAgICBmcm9udFNlbGVjdDogZmFsc2UsCiAgICB3aGVlbFpvb206IHRydWUsCiAgICB6b29tTWluOiAwLjMsCiAgICB6b29tTWF4OiAzLAogICAgem9vbVN0ZXA6IDAuMDUsCiAgICBzaGFwZTogInNwaGVyZSIsCiAgICBsb2NrOiBudWxsLAogICAgdG9vbHRpcDogbnVsbCwKICAgIHRvb2x0aXBEZWxheTogMzAwLAogICAgdG9vbHRpcENsYXNzOiAidGN0b29sdGlwIiwKICAgIHJhZGl1c1g6IDEsCiAgICByYWRpdXNZOiAxLAogICAgcmFkaXVzWjogMSwKICAgIHN0cmV0Y2hYOiAxLAogICAgc3RyZXRjaFk6IDEsCiAgICBvZmZzZXRYOiAwLAogICAgb2Zmc2V0WTogMCwKICAgIHNodWZmbGVUYWdzOiBmYWxzZSwKICAgIG5vU2VsZWN0OiBmYWxzZSwKICAgIG5vTW91c2U6IGZhbHNlLAogICAgaW1hZ2VTY2FsZTogMSwKICAgIHBhdXNlZDogZmFsc2UsCiAgICBkcmFnQ29udHJvbDogZmFsc2UsCiAgICBkcmFnVGhyZXNob2xkOiA0LAogICAgY2VudHJlRnVuYzogYUEsCiAgICBzcGxpdFdpZHRoOiAwLAogICAgYW5pbVRpbWluZzogIlNtb290aCIsCiAgICBjbGlja1RvRnJvbnQ6IGZhbHNlLAogICAgZmFkZUluOiAwLAogICAgcGFkZGluZzogMCwKICAgIGJnQ29sb3VyOiBudWxsLAogICAgYmdSYWRpdXM6IDAsCiAgICBiZ091dGxpbmU6IG51bGwsCiAgICBiZ091dGxpbmVUaGlja25lc3M6IDAsCiAgICBvdXRsaW5lSW5jcmVhc2U6IDQsCiAgICB0ZXh0QWxpZ246ICJjZW50cmUiLAogICAgdGV4dFZBbGlnbjogIm1pZGRsZSIsCiAgICBpbWFnZU1vZGU6IG51bGwsCiAgICBpbWFnZVBvc2l0aW9uOiBudWxsLAogICAgaW1hZ2VQYWRkaW5nOiAyLAogICAgaW1hZ2VBbGlnbjogImNlbnRyZSIsCiAgICBpbWFnZVZBbGlnbjogIm1pZGRsZSIsCiAgICBub1RhZ3NNZXNzYWdlOiB0cnVlLAogICAgY2VudHJlSW1hZ2U6IG51bGwsCiAgICBwaW5jaFpvb206IGZhbHNlLAogICAgcmVwZWF0VGFnczogMCwKICAgIG1pblRhZ3M6IDAsCiAgICBpbWFnZVJhZGl1czogMCwKICAgIHNjcm9sbFBhdXNlOiBmYWxzZSwKICAgIG91dGxpbmVEYXNoOiAwLAogICAgb3V0bGluZURhc2hTcGFjZTogMCwKICAgIG91dGxpbmVEYXNoU3BlZWQ6IDEKICB9OwoKICBmb3IgKE0gaW4geS5vcHRpb25zKSB7CiAgICB5W01dID0geS5vcHRpb25zW01dOwogIH0KCiAgd2luZG93LlRhZ0NhbnZhcyA9IHk7CiAgYWQoImxvYWQiLCBmdW5jdGlvbiAoKSB7CiAgICB5LmxvYWRlZCA9IDE7CiAgfSwgd2luZG93KTsKfSkoKTs="},{"version":3,"sources":["/Users/zhangyangzuo/Downloads/lucky-draw-master/src/assets/lib/tagcanvas.js"],"names":["M","K","L","Math","abs","ah","sin","w","cos","s","max","aD","min","ap","ceil","F","sqrt","at","pow","h","l","m","a","A","b","B","c","C","d","D","e","E","f","x","Q","aF","H","aG","aa","document","p","toString","toUpperCase","ai","i","I","av","j","aH","isNaN","aA","G","Date","valueOf","aK","aI","length","aJ","push","sort","an","random","ae","y","z","prototype","dot","cross","angle","PI","acos","unit","aj","R","Identity","Rotation","mul","aL","xform","q","aQ","aN","aP","aO","aM","aR","parseFloat","W","aT","aS","aU","N","am","au","n","ao","Image","onload","width","height","centreFunc","setTransform","globalAlpha","drawImage","src","centreImage","U","toPrecision","substr","replace","lastIndexOf","indexOf","substring","P","window","G_vmlCanvasManager","createElement","al","getContext","strokeStyle","shadowColor","shadowBlur","strokeRect","getImageData","data","ak","createLinearGradient","addColorStop","fillStyle","fillRect","k","weightGradient","gCanvas","X","aV","font","textBaseline","shadowOffsetX","shadowOffsetY","fillText","parseInt","ar","beginPath","moveTo","arcTo","closePath","g","strings","maxWidth","stringWidths","align","valign","scale","SetImage","image","iwidth","iheight","ipos","ipad","iscale","ialign","ivalign","Align","Create","a0","a1","aZ","aY","aX","a6","a3","a2","aW","a5","a4","lineWidth","v","ax","aC","globalCompositeOperation","aq","arc","fill","Z","t","o","ad","addEventListener","attachEvent","removeEventListener","detachEvent","aw","imageScale","complete","iw","ih","txtOpt","zoomMax","txtScale","naturalWidth","naturalHeight","fimage","imageRadius","HasText","shadow","shadowOffset","bgColour","bgOutlineThickness","Y","bgOutline","textColour","outlineMethod","outline","colour","padding","bgRadius","oimage","outlineIncrease","Init","defaultView","charAt","getComputedStyle","getPropertyValue","currentStyle","u","getAttribute","target","id","srcElement","parentNode","S","offsetX","offsetY","ab","changedTouches","pageX","pageY","fromElement","tc","mx","my","UnFreeze","EndDrag","af","tttimer","clearTimeout","canvas","Drag","drawn","button","BeginDrag","aE","touchState","Clicked","T","touches","targetTouches","pinchZoom","BeginPinch","EndPinch","r","Draw","az","Pinch","ag","cancelBubble","returnValue","preventDefault","Wheel","wheelDelta","detail","ac","scrollTimer","Pause","setTimeout","Resume","scrollPause","O","NextFrame","interval","getElementById","getBoundingClientRect","documentElement","body","pageXOffset","scrollLeft","pageYOffset","scrollTop","clientLeft","clientTop","left","top","V","radius","z1","z2","aB","br","line","text","original","innerText","textContent","Empty","Lines","childNodes","nodeName","join","nodeType","nodeValue","SplitWidth","split","measureText","J","ts","tag","sc","pulse","pulsate","pulsateTo","outlineColour","adash","outlineDash","agap","outlineDashSpace","aspeed","outlineDashSpeed","DrawPulsate","DrawSimple","outlineRadius","SetMethod","block","classic","size","none","drawFunc","Update","outlineOffset","Ants","setLineDash","DrawOutline","DrawSize","oscale","alpha","DrawColour","DrawColourText","DrawColourImage","clearRect","save","rect","clip","restore","DrawBlock","outlineThickness","pulsateTime","Smooth","Active","PreDraw","PostDraw","LastDraw","text_original","line_widths","title","position","textFont","weighted","weight","textHeight","Measure","ctxt","SetShadowColour","shadowAlpha","SetShadowColourAlpha","SetShadowColourFixed","SetDraw","EqualTo","getElementsByTagName","href","ie","DrawImageIE","DrawImage","DrawText","noSelect","CheckActive","MeasureText","textAlign","textVAlign","imagePosition","imagePadding","imageAlign","imageVAlign","SetFont","SetWeight","weightMode","Weight","min_weight","max_weight","weightSizeMin","weightSizeMax","weightSize","Calc","minBrightness","maxBrightness","max_radius","xformed","stretchX","stretchY","UpdateActive","self","frames","location","open","createEvent","initMouseEvent","dispatchEvent","fireEvent","initElement","navigator","appVersion","insertBefore","removeChild","options","depth","zoom","lx","lock","ly","frozen","dx","dy","fixedAnim","fixedAlpha","source","repeatTags","minTags","GetTags","transform","startTime","time","Animate","dragControl","AnimateDrag","AnimatePosition","animTiming","Load","hideTags","loaded","HideTags","yaw","initial","maxSpeed","pitch","tooltip","ctitle","Tooltip","TooltipNative","TooltipDiv","ttdiv","className","tooltipClass","style","zIndex","display","appendChild","TooltipNone","noMouse","wheelZoom","started","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","NextFrameRAF","NextFrameTimeout","SourceElements","querySelectorAll","Message","CreateTag","imageMode","splitWidth","UpdateTag","weightFrom","sphere","vcylinder","hcylinder","vring","hring","shuffleTags","radiusX","radiusY","radiusZ","shapeArgs","shape","shift","concat","apply","listLength","noTagsMessage","taglist","splice","pop","SetShadow","paused","frontSelect","AnimateFixed","active","alert","freezeActive","Freeze","fixedCallback","fixedCallbackTag","cursor","activeCursor","SetTTDiv","innerHTML","tooltipDelay","Transform","fadeIn","t0","cb","axis","reverse","freezeDecel","Decel","preFreeze","minSpeed","z0","decel","Zoom","clickToFront","TagToFront","zoomStep","zoomMin","down","dragThreshold","dragging","pinched","SetSpeed","FindTag","index","RotateTag","Start","Delete","ay","Linear","Reload","lat","lng","callback","TagCanvas"],"mappings":"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","sourcesContent":["/* eslint-disable */\n/**\n * Copyright (C) 2010-2015 Graham Breach\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Lesser General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Lesser General Public License for more details.\n * \n * You should have received a copy of the GNU Lesser General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * TagCanvas 2.9\n * For more information, please contact <graham@goat1000.com>\n */\n(function() {\n\tvar M, K, L = Math.abs, ah = Math.sin, w = Math.cos, s = Math.max, aD = Math.min, ap = Math.ceil, F = Math.sqrt, at = Math.pow, h = {}, l = {}, m = {\n\t\t\t0: \"0,\",\n\t\t\t1: \"17,\",\n\t\t\t2: \"34,\",\n\t\t\t3: \"51,\",\n\t\t\t4: \"68,\",\n\t\t\t5: \"85,\",\n\t\t\t6: \"102,\",\n\t\t\t7: \"119,\",\n\t\t\t8: \"136,\",\n\t\t\t9: \"153,\",\n\t\t\ta: \"170,\",\n\t\t\tA: \"170,\",\n\t\t\tb: \"187,\",\n\t\t\tB: \"187,\",\n\t\t\tc: \"204,\",\n\t\t\tC: \"204,\",\n\t\t\td: \"221,\",\n\t\t\tD: \"221,\",\n\t\t\te: \"238,\",\n\t\t\tE: \"238,\",\n\t\t\tf: \"255,\",\n\t\t\tF: \"255,\"\n\t}, x, c, Q, aF, H, aG, aa, C = document, p, b = {};\n\tfor (M = 0; M < 256; ++M) {\n\t\t\tK = M.toString(16);\n\t\t\tif (M < 16) {\n\t\t\t\t\tK = \"0\" + K\n\t\t\t}\n\t\t\tl[K] = l[K.toUpperCase()] = M.toString() + \",\"\n\t}\n\tfunction ai(i) {\n\t\t\treturn typeof i != \"undefined\"\n\t}\n\tfunction I(i) {\n\t\t\treturn typeof i == \"object\" && i != null\n\t}\n\tfunction av(i, j, aH) {\n\t\t\treturn isNaN(i) ? aH : aD(aH, s(j, i))\n\t}\n\tfunction aA() {\n\t\t\treturn false\n\t}\n\tfunction G() {\n\t\t\treturn new Date().valueOf()\n\t}\n\tfunction A(aH, aK) {\n\t\t\tvar j = [], aI = aH.length, aJ;\n\t\t\tfor (aJ = 0; aJ < aI; ++aJ) {\n\t\t\t\t\tj.push(aH[aJ])\n\t\t\t}\n\t\t\tj.sort(aK);\n\t\t\treturn j\n\t}\n\tfunction an(j) {\n\t\t\tvar aI = j.length - 1, aH, aJ;\n\t\t\twhile (aI) {\n\t\t\t\t\taJ = ~~(Math.random() * aI);\n\t\t\t\t\taH = j[aI];\n\t\t\t\t\tj[aI] = j[aJ];\n\t\t\t\t\tj[aJ] = aH;\n\t\t\t\t\t--aI\n\t\t\t}\n\t}\n\tfunction ae(i, aH, j) {\n\t\t\tthis.x = i;\n\t\t\tthis.y = aH;\n\t\t\tthis.z = j\n\t}\n\tH = ae.prototype;\n\tH.length = function() {\n\t\t\treturn F(this.x * this.x + this.y * this.y + this.z * this.z)\n\t}\n\t;\n\tH.dot = function(i) {\n\t\t\treturn this.x * i.x + this.y * i.y + this.z * i.z\n\t}\n\t;\n\tH.cross = function(j) {\n\t\t\tvar i = this.y * j.z - this.z * j.y\n\t\t\t\t, aI = this.z * j.x - this.x * j.z\n\t\t\t\t, aH = this.x * j.y - this.y * j.x;\n\t\t\treturn new ae(i,aI,aH)\n\t}\n\t;\n\tH.angle = function(j) {\n\t\t\tvar i = this.dot(j), aH;\n\t\t\tif (i == 0) {\n\t\t\t\t\treturn Math.PI / 2\n\t\t\t}\n\t\t\taH = i / (this.length() * j.length());\n\t\t\tif (aH >= 1) {\n\t\t\t\t\treturn 0\n\t\t\t}\n\t\t\tif (aH <= -1) {\n\t\t\t\t\treturn Math.PI\n\t\t\t}\n\t\t\treturn Math.acos(aH)\n\t}\n\t;\n\tH.unit = function() {\n\t\t\tvar i = this.length();\n\t\t\treturn new ae(this.x / i,this.y / i,this.z / i)\n\t}\n\t;\n\tfunction aj(aH, j) {\n\t\t\tj = j * Math.PI / 180;\n\t\t\taH = aH * Math.PI / 180;\n\t\t\tvar i = ah(aH) * w(j)\n\t\t\t\t, aJ = -ah(j)\n\t\t\t\t, aI = -w(aH) * w(j);\n\t\t\treturn new ae(i,aJ,aI)\n\t}\n\tfunction R(i) {\n\t\t\tthis[1] = {\n\t\t\t\t\t1: i[0],\n\t\t\t\t\t2: i[1],\n\t\t\t\t\t3: i[2]\n\t\t\t};\n\t\t\tthis[2] = {\n\t\t\t\t\t1: i[3],\n\t\t\t\t\t2: i[4],\n\t\t\t\t\t3: i[5]\n\t\t\t};\n\t\t\tthis[3] = {\n\t\t\t\t\t1: i[6],\n\t\t\t\t\t2: i[7],\n\t\t\t\t\t3: i[8]\n\t\t\t}\n\t}\n\taF = R.prototype;\n\tR.Identity = function() {\n\t\t\treturn new R([1, 0, 0, 0, 1, 0, 0, 0, 1])\n\t}\n\t;\n\tR.Rotation = function(aI, i) {\n\t\t\tvar j = ah(aI)\n\t\t\t\t, aH = w(aI)\n\t\t\t\t, aJ = 1 - aH;\n\t\t\treturn new R([aH + at(i.x, 2) * aJ, i.x * i.y * aJ - i.z * j, i.x * i.z * aJ + i.y * j, i.y * i.x * aJ + i.z * j, aH + at(i.y, 2) * aJ, i.y * i.z * aJ - i.x * j, i.z * i.x * aJ - i.y * j, i.z * i.y * aJ + i.x * j, aH + at(i.z, 2) * aJ])\n\t}\n\t;\n\taF.mul = function(aH) {\n\t\t\tvar aI = [], aL, aK, aJ = (aH.xform ? 1 : 0);\n\t\t\tfor (aL = 1; aL <= 3; ++aL) {\n\t\t\t\t\tfor (aK = 1; aK <= 3; ++aK) {\n\t\t\t\t\t\t\tif (aJ) {\n\t\t\t\t\t\t\t\t\taI.push(this[aL][1] * aH[1][aK] + this[aL][2] * aH[2][aK] + this[aL][3] * aH[3][aK])\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\taI.push(this[aL][aK] * aH)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t}\n\t\t\treturn new R(aI)\n\t}\n\t;\n\taF.xform = function(aH) {\n\t\t\tvar j = {}\n\t\t\t\t, i = aH.x\n\t\t\t\t, aJ = aH.y\n\t\t\t\t, aI = aH.z;\n\t\t\tj.x = i * this[1][1] + aJ * this[2][1] + aI * this[3][1];\n\t\t\tj.y = i * this[1][2] + aJ * this[2][2] + aI * this[3][2];\n\t\t\tj.z = i * this[1][3] + aJ * this[2][3] + aI * this[3][3];\n\t\t\treturn j\n\t}\n\t;\n\tfunction q(aI, aK, aQ, aN, aP) {\n\t\t\tvar aL, aO, j, aM, aR = [], aH = 2 / aI, aJ;\n\t\t\taJ = Math.PI * (3 - F(5) + (parseFloat(aP) ? parseFloat(aP) : 0));\n\t\t\tfor (aL = 0; aL < aI; ++aL) {\n\t\t\t\t\taO = aL * aH - 1 + (aH / 2);\n\t\t\t\t\tj = F(1 - aO * aO);\n\t\t\t\t\taM = aL * aJ;\n\t\t\t\t\taR.push([w(aM) * j * aK, aO * aQ, ah(aM) * j * aN])\n\t\t\t}\n\t\t\treturn aR\n\t}\n\tfunction W(aJ, aH, aM, aT, aQ, aS) {\n\t\t\tvar aR, aU = [], aI = 2 / aJ, aK, aP, aO, aN, aL;\n\t\t\taK = Math.PI * (3 - F(5) + (parseFloat(aS) ? parseFloat(aS) : 0));\n\t\t\tfor (aP = 0; aP < aJ; ++aP) {\n\t\t\t\t\taO = aP * aI - 1 + (aI / 2);\n\t\t\t\t\taR = aP * aK;\n\t\t\t\t\taN = w(aR);\n\t\t\t\t\taL = ah(aR);\n\t\t\t\t\taU.push(aH ? [aO * aM, aN * aT, aL * aQ] : [aN * aM, aO * aT, aL * aQ])\n\t\t\t}\n\t\t\treturn aU\n\t}\n\tfunction N(aH, aI, aL, aR, aP, aN) {\n\t\t\tvar aQ, aS = [], aJ = Math.PI * 2 / aI, aO, aM, aK;\n\t\t\tfor (aO = 0; aO < aI; ++aO) {\n\t\t\t\t\taQ = aO * aJ;\n\t\t\t\t\taM = w(aQ);\n\t\t\t\t\taK = ah(aQ);\n\t\t\t\t\taS.push(aH ? [aN * aL, aM * aR, aK * aP] : [aM * aL, aN * aR, aK * aP])\n\t\t\t}\n\t\t\treturn aS\n\t}\n\tfunction am(aJ, j, aH, aI, i) {\n\t\t\treturn W(aJ, 0, j, aH, aI, i)\n\t}\n\tfunction au(aJ, j, aH, aI, i) {\n\t\t\treturn W(aJ, 1, j, aH, aI, i)\n\t}\n\tfunction d(aJ, i, j, aH, aI) {\n\t\t\taI = isNaN(aI) ? 0 : aI * 1;\n\t\t\treturn N(0, aJ, i, j, aH, aI)\n\t}\n\tfunction n(aJ, i, j, aH, aI) {\n\t\t\taI = isNaN(aI) ? 0 : aI * 1;\n\t\t\treturn N(1, aJ, i, j, aH, aI)\n\t}\n\tfunction ao(aH) {\n\t\t\tvar j = new Image;\n\t\t\tj.onload = function() {\n\t\t\t\t\tvar aI = j.width / 2\n\t\t\t\t\t\t, i = j.height / 2;\n\t\t\t\t\taH.centreFunc = function(aN, aK, aL, aJ, aM) {\n\t\t\t\t\t\t\taN.setTransform(1, 0, 0, 1, 0, 0);\n\t\t\t\t\t\t\taN.globalAlpha = 1;\n\t\t\t\t\t\t\taN.drawImage(j, aJ - aI, aM - i)\n\t\t\t\t\t}\n\t\t\t}\n\t\t\t;\n\t\t\tj.src = aH.centreImage\n\t}\n\tfunction U(aK, i) {\n\t\t\tvar aJ = aK, aI, aH, j = (i * 1).toPrecision(3) + \")\";\n\t\t\tif (aK[0] === \"#\") {\n\t\t\t\t\tif (!h[aK]) {\n\t\t\t\t\t\t\tif (aK.length === 4) {\n\t\t\t\t\t\t\t\t\th[aK] = \"rgba(\" + m[aK[1]] + m[aK[2]] + m[aK[3]]\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\th[aK] = \"rgba(\" + l[aK.substr(1, 2)] + l[aK.substr(3, 2)] + l[aK.substr(5, 2)]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\taJ = h[aK] + j\n\t\t\t} else {\n\t\t\t\t\tif (aK.substr(0, 4) === \"rgb(\" || aK.substr(0, 4) === \"hsl(\") {\n\t\t\t\t\t\t\taJ = (aK.replace(\"(\", \"a(\").replace(\")\", \",\" + j))\n\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (aK.substr(0, 5) === \"rgba(\" || aK.substr(0, 5) === \"hsla(\") {\n\t\t\t\t\t\t\t\t\taI = aK.lastIndexOf(\",\") + 1,\n\t\t\t\t\t\t\t\t\taH = aK.indexOf(\")\");\n\t\t\t\t\t\t\t\t\ti *= parseFloat(aK.substring(aI, aH));\n\t\t\t\t\t\t\t\t\taJ = aK.substr(0, aI) + i.toPrecision(3) + \")\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t}\n\t\t\treturn aJ\n\t}\n\tfunction P(i, j) {\n\t\t\tif (window.G_vmlCanvasManager) {\n\t\t\t\t\treturn null\n\t\t\t}\n\t\t\tvar aH = C.createElement(\"canvas\");\n\t\t\taH.width = i;\n\t\t\taH.height = j;\n\t\t\treturn aH\n\t}\n\tfunction al() {\n\t\t\tvar j = P(3, 3), aI, aH;\n\t\t\tif (!j) {\n\t\t\t\t\treturn false\n\t\t\t}\n\t\t\taI = j.getContext(\"2d\");\n\t\t\taI.strokeStyle = \"#000\";\n\t\t\taI.shadowColor = \"#fff\";\n\t\t\taI.shadowBlur = 3;\n\t\t\taI.globalAlpha = 0;\n\t\t\taI.strokeRect(2, 2, 2, 2);\n\t\t\taI.globalAlpha = 1;\n\t\t\taH = aI.getImageData(2, 2, 1, 1);\n\t\t\tj = null;\n\t\t\treturn (aH.data[0] > 0)\n\t}\n\tfunction ak(aL, j, aK, aJ) {\n\t\t\tvar aI = aL.createLinearGradient(0, 0, j, 0), aH;\n\t\t\tfor (aH in aJ) {\n\t\t\t\t\taI.addColorStop(1 - aH, aJ[aH])\n\t\t\t}\n\t\t\taL.fillStyle = aI;\n\t\t\taL.fillRect(0, aK, j, 1)\n\t}\n\tfunction k(aJ, aH, j) {\n\t\t\tvar aI = 1024, aN = 1, aM = aJ.weightGradient, aL, aP, aK, aO;\n\t\t\tif (aJ.gCanvas) {\n\t\t\t\t\taP = aJ.gCanvas.getContext(\"2d\");\n\t\t\t\t\taN = aJ.gCanvas.height\n\t\t\t} else {\n\t\t\t\t\tif (I(aM[0])) {\n\t\t\t\t\t\t\taN = aM.length\n\t\t\t\t\t} else {\n\t\t\t\t\t\t\taM = [aM]\n\t\t\t\t\t}\n\t\t\t\t\taJ.gCanvas = aL = P(aI, aN);\n\t\t\t\t\tif (!aL) {\n\t\t\t\t\t\t\treturn null\n\t\t\t\t\t}\n\t\t\t\t\taP = aL.getContext(\"2d\");\n\t\t\t\t\tfor (aK = 0; aK < aN; ++aK) {\n\t\t\t\t\t\t\tak(aP, aI, aK, aM[aK])\n\t\t\t\t\t}\n\t\t\t}\n\t\t\tj = s(aD(j || 0, aN - 1), 0);\n\t\t\taO = aP.getImageData(~~((aI - 1) * aH), j, 1, 1).data;\n\t\t\treturn \"rgba(\" + aO[0] + \",\" + aO[1] + \",\" + aO[2] + \",\" + (aO[3] / 255) + \")\"\n\t}\n\tfunction X(aQ, aJ, j, aU, aT, aR, aP, aL, aI, aS, aK, aO) {\n\t\t\tvar aN = aT + (aL || 0) + (aI.length && aI[0] < 0 ? L(aI[0]) : 0), aH = aR + (aL || 0) + (aI.length && aI[1] < 0 ? L(aI[1]) : 0), aM, aV;\n\t\t\taQ.font = aJ;\n\t\t\taQ.textBaseline = \"top\";\n\t\t\taQ.fillStyle = j;\n\t\t\taP && (aQ.shadowColor = aP);\n\t\t\taL && (aQ.shadowBlur = aL);\n\t\t\taI.length && (aQ.shadowOffsetX = aI[0],\n\t\t\taQ.shadowOffsetY = aI[1]);\n\t\t\tfor (aM = 0; aM < aU.length; ++aM) {\n\t\t\t\t\taV = 0;\n\t\t\t\t\tif (aK) {\n\t\t\t\t\t\t\tif (\"right\" == aO) {\n\t\t\t\t\t\t\t\t\taV = aS - aK[aM]\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif (\"centre\" == aO) {\n\t\t\t\t\t\t\t\t\t\t\taV = (aS - aK[aM]) / 2\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\taQ.fillText(aU[aM], aN + aV, aH);\n\t\t\t\t\taH += parseInt(aJ)\n\t\t\t}\n\t}\n\tfunction ar(aL, i, aK, j, aI, aJ, aH) {\n\t\t\tif (aJ) {\n\t\t\t\t\taL.beginPath();\n\t\t\t\t\taL.moveTo(i, aK + aI - aJ);\n\t\t\t\t\taL.arcTo(i, aK, i + aJ, aK, aJ);\n\t\t\t\t\taL.arcTo(i + j, aK, i + j, aK + aJ, aJ);\n\t\t\t\t\taL.arcTo(i + j, aK + aI, i + j - aJ, aK + aI, aJ);\n\t\t\t\t\taL.arcTo(i, aK + aI, i, aK + aI - aJ, aJ);\n\t\t\t\t\taL.closePath();\n\t\t\t\t\taL[aH ? \"stroke\" : \"fill\"]()\n\t\t\t} else {\n\t\t\t\t\taL[aH ? \"strokeRect\" : \"fillRect\"](i, aK, j, aI)\n\t\t\t}\n\t}\n\tfunction g(aN, i, aL, aI, aM, aH, aJ, aK, j) {\n\t\t\tthis.strings = aN;\n\t\t\tthis.font = i;\n\t\t\tthis.width = aL;\n\t\t\tthis.height = aI;\n\t\t\tthis.maxWidth = aM;\n\t\t\tthis.stringWidths = aH;\n\t\t\tthis.align = aJ;\n\t\t\tthis.valign = aK;\n\t\t\tthis.scale = j\n\t}\n\taa = g.prototype;\n\taa.SetImage = function(aK, j, aI, i, aJ, aM, aH, aL) {\n\t\t\tthis.image = aK;\n\t\t\tthis.iwidth = j * this.scale;\n\t\t\tthis.iheight = aI * this.scale;\n\t\t\tthis.ipos = i;\n\t\t\tthis.ipad = aJ * this.scale;\n\t\t\tthis.iscale = aL;\n\t\t\tthis.ialign = aM;\n\t\t\tthis.ivalign = aH\n\t}\n\t;\n\taa.Align = function(j, aH, i) {\n\t\t\tvar aI = 0;\n\t\t\tif (i == \"right\" || i == \"bottom\") {\n\t\t\t\t\taI = aH - j\n\t\t\t} else {\n\t\t\t\t\tif (i != \"left\" && i != \"top\") {\n\t\t\t\t\t\t\taI = (aH - j) / 2\n\t\t\t\t\t}\n\t\t\t}\n\t\t\treturn aI\n\t}\n\t;\n\taa.Create = function(aU, a0, aT, a1, aZ, aY, i, aX, aP) {\n\t\t\tvar aN, aL, aV, a6, a3, a2, aJ, aI, aH, j, aM, aK, aO, aW, aS, a5 = L(i[0]), a4 = L(i[1]), aQ, aR;\n\t\t\taX = s(aX, a5 + aY, a4 + aY);\n\t\t\ta3 = 2 * (aX + a1);\n\t\t\taJ = 2 * (aX + a1);\n\t\t\taL = this.width + a3;\n\t\t\taV = this.height + aJ;\n\t\t\taH = j = aX + a1;\n\t\t\tif (this.image) {\n\t\t\t\t\taM = aK = aX + a1;\n\t\t\t\t\taO = this.iwidth;\n\t\t\t\t\taW = this.iheight;\n\t\t\t\t\tif (this.ipos == \"top\" || this.ipos == \"bottom\") {\n\t\t\t\t\t\t\tif (aO < this.width) {\n\t\t\t\t\t\t\t\t\taM += this.Align(aO, this.width, this.ialign)\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\taH += this.Align(this.width, aO, this.align)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (this.ipos == \"top\") {\n\t\t\t\t\t\t\t\t\tj += aW + this.ipad\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\taK += this.height + this.ipad\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\taL = s(aL, aO + a3);\n\t\t\t\t\t\t\taV += aW + this.ipad\n\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (aW < this.height) {\n\t\t\t\t\t\t\t\t\taK += this.Align(aW, this.height, this.ivalign)\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tj += this.Align(this.height, aW, this.valign)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (this.ipos == \"right\") {\n\t\t\t\t\t\t\t\t\taM += this.width + this.ipad\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\taH += aO + this.ipad\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\taL += aO + this.ipad;\n\t\t\t\t\t\t\taV = s(aV, aW + aJ)\n\t\t\t\t\t}\n\t\t\t}\n\t\t\taN = P(aL, aV);\n\t\t\tif (!aN) {\n\t\t\t\t\treturn null\n\t\t\t}\n\t\t\ta3 = aJ = a1 / 2;\n\t\t\ta2 = aL - a1;\n\t\t\taI = aV - a1;\n\t\t\taS = aD(aP, a2 / 2, aI / 2);\n\t\t\ta6 = aN.getContext(\"2d\");\n\t\t\tif (a0) {\n\t\t\t\t\ta6.fillStyle = a0;\n\t\t\t\t\tar(a6, a3, aJ, a2, aI, aS)\n\t\t\t}\n\t\t\tif (a1) {\n\t\t\t\t\ta6.strokeStyle = aT;\n\t\t\t\t\ta6.lineWidth = a1;\n\t\t\t\t\tar(a6, a3, aJ, a2, aI, aS, true)\n\t\t\t}\n\t\t\tif (aY || a5 || a4) {\n\t\t\t\t\taQ = P(aL, aV);\n\t\t\t\t\tif (aQ) {\n\t\t\t\t\t\t\taR = a6;\n\t\t\t\t\t\t\ta6 = aQ.getContext(\"2d\")\n\t\t\t\t\t}\n\t\t\t}\n\t\t\tX(a6, this.font, aU, this.strings, aH, j, 0, 0, [], this.maxWidth, this.stringWidths, this.align);\n\t\t\tif (this.image) {\n\t\t\t\t\ta6.drawImage(this.image, aM, aK, aO, aW)\n\t\t\t}\n\t\t\tif (aR) {\n\t\t\t\t\ta6 = aR;\n\t\t\t\t\taZ && (a6.shadowColor = aZ);\n\t\t\t\t\taY && (a6.shadowBlur = aY);\n\t\t\t\t\ta6.shadowOffsetX = i[0];\n\t\t\t\t\ta6.shadowOffsetY = i[1];\n\t\t\t\t\ta6.drawImage(aQ, 0, 0)\n\t\t\t}\n\t\t\treturn aN\n\t}\n\t;\n\tfunction v(aI, j, aJ) {\n\t\t\tvar aH = P(j, aJ), aK;\n\t\t\tif (!aH) {\n\t\t\t\t\treturn null\n\t\t\t}\n\t\t\taK = aH.getContext(\"2d\");\n\t\t\taK.drawImage(aI, (j - aI.width) / 2, (aJ - aI.height) / 2);\n\t\t\treturn aH\n\t}\n\tfunction ax(aI, j, aJ) {\n\t\t\tvar aH = P(j, aJ), aK;\n\t\t\tif (!aH) {\n\t\t\t\t\treturn null\n\t\t\t}\n\t\t\taK = aH.getContext(\"2d\");\n\t\t\taK.drawImage(aI, 0, 0, j, aJ);\n\t\t\treturn aH\n\t}\n\tfunction aC(aU, aP, aV, aZ, aQ, aO, aM, aS, aK, aL) {\n\t\t\tvar aI = aP + ((2 * aS) + aO) * aZ, aR = aV + ((2 * aS) + aO) * aZ, aJ = P(aI, aR), aY, aX, aH, aW, j, a0, aT, aN;\n\t\t\tif (!aJ) {\n\t\t\t\t\treturn null\n\t\t\t}\n\t\t\taO *= aZ;\n\t\t\taK *= aZ;\n\t\t\taX = aH = aO / 2;\n\t\t\taW = aI - aO;\n\t\t\tj = aR - aO;\n\t\t\taS = (aS * aZ) + aX;\n\t\t\taY = aJ.getContext(\"2d\");\n\t\t\taN = aD(aK, aW / 2, j / 2);\n\t\t\tif (aQ) {\n\t\t\t\t\taY.fillStyle = aQ;\n\t\t\t\t\tar(aY, aX, aH, aW, j, aN)\n\t\t\t}\n\t\t\tif (aO) {\n\t\t\t\t\taY.strokeStyle = aM;\n\t\t\t\t\taY.lineWidth = aO;\n\t\t\t\t\tar(aY, aX, aH, aW, j, aN, true)\n\t\t\t}\n\t\t\tif (aL) {\n\t\t\t\t\ta0 = P(aI, aR);\n\t\t\t\t\taT = a0.getContext(\"2d\");\n\t\t\t\t\taT.drawImage(aU, aS, aS, aP, aV);\n\t\t\t\t\taT.globalCompositeOperation = \"source-in\";\n\t\t\t\t\taT.fillStyle = aM;\n\t\t\t\t\taT.fillRect(0, 0, aI, aR);\n\t\t\t\t\taT.globalCompositeOperation = \"destination-over\";\n\t\t\t\t\taT.drawImage(aJ, 0, 0);\n\t\t\t\t\taT.globalCompositeOperation = \"source-over\";\n\t\t\t\t\taY.drawImage(a0, 0, 0)\n\t\t\t} else {\n\t\t\t\t\taY.drawImage(aU, aS, aS, aU.width, aU.height)\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t\timage: aJ,\n\t\t\t\t\twidth: aI / aZ,\n\t\t\t\t\theight: aR / aZ\n\t\t\t}\n\t}\n\tfunction aq(aK, j, aJ, aN, aO) {\n\t\t\tvar aL, aM, aH = parseFloat(j), aI = s(aJ, aN);\n\t\t\taL = P(aJ, aN);\n\t\t\tif (!aL) {\n\t\t\t\t\treturn null\n\t\t\t}\n\t\t\tif (j.indexOf(\"%\") > 0) {\n\t\t\t\t\taH = aI * aH / 100\n\t\t\t} else {\n\t\t\t\t\taH = aH * aO\n\t\t\t}\n\t\t\taM = aL.getContext(\"2d\");\n\t\t\taM.globalCompositeOperation = \"source-over\";\n\t\t\taM.fillStyle = \"#fff\";\n\t\t\tif (aH >= aI / 2) {\n\t\t\t\t\taH = aD(aJ, aN) / 2;\n\t\t\t\t\taM.beginPath();\n\t\t\t\t\taM.moveTo(aJ / 2, aN / 2);\n\t\t\t\t\taM.arc(aJ / 2, aN / 2, aH, 0, 2 * Math.PI, false);\n\t\t\t\t\taM.fill();\n\t\t\t\t\taM.closePath()\n\t\t\t} else {\n\t\t\t\t\taH = aD(aJ / 2, aN / 2, aH);\n\t\t\t\t\tar(aM, 0, 0, aJ, aN, aH, true);\n\t\t\t\t\taM.fill()\n\t\t\t}\n\t\t\taM.globalCompositeOperation = \"source-in\";\n\t\t\taM.drawImage(aK, 0, 0, aJ, aN);\n\t\t\treturn aL\n\t}\n\tfunction Z(aN, aT, aP, aJ, aR, aS, aI) {\n\t\t\tvar aU = L(aI[0]), aO = L(aI[1]), aK = aT + (aU > aS ? aU + aS : aS * 2) * aJ, j = aP + (aO > aS ? aO + aS : aS * 2) * aJ, aM = aJ * ((aS || 0) + (aI[0] < 0 ? aU : 0)), aH = aJ * ((aS || 0) + (aI[1] < 0 ? aO : 0)), aL, aQ;\n\t\t\taL = P(aK, j);\n\t\t\tif (!aL) {\n\t\t\t\t\treturn null\n\t\t\t}\n\t\t\taQ = aL.getContext(\"2d\");\n\t\t\taR && (aQ.shadowColor = aR);\n\t\t\taS && (aQ.shadowBlur = aS * aJ);\n\t\t\taI && (aQ.shadowOffsetX = aI[0] * aJ,\n\t\t\taQ.shadowOffsetY = aI[1] * aJ);\n\t\t\taQ.drawImage(aN, aM, aH, aT, aP);\n\t\t\treturn {\n\t\t\t\t\timage: aL,\n\t\t\t\t\twidth: aK / aJ,\n\t\t\t\t\theight: j / aJ\n\t\t\t}\n\t}\n\tfunction t(aT, aL, aR) {\n\t\t\tvar aS = parseInt(aT.toString().length * aR), aK = parseInt(aR * 2 * aT.length), aI = P(aS, aK), aO, j, aJ, aN, aQ, aP, aH, aM;\n\t\t\tif (!aI) {\n\t\t\t\t\treturn null\n\t\t\t}\n\t\t\taO = aI.getContext(\"2d\");\n\t\t\taO.fillStyle = \"#000\";\n\t\t\taO.fillRect(0, 0, aS, aK);\n\t\t\tX(aO, aR + \"px \" + aL, \"#fff\", aT, 0, 0, 0, 0, [], \"centre\");\n\t\t\tj = aO.getImageData(0, 0, aS, aK);\n\t\t\taJ = j.width;\n\t\t\taN = j.height;\n\t\t\taM = {\n\t\t\t\t\tmin: {\n\t\t\t\t\t\t\tx: aJ,\n\t\t\t\t\t\t\ty: aN\n\t\t\t\t\t},\n\t\t\t\t\tmax: {\n\t\t\t\t\t\t\tx: -1,\n\t\t\t\t\t\t\ty: -1\n\t\t\t\t\t}\n\t\t\t};\n\t\t\tfor (aP = 0; aP < aN; ++aP) {\n\t\t\t\t\tfor (aQ = 0; aQ < aJ; ++aQ) {\n\t\t\t\t\t\t\taH = (aP * aJ + aQ) * 4;\n\t\t\t\t\t\t\tif (j.data[aH + 1] > 0) {\n\t\t\t\t\t\t\t\t\tif (aQ < aM.min.x) {\n\t\t\t\t\t\t\t\t\t\t\taM.min.x = aQ\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (aQ > aM.max.x) {\n\t\t\t\t\t\t\t\t\t\t\taM.max.x = aQ\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (aP < aM.min.y) {\n\t\t\t\t\t\t\t\t\t\t\taM.min.y = aP\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (aP > aM.max.y) {\n\t\t\t\t\t\t\t\t\t\t\taM.max.y = aP\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t}\n\t\t\tif (aJ != aS) {\n\t\t\t\t\taM.min.x *= (aS / aJ);\n\t\t\t\t\taM.max.x *= (aS / aJ)\n\t\t\t}\n\t\t\tif (aN != aK) {\n\t\t\t\t\taM.min.y *= (aS / aN);\n\t\t\t\t\taM.max.y *= (aS / aN)\n\t\t\t}\n\t\t\taI = null;\n\t\t\treturn aM\n\t}\n\tfunction o(i) {\n\t\t\treturn \"'\" + i.replace(/(\\'|\\\")/g, \"\").replace(/\\s*,\\s*/g, \"', '\") + \"'\"\n\t}\n\tfunction ad(i, j, aH) {\n\t\t\taH = aH || C;\n\t\t\tif (aH.addEventListener) {\n\t\t\t\t\taH.addEventListener(i, j, false)\n\t\t\t} else {\n\t\t\t\t\taH.attachEvent(\"on\" + i, j)\n\t\t\t}\n\t}\n\tfunction a(i, j, aH) {\n\t\t\taH = aH || C;\n\t\t\tif (aH.removeEventListener) {\n\t\t\t\t\taH.removeEventListener(i, j)\n\t\t\t} else {\n\t\t\t\t\taH.detachEvent(\"on\" + i, j)\n\t\t\t}\n\t}\n\tfunction aw(aL, aH, aP, aK) {\n\t\t\tvar aQ = aK.imageScale, aN, aI, aM, j, aJ, aO;\n\t\t\tif (!aH.complete) {\n\t\t\t\t\treturn ad(\"load\", function() {\n\t\t\t\t\t\t\taw(aL, aH, aP, aK)\n\t\t\t\t\t}, aH)\n\t\t\t}\n\t\t\tif (!aL.complete) {\n\t\t\t\t\treturn ad(\"load\", function() {\n\t\t\t\t\t\t\taw(aL, aH, aP, aK)\n\t\t\t\t\t}, aL)\n\t\t\t}\n\t\t\taH.width = aH.width;\n\t\t\taH.height = aH.height;\n\t\t\tif (aQ) {\n\t\t\t\t\taL.width = aH.width * aQ;\n\t\t\t\t\taL.height = aH.height * aQ\n\t\t\t}\n\t\t\taP.iw = aL.width;\n\t\t\taP.ih = aL.height;\n\t\t\tif (aK.txtOpt) {\n\t\t\t\t\taI = aL;\n\t\t\t\t\taN = aK.zoomMax * aK.txtScale;\n\t\t\t\t\taJ = aP.iw * aN;\n\t\t\t\t\taO = aP.ih * aN;\n\t\t\t\t\tif (aJ < aH.naturalWidth || aO < aH.naturalHeight) {\n\t\t\t\t\t\t\taI = ax(aL, aJ, aO);\n\t\t\t\t\t\t\tif (aI) {\n\t\t\t\t\t\t\t\t\taP.fimage = aI\n\t\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t\taJ = aP.iw;\n\t\t\t\t\t\t\taO = aP.ih;\n\t\t\t\t\t\t\taN = 1\n\t\t\t\t\t}\n\t\t\t\t\tif (parseFloat(aK.imageRadius)) {\n\t\t\t\t\t\t\taP.image = aP.fimage = aL = aq(aP.image, aK.imageRadius, aJ, aO, aN)\n\t\t\t\t\t}\n\t\t\t\t\tif (!aP.HasText()) {\n\t\t\t\t\t\t\tif (aK.shadow) {\n\t\t\t\t\t\t\t\t\taI = Z(aP.image, aJ, aO, aN, aK.shadow, aK.shadowBlur, aK.shadowOffset);\n\t\t\t\t\t\t\t\t\tif (aI) {\n\t\t\t\t\t\t\t\t\t\t\taP.fimage = aI.image;\n\t\t\t\t\t\t\t\t\t\t\taP.w = aI.width;\n\t\t\t\t\t\t\t\t\t\t\taP.h = aI.height\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (aK.bgColour || aK.bgOutlineThickness) {\n\t\t\t\t\t\t\t\t\taM = aK.bgColour == \"tag\" ? Y(aP.a, \"background-color\") : aK.bgColour;\n\t\t\t\t\t\t\t\t\tj = aK.bgOutline == \"tag\" ? Y(aP.a, \"color\") : (aK.bgOutline || aK.textColour);\n\t\t\t\t\t\t\t\t\taJ = aP.fimage.width;\n\t\t\t\t\t\t\t\t\taO = aP.fimage.height;\n\t\t\t\t\t\t\t\t\tif (aK.outlineMethod == \"colour\") {\n\t\t\t\t\t\t\t\t\t\t\taI = aC(aP.fimage, aJ, aO, aN, aM, aK.bgOutlineThickness, aP.outline.colour, aK.padding, aK.bgRadius, 1);\n\t\t\t\t\t\t\t\t\t\t\tif (aI) {\n\t\t\t\t\t\t\t\t\t\t\t\t\taP.oimage = aI.image\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\taI = aC(aP.fimage, aJ, aO, aN, aM, aK.bgOutlineThickness, j, aK.padding, aK.bgRadius);\n\t\t\t\t\t\t\t\t\tif (aI) {\n\t\t\t\t\t\t\t\t\t\t\taP.fimage = aI.image;\n\t\t\t\t\t\t\t\t\t\t\taP.w = aI.width;\n\t\t\t\t\t\t\t\t\t\t\taP.h = aI.height\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (aK.outlineMethod == \"size\") {\n\t\t\t\t\t\t\t\t\tif (aK.outlineIncrease > 0) {\n\t\t\t\t\t\t\t\t\t\t\taP.iw += 2 * aK.outlineIncrease;\n\t\t\t\t\t\t\t\t\t\t\taP.ih += 2 * aK.outlineIncrease;\n\t\t\t\t\t\t\t\t\t\t\taJ = aN * aP.iw;\n\t\t\t\t\t\t\t\t\t\t\taO = aN * aP.ih;\n\t\t\t\t\t\t\t\t\t\t\taI = ax(aP.fimage, aJ, aO);\n\t\t\t\t\t\t\t\t\t\t\taP.oimage = aI;\n\t\t\t\t\t\t\t\t\t\t\taP.fimage = v(aP.fimage, aP.oimage.width, aP.oimage.height)\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\taJ = aN * (aP.iw + (2 * aK.outlineIncrease));\n\t\t\t\t\t\t\t\t\t\t\taO = aN * (aP.ih + (2 * aK.outlineIncrease));\n\t\t\t\t\t\t\t\t\t\t\taI = ax(aP.fimage, aJ, aO);\n\t\t\t\t\t\t\t\t\t\t\taP.oimage = v(aI, aP.fimage.width, aP.fimage.height)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t}\n\t\t\taP.Init()\n\t}\n\tfunction Y(aI, aH) {\n\t\t\tvar j = C.defaultView\n\t\t\t\t, i = aH.replace(/\\-([a-z])/g, function(aJ) {\n\t\t\t\t\treturn aJ.charAt(1).toUpperCase()\n\t\t\t});\n\t\t\treturn (j && j.getComputedStyle && j.getComputedStyle(aI, null).getPropertyValue(aH)) || (aI.currentStyle && aI.currentStyle[i])\n\t}\n\tfunction u(j, aI, aH) {\n\t\t\tvar i = 1, aJ;\n\t\t\tif (aI) {\n\t\t\t\t\ti = 1 * (j.getAttribute(aI) || aH)\n\t\t\t} else {\n\t\t\t\t\tif (aJ = Y(j, \"font-size\")) {\n\t\t\t\t\t\t\ti = (aJ.indexOf(\"px\") > -1 && aJ.replace(\"px\", \"\") * 1) || (aJ.indexOf(\"pt\") > -1 && aJ.replace(\"pt\", \"\") * 1.25) || aJ * 3.3\n\t\t\t\t\t}\n\t\t\t}\n\t\t\treturn i\n\t}\n\tfunction f(i) {\n\t\t\treturn i.target && ai(i.target.id) ? i.target.id : i.srcElement.parentNode.id\n\t}\n\tfunction S(aJ, aK) {\n\t\t\tvar aI, aH, i = parseInt(Y(aK, \"width\")) / aK.width, j = parseInt(Y(aK, \"height\")) / aK.height;\n\t\t\tif (ai(aJ.offsetX)) {\n\t\t\t\t\taI = {\n\t\t\t\t\t\t\tx: aJ.offsetX,\n\t\t\t\t\t\t\ty: aJ.offsetY\n\t\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t\taH = ab(aK.id);\n\t\t\t\t\tif (ai(aJ.changedTouches)) {\n\t\t\t\t\t\t\taJ = aJ.changedTouches[0]\n\t\t\t\t\t}\n\t\t\t\t\tif (aJ.pageX) {\n\t\t\t\t\t\t\taI = {\n\t\t\t\t\t\t\t\t\tx: aJ.pageX - aH.x,\n\t\t\t\t\t\t\t\t\ty: aJ.pageY - aH.y\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t}\n\t\t\tif (aI && i && j) {\n\t\t\t\t\taI.x /= i;\n\t\t\t\t\taI.y /= j\n\t\t\t}\n\t\t\treturn aI\n\t}\n\tfunction B(aH) {\n\t\t\tvar j = aH.target || aH.fromElement.parentNode\n\t\t\t\t, i = y.tc[j.id];\n\t\t\tif (i) {\n\t\t\t\t\ti.mx = i.my = -1;\n\t\t\t\t\ti.UnFreeze();\n\t\t\t\t\ti.EndDrag()\n\t\t\t}\n\t}\n\tfunction af(aL) {\n\t\t\tvar aI, aH = y, j, aK, aJ = f(aL);\n\t\t\tfor (aI in aH.tc) {\n\t\t\t\t\tj = aH.tc[aI];\n\t\t\t\t\tif (j.tttimer) {\n\t\t\t\t\t\t\tclearTimeout(j.tttimer);\n\t\t\t\t\t\t\tj.tttimer = null\n\t\t\t\t\t}\n\t\t\t}\n\t\t\tif (aJ && aH.tc[aJ]) {\n\t\t\t\t\tj = aH.tc[aJ];\n\t\t\t\t\tif (aK = S(aL, j.canvas)) {\n\t\t\t\t\t\t\tj.mx = aK.x;\n\t\t\t\t\t\t\tj.my = aK.y;\n\t\t\t\t\t\t\tj.Drag(aL, aK)\n\t\t\t\t\t}\n\t\t\t\t\tj.drawn = 0\n\t\t\t}\n\t}\n\tfunction z(aI) {\n\t\t\tvar j = y\n\t\t\t\t, i = C.addEventListener ? 0 : 1\n\t\t\t\t, aH = f(aI);\n\t\t\tif (aH && aI.button == i && j.tc[aH]) {\n\t\t\t\t\tj.tc[aH].BeginDrag(aI)\n\t\t\t}\n\t}\n\tfunction aE(aJ) {\n\t\t\tvar aH = y, j = C.addEventListener ? 0 : 1, aI = f(aJ), i;\n\t\t\tif (aI && aJ.button == j && aH.tc[aI]) {\n\t\t\t\t\ti = aH.tc[aI];\n\t\t\t\t\taf(aJ);\n\t\t\t\t\tif (!i.EndDrag() && !i.touchState) {\n\t\t\t\t\t\t\ti.Clicked(aJ)\n\t\t\t\t\t}\n\t\t\t}\n\t}\n\tfunction T(aI) {\n\t\t\tvar j = f(aI), i = (j && y.tc[j]), aH;\n\t\t\tif (i && aI.changedTouches) {\n\t\t\t\t\tif (aI.touches.length == 1 && i.touchState == 0) {\n\t\t\t\t\t\t\ti.touchState = 1;\n\t\t\t\t\t\t\ti.BeginDrag(aI);\n\t\t\t\t\t\t\tif (aH = S(aI, i.canvas)) {\n\t\t\t\t\t\t\t\t\ti.mx = aH.x;\n\t\t\t\t\t\t\t\t\ti.my = aH.y;\n\t\t\t\t\t\t\t\t\ti.drawn = 0\n\t\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (aI.targetTouches.length == 2 && i.pinchZoom) {\n\t\t\t\t\t\t\t\t\ti.touchState = 3;\n\t\t\t\t\t\t\t\t\ti.EndDrag();\n\t\t\t\t\t\t\t\t\ti.BeginPinch(aI)\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\ti.EndDrag();\n\t\t\t\t\t\t\t\t\ti.EndPinch();\n\t\t\t\t\t\t\t\t\ti.touchState = 0\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t}\n\t}\n\tfunction r(aH) {\n\t\t\tvar j = f(aH)\n\t\t\t\t, i = (j && y.tc[j]);\n\t\t\tif (i && aH.changedTouches) {\n\t\t\t\t\tswitch (i.touchState) {\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\ti.Draw();\n\t\t\t\t\t\t\ti.Clicked();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\ti.EndDrag();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\ti.EndPinch()\n\t\t\t\t\t}\n\t\t\t\t\ti.touchState = 0\n\t\t\t}\n\t}\n\tfunction az(aL) {\n\t\t\tvar aI, aH = y, j, aK, aJ = f(aL);\n\t\t\tfor (aI in aH.tc) {\n\t\t\t\t\tj = aH.tc[aI];\n\t\t\t\t\tif (j.tttimer) {\n\t\t\t\t\t\t\tclearTimeout(j.tttimer);\n\t\t\t\t\t\t\tj.tttimer = null\n\t\t\t\t\t}\n\t\t\t}\n\t\t\tj = (aJ && aH.tc[aJ]);\n\t\t\tif (j && aL.changedTouches && j.touchState) {\n\t\t\t\t\tswitch (j.touchState) {\n\t\t\t\t\tcase 1:\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\tif (aK = S(aL, j.canvas)) {\n\t\t\t\t\t\t\t\t\tj.mx = aK.x;\n\t\t\t\t\t\t\t\t\tj.my = aK.y;\n\t\t\t\t\t\t\t\t\tif (j.Drag(aL, aK)) {\n\t\t\t\t\t\t\t\t\t\t\tj.touchState = 2\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\tj.Pinch(aL)\n\t\t\t\t\t}\n\t\t\t\t\tj.drawn = 0\n\t\t\t}\n\t}\n\tfunction ag(aH) {\n\t\t\tvar i = y\n\t\t\t\t, j = f(aH);\n\t\t\tif (j && i.tc[j]) {\n\t\t\t\t\taH.cancelBubble = true;\n\t\t\t\t\taH.returnValue = false;\n\t\t\t\t\taH.preventDefault && aH.preventDefault();\n\t\t\t\t\ti.tc[j].Wheel((aH.wheelDelta || aH.detail) > 0)\n\t\t\t}\n\t}\n\tfunction ac(aI) {\n\t\t\tvar aH, j = y;\n\t\t\tclearTimeout(j.scrollTimer);\n\t\t\tfor (aH in j.tc) {\n\t\t\t\t\tj.tc[aH].Pause()\n\t\t\t}\n\t\t\tj.scrollTimer = setTimeout(function() {\n\t\t\t\t\tvar aK, aJ = y;\n\t\t\t\t\tfor (aK in aJ.tc) {\n\t\t\t\t\t\t\taJ.tc[aK].Resume()\n\t\t\t\t\t}\n\t\t\t}, j.scrollPause)\n\t}\n\tfunction O() {\n\t\t\tE(G())\n\t}\n\tfunction E(aI) {\n\t\t\tvar j = y.tc, aH;\n\t\t\ty.NextFrame(y.interval);\n\t\t\taI = aI || G();\n\t\t\tfor (aH in j) {\n\t\t\t\t\tj[aH].Draw(aI)\n\t\t\t}\n\t}\n\tfunction ab(aH) {\n\t\t\tvar aK = C.getElementById(aH)\n\t\t\t\t, i = aK.getBoundingClientRect()\n\t\t\t\t, aN = C.documentElement\n\t\t\t\t, aL = C.body\n\t\t\t\t, aM = window\n\t\t\t\t, aI = aM.pageXOffset || aN.scrollLeft\n\t\t\t\t, aO = aM.pageYOffset || aN.scrollTop\n\t\t\t\t, aJ = aN.clientLeft || aL.clientLeft\n\t\t\t\t, j = aN.clientTop || aL.clientTop;\n\t\t\treturn {\n\t\t\t\t\tx: i.left + aI - aJ,\n\t\t\t\t\ty: i.top + aO - j\n\t\t\t}\n\t}\n\tfunction V(j, aI, aJ, aH) {\n\t\t\tvar i = j.radius * j.z1 / (j.z1 + j.z2 + aI.z);\n\t\t\treturn {\n\t\t\t\t\tx: aI.x * i * aJ,\n\t\t\t\t\ty: aI.y * i * aH,\n\t\t\t\t\tz: aI.z,\n\t\t\t\t\tw: (j.z1 - aI.z) / j.z2\n\t\t\t}\n\t}\n\tfunction aB(i) {\n\t\t\tthis.e = i;\n\t\t\tthis.br = 0;\n\t\t\tthis.line = [];\n\t\t\tthis.text = [];\n\t\t\tthis.original = i.innerText || i.textContent\n\t}\n\taG = aB.prototype;\n\taG.Empty = function() {\n\t\t\tfor (var j = 0; j < this.text.length; ++j) {\n\t\t\t\t\tif (this.text[j].length) {\n\t\t\t\t\t\t\treturn false\n\t\t\t\t\t}\n\t\t\t}\n\t\t\treturn true\n\t}\n\t;\n\taG.Lines = function(aJ) {\n\t\t\tvar aI = aJ ? 1 : 0, aK, j, aH;\n\t\t\taJ = aJ || this.e;\n\t\t\taK = aJ.childNodes;\n\t\t\tj = aK.length;\n\t\t\tfor (aH = 0; aH < j; ++aH) {\n\t\t\t\t\tif (aK[aH].nodeName == \"BR\") {\n\t\t\t\t\t\t\tthis.text.push(this.line.join(\" \"));\n\t\t\t\t\t\t\tthis.br = 1\n\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (aK[aH].nodeType == 3) {\n\t\t\t\t\t\t\t\t\tif (this.br) {\n\t\t\t\t\t\t\t\t\t\t\tthis.line = [aK[aH].nodeValue];\n\t\t\t\t\t\t\t\t\t\t\tthis.br = 0\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tthis.line.push(aK[aH].nodeValue)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis.Lines(aK[aH])\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t}\n\t\t\taI || this.br || this.text.push(this.line.join(\" \"));\n\t\t\treturn this.text\n\t}\n\t;\n\taG.SplitWidth = function(aH, aO, aL, aK) {\n\t\t\tvar aJ, aI, aN, aM = [];\n\t\t\taO.font = aK + \"px \" + aL;\n\t\t\tfor (aJ = 0; aJ < this.text.length; ++aJ) {\n\t\t\t\t\taN = this.text[aJ].split(/\\s+/);\n\t\t\t\t\tthis.line = [aN[0]];\n\t\t\t\t\tfor (aI = 1; aI < aN.length; ++aI) {\n\t\t\t\t\t\t\tif (aO.measureText(this.line.join(\" \") + \" \" + aN[aI]).width > aH) {\n\t\t\t\t\t\t\t\t\taM.push(this.line.join(\" \"));\n\t\t\t\t\t\t\t\t\tthis.line = [aN[aI]]\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis.line.push(aN[aI])\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\taM.push(this.line.join(\" \"))\n\t\t\t}\n\t\t\treturn this.text = aM\n\t}\n\t;\n\tfunction J(i, j) {\n\t\t\tthis.ts = null;\n\t\t\tthis.tc = i;\n\t\t\tthis.tag = j;\n\t\t\tthis.x = this.y = this.w = this.h = this.sc = 1;\n\t\t\tthis.z = 0;\n\t\t\tthis.pulse = 1;\n\t\t\tthis.pulsate = i.pulsateTo < 1;\n\t\t\tthis.colour = i.outlineColour;\n\t\t\tthis.adash = ~~i.outlineDash;\n\t\t\tthis.agap = ~~i.outlineDashSpace || this.adash;\n\t\t\tthis.aspeed = i.outlineDashSpeed * 1;\n\t\t\tif (this.colour == \"tag\") {\n\t\t\t\t\tthis.colour = Y(j.a, \"color\")\n\t\t\t} else {\n\t\t\t\t\tif (this.colour == \"tagbg\") {\n\t\t\t\t\t\t\tthis.colour = Y(j.a, \"background-color\")\n\t\t\t\t\t}\n\t\t\t}\n\t\t\tthis.Draw = this.pulsate ? this.DrawPulsate : this.DrawSimple;\n\t\t\tthis.radius = i.outlineRadius | 0;\n\t\t\tthis.SetMethod(i.outlineMethod)\n\t}\n\tx = J.prototype;\n\tx.SetMethod = function(aH) {\n\t\t\tvar j = {\n\t\t\t\t\tblock: [\"PreDraw\", \"DrawBlock\"],\n\t\t\t\t\tcolour: [\"PreDraw\", \"DrawColour\"],\n\t\t\t\t\toutline: [\"PostDraw\", \"DrawOutline\"],\n\t\t\t\t\tclassic: [\"LastDraw\", \"DrawOutline\"],\n\t\t\t\t\tsize: [\"PreDraw\", \"DrawSize\"],\n\t\t\t\t\tnone: [\"LastDraw\"]\n\t\t\t}\n\t\t\t\t, i = j[aH] || j.outline;\n\t\t\tif (aH == \"none\") {\n\t\t\t\t\tthis.Draw = function() {\n\t\t\t\t\t\t\treturn 1\n\t\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t\tthis.drawFunc = this[i[1]]\n\t\t\t}\n\t\t\tthis[i[0]] = this.Draw\n\t}\n\t;\n\tx.Update = function(aN, aM, aO, aJ, aK, aL, aI, i) {\n\t\t\tvar j = this.tc.outlineOffset\n\t\t\t\t, aH = 2 * j;\n\t\t\tthis.x = aK * aN + aI - j;\n\t\t\tthis.y = aK * aM + i - j;\n\t\t\tthis.w = aK * aO + aH;\n\t\t\tthis.h = aK * aJ + aH;\n\t\t\tthis.sc = aK;\n\t\t\tthis.z = aL\n\t}\n\t;\n\tx.Ants = function(aM) {\n\t\t\tif (!this.adash) {\n\t\t\t\t\treturn\n\t\t\t}\n\t\t\tvar aJ = this.adash, aL = this.agap, aP = this.aspeed, j = aJ + aL, aK = 0, aI = aJ, i = aL, aO = 0, aN = 0, aH;\n\t\t\tif (aP) {\n\t\t\t\t\taN = L(aP) * (G() - this.ts) / 50;\n\t\t\t\t\tif (aP < 0) {\n\t\t\t\t\t\t\taN = 8640000 - aN\n\t\t\t\t\t}\n\t\t\t\t\taP = ~~aN % j\n\t\t\t}\n\t\t\tif (aP) {\n\t\t\t\t\tif (aJ >= aP) {\n\t\t\t\t\t\t\taK = aJ - aP;\n\t\t\t\t\t\t\taI = aP\n\t\t\t\t\t} else {\n\t\t\t\t\t\t\ti = j - aP;\n\t\t\t\t\t\t\taO = aL - i\n\t\t\t\t\t}\n\t\t\t\t\taH = [aK, i, aI, aO]\n\t\t\t} else {\n\t\t\t\t\taH = [aJ, aL]\n\t\t\t}\n\t\t\taM.setLineDash(aH)\n\t}\n\t;\n\tx.DrawOutline = function(aL, i, aK, j, aH, aJ) {\n\t\t\tvar aI = aD(this.radius, aH / 2, j / 2);\n\t\t\taL.strokeStyle = aJ;\n\t\t\tthis.Ants(aL);\n\t\t\tar(aL, i, aK, j, aH, aI, true)\n\t}\n\t;\n\tx.DrawSize = function(aO, aR, aP, aS, aM, j, aT, aI, aQ) {\n\t\t\tvar aL = aT.w, aH = aT.h, aJ, aK, aN;\n\t\t\tif (this.pulsate) {\n\t\t\t\t\tif (aT.image) {\n\t\t\t\t\t\t\taN = (aT.image.height + this.tc.outlineIncrease) / aT.image.height\n\t\t\t\t\t} else {\n\t\t\t\t\t\t\taN = aT.oscale\n\t\t\t\t\t}\n\t\t\t\t\taK = aT.fimage || aT.image;\n\t\t\t\t\taJ = 1 + ((aN - 1) * (1 - this.pulse));\n\t\t\t\t\taT.h *= aJ;\n\t\t\t\t\taT.w *= aJ\n\t\t\t} else {\n\t\t\t\t\taK = aT.oimage\n\t\t\t}\n\t\t\taT.alpha = 1;\n\t\t\taT.Draw(aO, aI, aQ, aK);\n\t\t\taT.h = aH;\n\t\t\taT.w = aL;\n\t\t\treturn 1\n\t}\n\t;\n\tx.DrawColour = function(aI, aL, aJ, aM, aH, i, aN, j, aK) {\n\t\t\tif (aN.oimage) {\n\t\t\t\t\tif (this.pulse < 1) {\n\t\t\t\t\t\t\taN.alpha = 1 - at(this.pulse, 2);\n\t\t\t\t\t\t\taN.Draw(aI, j, aK, aN.fimage);\n\t\t\t\t\t\t\taN.alpha = this.pulse\n\t\t\t\t\t} else {\n\t\t\t\t\t\t\taN.alpha = 1\n\t\t\t\t\t}\n\t\t\t\t\taN.Draw(aI, j, aK, aN.oimage);\n\t\t\t\t\treturn 1\n\t\t\t}\n\t\t\treturn this[aN.image ? \"DrawColourImage\" : \"DrawColourText\"](aI, aL, aJ, aM, aH, i, aN, j, aK)\n\t}\n\t;\n\tx.DrawColourText = function(aJ, aM, aK, aN, aH, i, aO, j, aL) {\n\t\t\tvar aI = aO.colour;\n\t\t\taO.colour = i;\n\t\t\taO.alpha = 1;\n\t\t\taO.Draw(aJ, j, aL);\n\t\t\taO.colour = aI;\n\t\t\treturn 1\n\t}\n\t;\n\tx.DrawColourImage = function(aM, aP, aN, aQ, aL, i, aT, j, aO) {\n\t\t\tvar aR = aM.canvas, aJ = ~~s(aP, 0), aI = ~~s(aN, 0), aK = aD(aR.width - aJ, aQ) + 0.5 | 0, aS = aD(aR.height - aI, aL) + 0.5 | 0, aH;\n\t\t\tif (p) {\n\t\t\t\t\tp.width = aK,\n\t\t\t\t\tp.height = aS\n\t\t\t} else {\n\t\t\t\t\tp = P(aK, aS)\n\t\t\t}\n\t\t\tif (!p) {\n\t\t\t\t\treturn this.SetMethod(\"outline\")\n\t\t\t}\n\t\t\taH = p.getContext(\"2d\");\n\t\t\taH.drawImage(aR, aJ, aI, aK, aS, 0, 0, aK, aS);\n\t\t\taM.clearRect(aJ, aI, aK, aS);\n\t\t\tif (this.pulsate) {\n\t\t\t\t\taT.alpha = 1 - at(this.pulse, 2)\n\t\t\t} else {\n\t\t\t\t\taT.alpha = 1\n\t\t\t}\n\t\t\taT.Draw(aM, j, aO);\n\t\t\taM.setTransform(1, 0, 0, 1, 0, 0);\n\t\t\taM.save();\n\t\t\taM.beginPath();\n\t\t\taM.rect(aJ, aI, aK, aS);\n\t\t\taM.clip();\n\t\t\taM.globalCompositeOperation = \"source-in\";\n\t\t\taM.fillStyle = i;\n\t\t\taM.fillRect(aJ, aI, aK, aS);\n\t\t\taM.restore();\n\t\t\taM.globalAlpha = 1;\n\t\t\taM.globalCompositeOperation = \"destination-over\";\n\t\t\taM.drawImage(p, 0, 0, aK, aS, aJ, aI, aK, aS);\n\t\t\taM.globalCompositeOperation = \"source-over\";\n\t\t\treturn 1\n\t}\n\t;\n\tx.DrawBlock = function(aL, i, aK, j, aH, aJ) {\n\t\t\tvar aI = aD(this.radius, aH / 2, j / 2);\n\t\t\taL.fillStyle = aJ;\n\t\t\tar(aL, i, aK, j, aH, aI)\n\t}\n\t;\n\tx.DrawSimple = function(aL, i, j, aI, aK, aJ) {\n\t\t\tvar aH = this.tc;\n\t\t\taL.setTransform(1, 0, 0, 1, 0, 0);\n\t\t\taL.strokeStyle = this.colour;\n\t\t\taL.lineWidth = aH.outlineThickness;\n\t\t\taL.shadowBlur = aL.shadowOffsetX = aL.shadowOffsetY = 0;\n\t\t\taL.globalAlpha = aJ ? aK : 1;\n\t\t\treturn this.drawFunc(aL, this.x, this.y, this.w, this.h, this.colour, i, j, aI)\n\t}\n\t;\n\tx.DrawPulsate = function(aL, i, j, aI) {\n\t\t\tvar aJ = G() - this.ts\n\t\t\t\t, aH = this.tc\n\t\t\t\t, aK = aH.pulsateTo + ((1 - aH.pulsateTo) * (0.5 + (w(2 * Math.PI * aJ / (1000 * aH.pulsateTime)) / 2)));\n\t\t\tthis.pulse = aK = y.Smooth(1, aK);\n\t\t\treturn this.DrawSimple(aL, i, j, aI, aK, 1)\n\t}\n\t;\n\tx.Active = function(aI, i, aH) {\n\t\t\tvar j = (i >= this.x && aH >= this.y && i <= this.x + this.w && aH <= this.y + this.h);\n\t\t\tif (j) {\n\t\t\t\t\tthis.ts = this.ts || G()\n\t\t\t} else {\n\t\t\t\t\tthis.ts = null\n\t\t\t}\n\t\t\treturn j\n\t}\n\t;\n\tx.PreDraw = x.PostDraw = x.LastDraw = aA;\n\tfunction e(aI, aS, aO, aR, aP, aJ, aH, aL, aQ, aK, aN, j, aM, i) {\n\t\t\tthis.tc = aI;\n\t\t\tthis.image = null;\n\t\t\tthis.text = aS;\n\t\t\tthis.text_original = i;\n\t\t\tthis.line_widths = [];\n\t\t\tthis.title = aO.title || null;\n\t\t\tthis.a = aO;\n\t\t\tthis.position = new ae(aR[0],aR[1],aR[2]);\n\t\t\tthis.x = this.y = this.z = 0;\n\t\t\tthis.w = aP;\n\t\t\tthis.h = aJ;\n\t\t\tthis.colour = aH || aI.textColour;\n\t\t\tthis.bgColour = aL || aI.bgColour;\n\t\t\tthis.bgRadius = aQ | 0;\n\t\t\tthis.bgOutline = aK || this.colour;\n\t\t\tthis.bgOutlineThickness = aN | 0;\n\t\t\tthis.textFont = j || aI.textFont;\n\t\t\tthis.padding = aM | 0;\n\t\t\tthis.sc = this.alpha = 1;\n\t\t\tthis.weighted = !aI.weight;\n\t\t\tthis.outline = new J(aI,this)\n\t}\n\tc = e.prototype;\n\tc.Init = function(j) {\n\t\t\tvar i = this.tc;\n\t\t\tthis.textHeight = i.textHeight;\n\t\t\tif (this.HasText()) {\n\t\t\t\t\tthis.Measure(i.ctxt, i)\n\t\t\t} else {\n\t\t\t\t\tthis.w = this.iw;\n\t\t\t\t\tthis.h = this.ih\n\t\t\t}\n\t\t\tthis.SetShadowColour = i.shadowAlpha ? this.SetShadowColourAlpha : this.SetShadowColourFixed;\n\t\t\tthis.SetDraw(i)\n\t}\n\t;\n\tc.Draw = aA;\n\tc.HasText = function() {\n\t\t\treturn this.text && this.text[0].length > 0\n\t}\n\t;\n\tc.EqualTo = function(aH) {\n\t\t\tvar j = aH.getElementsByTagName(\"img\");\n\t\t\tif (this.a.href != aH.href) {\n\t\t\t\t\treturn 0\n\t\t\t}\n\t\t\tif (j.length) {\n\t\t\t\t\treturn this.image.src == j[0].src\n\t\t\t}\n\t\t\treturn (aH.innerText || aH.textContent) == this.text_original\n\t}\n\t;\n\tc.SetImage = function(j) {\n\t\t\tthis.image = this.fimage = j\n\t}\n\t;\n\tc.SetDraw = function(i) {\n\t\t\tthis.Draw = this.fimage ? (i.ie > 7 ? this.DrawImageIE : this.DrawImage) : this.DrawText;\n\t\t\ti.noSelect && (this.CheckActive = aA)\n\t}\n\t;\n\tc.MeasureText = function(aK) {\n\t\t\tvar aI, aH = this.text.length, j = 0, aJ;\n\t\t\tfor (aI = 0; aI < aH; ++aI) {\n\t\t\t\t\tthis.line_widths[aI] = aJ = aK.measureText(this.text[aI]).width;\n\t\t\t\t\tj = s(j, aJ)\n\t\t\t}\n\t\t\treturn j\n\t}\n\t;\n\tc.Measure = function(aM, aP) {\n\t\t\tvar aN = t(this.text, this.textFont, this.textHeight), aQ, i, aJ, j, aH, aL, aO, aI, aK;\n\t\t\taO = aN ? aN.max.y + aN.min.y : this.textHeight;\n\t\t\taM.font = this.font = this.textHeight + \"px \" + this.textFont;\n\t\t\taL = this.MeasureText(aM);\n\t\t\tif (aP.txtOpt) {\n\t\t\t\t\taQ = aP.txtScale;\n\t\t\t\t\ti = aQ * this.textHeight;\n\t\t\t\t\taJ = i + \"px \" + this.textFont;\n\t\t\t\t\tj = [aQ * aP.shadowOffset[0], aQ * aP.shadowOffset[1]];\n\t\t\t\t\taM.font = aJ;\n\t\t\t\t\taH = this.MeasureText(aM);\n\t\t\t\t\taK = new g(this.text,aJ,aH + aQ,(aQ * aO) + aQ,aH,this.line_widths,aP.textAlign,aP.textVAlign,aQ);\n\t\t\t\t\tif (this.image) {\n\t\t\t\t\t\t\taK.SetImage(this.image, this.iw, this.ih, aP.imagePosition, aP.imagePadding, aP.imageAlign, aP.imageVAlign, aP.imageScale)\n\t\t\t\t\t}\n\t\t\t\t\taI = aK.Create(this.colour, this.bgColour, this.bgOutline, aQ * this.bgOutlineThickness, aP.shadow, aQ * aP.shadowBlur, j, aQ * this.padding, aQ * this.bgRadius);\n\t\t\t\t\tif (aP.outlineMethod == \"colour\") {\n\t\t\t\t\t\t\tthis.oimage = aK.Create(this.outline.colour, this.bgColour, this.outline.colour, aQ * this.bgOutlineThickness, aP.shadow, aQ * aP.shadowBlur, j, aQ * this.padding, aQ * this.bgRadius)\n\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (aP.outlineMethod == \"size\") {\n\t\t\t\t\t\t\t\t\taN = t(this.text, this.textFont, this.textHeight + aP.outlineIncrease);\n\t\t\t\t\t\t\t\t\ti = aN.max.y + aN.min.y;\n\t\t\t\t\t\t\t\t\taJ = (aQ * (this.textHeight + aP.outlineIncrease)) + \"px \" + this.textFont;\n\t\t\t\t\t\t\t\t\taM.font = aJ;\n\t\t\t\t\t\t\t\t\taH = this.MeasureText(aM);\n\t\t\t\t\t\t\t\t\taK = new g(this.text,aJ,aH + aQ,(aQ * i) + aQ,aH,this.line_widths,aP.textAlign,aP.textVAlign,aQ);\n\t\t\t\t\t\t\t\t\tif (this.image) {\n\t\t\t\t\t\t\t\t\t\t\taK.SetImage(this.image, this.iw + aP.outlineIncrease, this.ih + aP.outlineIncrease, aP.imagePosition, aP.imagePadding, aP.imageAlign, aP.imageVAlign, aP.imageScale)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tthis.oimage = aK.Create(this.colour, this.bgColour, this.bgOutline, aQ * this.bgOutlineThickness, aP.shadow, aQ * aP.shadowBlur, j, aQ * this.padding, aQ * this.bgRadius);\n\t\t\t\t\t\t\t\t\tthis.oscale = this.oimage.width / aI.width;\n\t\t\t\t\t\t\t\t\tif (aP.outlineIncrease > 0) {\n\t\t\t\t\t\t\t\t\t\t\taI = v(aI, this.oimage.width, this.oimage.height)\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tthis.oimage = v(this.oimage, aI.width, aI.height)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (aI) {\n\t\t\t\t\t\t\tthis.fimage = aI;\n\t\t\t\t\t\t\taL = this.fimage.width / aQ;\n\t\t\t\t\t\t\taO = this.fimage.height / aQ\n\t\t\t\t\t}\n\t\t\t\t\tthis.SetDraw(aP);\n\t\t\t\t\taP.txtOpt = !!this.fimage\n\t\t\t}\n\t\t\tthis.h = aO;\n\t\t\tthis.w = aL\n\t}\n\t;\n\tc.SetFont = function(j, aI, aH, i) {\n\t\t\tthis.textFont = j;\n\t\t\tthis.colour = aI;\n\t\t\tthis.bgColour = aH;\n\t\t\tthis.bgOutline = i;\n\t\t\tthis.Measure(this.tc.ctxt, this.tc)\n\t}\n\t;\n\tc.SetWeight = function(aH) {\n\t\t\tvar j = this.tc, aJ = j.weightMode.split(/[, ]/), i, aI, aK = aH.length;\n\t\t\tif (!this.HasText()) {\n\t\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.weighted = true;\n\t\t\tfor (aI = 0; aI < aK; ++aI) {\n\t\t\t\t\ti = aJ[aI] || \"size\";\n\t\t\t\t\tif (\"both\" == i) {\n\t\t\t\t\t\t\tthis.Weight(aH[aI], j.ctxt, j, \"size\", j.min_weight[aI], j.max_weight[aI], aI);\n\t\t\t\t\t\t\tthis.Weight(aH[aI], j.ctxt, j, \"colour\", j.min_weight[aI], j.max_weight[aI], aI)\n\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.Weight(aH[aI], j.ctxt, j, i, j.min_weight[aI], j.max_weight[aI], aI)\n\t\t\t\t\t}\n\t\t\t}\n\t\t\tthis.Measure(j.ctxt, j)\n\t}\n\t;\n\tc.Weight = function(aH, aM, aI, j, aL, aJ, aK) {\n\t\t\taH = isNaN(aH) ? 1 : aH;\n\t\t\tvar i = (aH - aL) / (aJ - aL);\n\t\t\tif (\"colour\" == j) {\n\t\t\t\t\tthis.colour = k(aI, i, aK)\n\t\t\t} else {\n\t\t\t\t\tif (\"bgcolour\" == j) {\n\t\t\t\t\t\t\tthis.bgColour = k(aI, i, aK)\n\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (\"bgoutline\" == j) {\n\t\t\t\t\t\t\t\t\tthis.bgOutline = k(aI, i, aK)\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif (\"outline\" == j) {\n\t\t\t\t\t\t\t\t\t\t\tthis.outline.colour = k(aI, i, aK)\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tif (\"size\" == j) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (aI.weightSizeMin > 0 && aI.weightSizeMax > aI.weightSizeMin) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.textHeight = aI.weightSize * (aI.weightSizeMin + (aI.weightSizeMax - aI.weightSizeMin) * i)\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.textHeight = s(1, aH * aI.weightSize)\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t}\n\t}\n\t;\n\tc.SetShadowColourFixed = function(aH, j, i) {\n\t\t\taH.shadowColor = j\n\t}\n\t;\n\tc.SetShadowColourAlpha = function(aH, j, i) {\n\t\t\taH.shadowColor = U(j, i)\n\t}\n\t;\n\tc.DrawText = function(aJ, aM, aI) {\n\t\t\tvar aN = this.tc, aL = this.x, aK = this.y, aO = this.sc, j, aH;\n\t\t\taJ.globalAlpha = this.alpha;\n\t\t\taJ.fillStyle = this.colour;\n\t\t\taN.shadow && this.SetShadowColour(aJ, aN.shadow, this.alpha);\n\t\t\taJ.font = this.font;\n\t\t\taL += aM / aO;\n\t\t\taK += (aI / aO) - (this.h / 2);\n\t\t\tfor (j = 0; j < this.text.length; ++j) {\n\t\t\t\t\taH = aL;\n\t\t\t\t\tif (\"right\" == aN.textAlign) {\n\t\t\t\t\t\t\taH += this.w / 2 - this.line_widths[j]\n\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (\"centre\" == aN.textAlign) {\n\t\t\t\t\t\t\t\t\taH -= this.line_widths[j] / 2\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\taH -= this.w / 2\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\taJ.setTransform(aO, 0, 0, aO, aO * aH, aO * aK);\n\t\t\t\t\taJ.fillText(this.text[j], 0, 0);\n\t\t\t\t\taK += this.textHeight\n\t\t\t}\n\t}\n\t;\n\tc.DrawImage = function(aJ, aQ, aI, aL) {\n\t\t\tvar aN = this.x\n\t\t\t\t, aK = this.y\n\t\t\t\t, aR = this.sc\n\t\t\t\t, j = aL || this.fimage\n\t\t\t\t, aO = this.w\n\t\t\t\t, aH = this.h\n\t\t\t\t, aM = this.alpha\n\t\t\t\t, aP = this.shadow;\n\t\t\taJ.globalAlpha = aM;\n\t\t\taP && this.SetShadowColour(aJ, aP, aM);\n\t\t\taN += (aQ / aR) - (aO / 2);\n\t\t\taK += (aI / aR) - (aH / 2);\n\t\t\taJ.setTransform(aR, 0, 0, aR, aR * aN, aR * aK);\n\t\t\taJ.drawImage(j, 0, 0, aO, aH)\n\t}\n\t;\n\tc.DrawImageIE = function(aJ, aN, aI) {\n\t\t\tvar j = this.fimage\n\t\t\t\t, aO = this.sc\n\t\t\t\t, aM = j.width = this.w * aO\n\t\t\t\t, aH = j.height = this.h * aO\n\t\t\t\t, aL = (this.x * aO) + aN - (aM / 2)\n\t\t\t\t, aK = (this.y * aO) + aI - (aH / 2);\n\t\t\taJ.setTransform(1, 0, 0, 1, 0, 0);\n\t\t\taJ.globalAlpha = this.alpha;\n\t\t\taJ.drawImage(j, aL, aK)\n\t}\n\t;\n\tc.Calc = function(i, aH) {\n\t\t\tvar j, aK = this.tc, aJ = aK.minBrightness, aI = aK.maxBrightness, aL = aK.max_radius;\n\t\t\tj = i.xform(this.position);\n\t\t\tthis.xformed = j;\n\t\t\tj = V(aK, j, aK.stretchX, aK.stretchY);\n\t\t\tthis.x = j.x;\n\t\t\tthis.y = j.y;\n\t\t\tthis.z = j.z;\n\t\t\tthis.sc = j.w;\n\t\t\tthis.alpha = aH * av(aJ + (aI - aJ) * (aL - this.z) / (2 * aL), 0, 1);\n\t\t\treturn this.xformed\n\t}\n\t;\n\tc.UpdateActive = function(aM, aH, aK) {\n\t\t\tvar aJ = this.outline\n\t\t\t\t, j = this.w\n\t\t\t\t, aI = this.h\n\t\t\t\t, i = this.x - j / 2\n\t\t\t\t, aL = this.y - aI / 2;\n\t\t\taJ.Update(i, aL, j, aI, this.sc, this.z, aH, aK);\n\t\t\treturn aJ\n\t}\n\t;\n\tc.CheckActive = function(aJ, i, aI) {\n\t\t\tvar j = this.tc\n\t\t\t\t, aH = this.UpdateActive(aJ, i, aI);\n\t\t\treturn aH.Active(aJ, j.mx, j.my) ? aH : null\n\t}\n\t;\n\tc.Clicked = function(aK) {\n\t\t\tvar j = this.a, aH = j.target, aI = j.href, i;\n\t\t\tif (aH != \"\" && aH != \"_self\") {\n\t\t\t\t\tif (self.frames[aH]) {\n\t\t\t\t\t\t\tself.frames[aH].document.location = aI\n\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tif (top.frames[aH]) {\n\t\t\t\t\t\t\t\t\t\t\ttop.frames[aH].document.location = aI;\n\t\t\t\t\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} catch (aJ) {}\n\t\t\t\t\t\t\twindow.open(aI, aH)\n\t\t\t\t\t}\n\t\t\t\t\treturn\n\t\t\t}\n\t\t\tif (C.createEvent) {\n\t\t\t\t\ti = C.createEvent(\"MouseEvents\");\n\t\t\t\t\ti.initMouseEvent(\"click\", 1, 1, window, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, null);\n\t\t\t\t\tif (!j.dispatchEvent(i)) {\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t\tif (j.fireEvent) {\n\t\t\t\t\t\t\tif (!j.fireEvent(\"onclick\")) {\n\t\t\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t}\n\t\t\tC.location = aI\n\t}\n\t;\n\tfunction y(aN, j, aI) {\n\t\t\tvar aH, aK, aM = C.getElementById(aN), aJ = [\"id\", \"class\", \"innerHTML\"], aL;\n\t\t\tif (!aM) {\n\t\t\t\t\tthrow 0\n\t\t\t}\n\t\t\tif (ai(window.G_vmlCanvasManager)) {\n\t\t\t\t\taM = window.G_vmlCanvasManager.initElement(aM);\n\t\t\t\t\tthis.ie = parseFloat(navigator.appVersion.split(\"MSIE\")[1])\n\t\t\t}\n\t\t\tif (aM && (!aM.getContext || !aM.getContext(\"2d\").fillText)) {\n\t\t\t\t\taK = C.createElement(\"DIV\");\n\t\t\t\t\tfor (aH = 0; aH < aJ.length; ++aH) {\n\t\t\t\t\t\t\taK[aJ[aH]] = aM[aJ[aH]]\n\t\t\t\t\t}\n\t\t\t\t\taM.parentNode.insertBefore(aK, aM);\n\t\t\t\t\taM.parentNode.removeChild(aM);\n\t\t\t\t\tthrow 0\n\t\t\t}\n\t\t\tfor (aH in y.options) {\n\t\t\t\t\tthis[aH] = aI && ai(aI[aH]) ? aI[aH] : (ai(y[aH]) ? y[aH] : y.options[aH])\n\t\t\t}\n\t\t\tthis.canvas = aM;\n\t\t\tthis.ctxt = aM.getContext(\"2d\");\n\t\t\tthis.z1 = 250 / s(this.depth, 0.001);\n\t\t\tthis.z2 = this.z1 / this.zoom;\n\t\t\tthis.radius = aD(aM.height, aM.width) * 0.0075;\n\t\t\tthis.max_radius = 100;\n\t\t\tthis.max_weight = [];\n\t\t\tthis.min_weight = [];\n\t\t\tthis.textFont = this.textFont && o(this.textFont);\n\t\t\tthis.textHeight *= 1;\n\t\t\tthis.imageRadius = this.imageRadius.toString();\n\t\t\tthis.pulsateTo = av(this.pulsateTo, 0, 1);\n\t\t\tthis.minBrightness = av(this.minBrightness, 0, 1);\n\t\t\tthis.maxBrightness = av(this.maxBrightness, this.minBrightness, 1);\n\t\t\tthis.ctxt.textBaseline = \"top\";\n\t\t\tthis.lx = (this.lock + \"\").indexOf(\"x\") + 1;\n\t\t\tthis.ly = (this.lock + \"\").indexOf(\"y\") + 1;\n\t\t\tthis.frozen = this.dx = this.dy = this.fixedAnim = this.touchState = 0;\n\t\t\tthis.fixedAlpha = 1;\n\t\t\tthis.source = j || aN;\n\t\t\tthis.repeatTags = aD(64, ~~this.repeatTags);\n\t\t\tthis.minTags = aD(200, ~~this.minTags);\n\t\t\tif (~~this.scrollPause > 0) {\n\t\t\t\t\ty.scrollPause = ~~this.scrollPause\n\t\t\t} else {\n\t\t\t\t\tthis.scrollPause = 0\n\t\t\t}\n\t\t\tif (this.minTags > 0 && this.repeatTags < 1 && (aH = this.GetTags().length)) {\n\t\t\t\t\tthis.repeatTags = ap(this.minTags / aH) - 1\n\t\t\t}\n\t\t\tthis.transform = R.Identity();\n\t\t\tthis.startTime = this.time = G();\n\t\t\tthis.mx = this.my = -1;\n\t\t\tthis.centreImage && ao(this);\n\t\t\tthis.Animate = this.dragControl ? this.AnimateDrag : this.AnimatePosition;\n\t\t\tthis.animTiming = (typeof y[this.animTiming] == \"function\" ? y[this.animTiming] : y.Smooth);\n\t\t\tif (this.shadowBlur || this.shadowOffset[0] || this.shadowOffset[1]) {\n\t\t\t\t\tthis.ctxt.shadowColor = this.shadow;\n\t\t\t\t\tthis.shadow = this.ctxt.shadowColor;\n\t\t\t\t\tthis.shadowAlpha = al()\n\t\t\t} else {\n\t\t\t\t\tdelete this.shadow\n\t\t\t}\n\t\t\tthis.Load();\n\t\t\tif (j && this.hideTags) {\n\t\t\t\t\t(function(i) {\n\t\t\t\t\t\t\tif (y.loaded) {\n\t\t\t\t\t\t\t\t\ti.HideTags()\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tad(\"load\", function() {\n\t\t\t\t\t\t\t\t\t\t\ti.HideTags()\n\t\t\t\t\t\t\t\t\t}, window)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t)(this)\n\t\t\t}\n\t\t\tthis.yaw = this.initial ? this.initial[0] * this.maxSpeed : 0;\n\t\t\tthis.pitch = this.initial ? this.initial[1] * this.maxSpeed : 0;\n\t\t\tif (this.tooltip) {\n\t\t\t\t\tthis.ctitle = aM.title;\n\t\t\t\t\taM.title = \"\";\n\t\t\t\t\tif (this.tooltip == \"native\") {\n\t\t\t\t\t\t\tthis.Tooltip = this.TooltipNative\n\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.Tooltip = this.TooltipDiv;\n\t\t\t\t\t\t\tif (!this.ttdiv) {\n\t\t\t\t\t\t\t\t\tthis.ttdiv = C.createElement(\"div\");\n\t\t\t\t\t\t\t\t\tthis.ttdiv.className = this.tooltipClass;\n\t\t\t\t\t\t\t\t\tthis.ttdiv.style.position = \"absolute\";\n\t\t\t\t\t\t\t\t\tthis.ttdiv.style.zIndex = aM.style.zIndex + 1;\n\t\t\t\t\t\t\t\t\tad(\"mouseover\", function(i) {\n\t\t\t\t\t\t\t\t\t\t\ti.target.style.display = \"none\"\n\t\t\t\t\t\t\t\t\t}, this.ttdiv);\n\t\t\t\t\t\t\t\t\tC.body.appendChild(this.ttdiv)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t\tthis.Tooltip = this.TooltipNone\n\t\t\t}\n\t\t\tif (!this.noMouse && !b[aN]) {\n\t\t\t\t\tb[aN] = [[\"mousemove\", af], [\"mouseout\", B], [\"mouseup\", aE], [\"touchstart\", T], [\"touchend\", r], [\"touchcancel\", r], [\"touchmove\", az]];\n\t\t\t\t\tif (this.dragControl) {\n\t\t\t\t\t\t\tb[aN].push([\"mousedown\", z]);\n\t\t\t\t\t\t\tb[aN].push([\"selectstart\", aA])\n\t\t\t\t\t}\n\t\t\t\t\tif (this.wheelZoom) {\n\t\t\t\t\t\t\tb[aN].push([\"mousewheel\", ag]);\n\t\t\t\t\t\t\tb[aN].push([\"DOMMouseScroll\", ag])\n\t\t\t\t\t}\n\t\t\t\t\tif (this.scrollPause) {\n\t\t\t\t\t\t\tb[aN].push([\"scroll\", ac, window])\n\t\t\t\t\t}\n\t\t\t\t\tfor (aH = 0; aH < b[aN].length; ++aH) {\n\t\t\t\t\t\t\taK = b[aN][aH];\n\t\t\t\t\t\t\tad(aK[0], aK[1], aK[2] ? aK[2] : aM)\n\t\t\t\t\t}\n\t\t\t}\n\t\t\tif (!y.started) {\n\t\t\t\t\taL = window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;\n\t\t\t\t\ty.NextFrame = aL ? y.NextFrameRAF : y.NextFrameTimeout;\n\t\t\t\t\ty.interval = this.interval;\n\t\t\t\t\ty.NextFrame(this.interval);\n\t\t\t\t\ty.started = 1\n\t\t\t}\n\t}\n\tQ = y.prototype;\n\tQ.SourceElements = function() {\n\t\t\tif (C.querySelectorAll) {\n\t\t\t\t\treturn C.querySelectorAll(\"#\" + this.source)\n\t\t\t}\n\t\t\treturn [C.getElementById(this.source)]\n\t}\n\t;\n\tQ.HideTags = function() {\n\t\t\tvar aH = this.SourceElements(), j;\n\t\t\tfor (j = 0; j < aH.length; ++j) {\n\t\t\t\t\taH[j].style.display = \"none\"\n\t\t\t}\n\t}\n\t;\n\tQ.GetTags = function() {\n\t\t\tvar aM = this.SourceElements(), aL, aI = [], aK, aJ, aH;\n\t\t\tfor (aH = 0; aH <= this.repeatTags; ++aH) {\n\t\t\t\t\tfor (aK = 0; aK < aM.length; ++aK) {\n\t\t\t\t\t\t\taL = aM[aK].getElementsByTagName(\"a\");\n\t\t\t\t\t\t\tfor (aJ = 0; aJ < aL.length; ++aJ) {\n\t\t\t\t\t\t\t\t\taI.push(aL[aJ])\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t}\n\t\t\treturn aI\n\t}\n\t;\n\tQ.Message = function(aM) {\n\t\t\tvar aO = [], aI, j, aH = aM.split(\"\"), aK, aN, aL, aJ;\n\t\t\tfor (aI = 0; aI < aH.length; ++aI) {\n\t\t\t\t\tif (aH[aI] != \" \") {\n\t\t\t\t\t\t\tj = aI - aH.length / 2;\n\t\t\t\t\t\t\taK = C.createElement(\"A\");\n\t\t\t\t\t\t\taK.href = \"#\";\n\t\t\t\t\t\t\taK.innerText = aH[aI];\n\t\t\t\t\t\t\taL = 100 * ah(j / 9);\n\t\t\t\t\t\t\taJ = -100 * w(j / 9);\n\t\t\t\t\t\t\taN = new e(this,aH[aI],aK,[aL, 0, aJ],2,18,\"#000\",\"#fff\",0,0,0,\"monospace\",2,aH[aI]);\n\t\t\t\t\t\t\taN.Init();\n\t\t\t\t\t\t\taO.push(aN)\n\t\t\t\t\t}\n\t\t\t}\n\t\t\treturn aO\n\t}\n\t;\n\tQ.CreateTag = function(aL) {\n\t\t\tvar aO, aJ, aP, aK, aN, aH, aM, aI, j = [0, 0, 0];\n\t\t\tif (\"text\" != this.imageMode) {\n\t\t\t\t\taO = aL.getElementsByTagName(\"img\");\n\t\t\t\t\tif (aO.length) {\n\t\t\t\t\t\t\taJ = new Image;\n\t\t\t\t\t\t\taJ.src = aO[0].src;\n\t\t\t\t\t\t\tif (!this.imageMode) {\n\t\t\t\t\t\t\t\t\taP = new e(this,\"\",aL,j,0,0);\n\t\t\t\t\t\t\t\t\taP.SetImage(aJ);\n\t\t\t\t\t\t\t\t\taw(aJ, aO[0], aP, this);\n\t\t\t\t\t\t\t\t\treturn aP\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t}\n\t\t\tif (\"image\" != this.imageMode) {\n\t\t\t\t\taN = new aB(aL);\n\t\t\t\t\taK = aN.Lines();\n\t\t\t\t\tif (!aN.Empty()) {\n\t\t\t\t\t\t\taH = this.textFont || o(Y(aL, \"font-family\"));\n\t\t\t\t\t\t\tif (this.splitWidth) {\n\t\t\t\t\t\t\t\t\taK = aN.SplitWidth(this.splitWidth, this.ctxt, aH, this.textHeight)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\taM = this.bgColour == \"tag\" ? Y(aL, \"background-color\") : this.bgColour;\n\t\t\t\t\t\t\taI = this.bgOutline == \"tag\" ? Y(aL, \"color\") : this.bgOutline\n\t\t\t\t\t} else {\n\t\t\t\t\t\t\taN = null\n\t\t\t\t\t}\n\t\t\t}\n\t\t\tif (aN || aJ) {\n\t\t\t\t\taP = new e(this,aK,aL,j,2,this.textHeight + 2,this.textColour || Y(aL, \"color\"),aM,this.bgRadius,aI,this.bgOutlineThickness,aH,this.padding,aN && aN.original);\n\t\t\t\t\tif (aJ) {\n\t\t\t\t\t\t\taP.SetImage(aJ);\n\t\t\t\t\t\t\taw(aJ, aO[0], aP, this)\n\t\t\t\t\t} else {\n\t\t\t\t\t\t\taP.Init()\n\t\t\t\t\t}\n\t\t\t\t\treturn aP\n\t\t\t}\n\t}\n\t;\n\tQ.UpdateTag = function(aH, i) {\n\t\t\tvar aK = this.textColour || Y(i, \"color\")\n\t\t\t\t, j = this.textFont || o(Y(i, \"font-family\"))\n\t\t\t\t, aJ = this.bgColour == \"tag\" ? Y(i, \"background-color\") : this.bgColour\n\t\t\t\t, aI = this.bgOutline == \"tag\" ? Y(i, \"color\") : this.bgOutline;\n\t\t\taH.a = i;\n\t\t\taH.title = i.title;\n\t\t\tif (aH.colour != aK || aH.textFont != j || aH.bgColour != aJ || aH.bgOutline != aI) {\n\t\t\t\t\taH.SetFont(j, aK, aJ, aI)\n\t\t\t}\n\t}\n\t;\n\tQ.Weight = function(aN) {\n\t\t\tvar aJ = aN.length, aL, aH, aO, aK = [], j, aI = this.weightFrom ? this.weightFrom.split(/[, ]/) : [null], aM = aI.length;\n\t\t\tfor (aH = 0; aH < aJ; ++aH) {\n\t\t\t\t\taK[aH] = [];\n\t\t\t\t\tfor (aO = 0; aO < aM; ++aO) {\n\t\t\t\t\t\t\taL = u(aN[aH].a, aI[aO], this.textHeight);\n\t\t\t\t\t\t\tif (!this.max_weight[aO] || aL > this.max_weight[aO]) {\n\t\t\t\t\t\t\t\t\tthis.max_weight[aO] = aL\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (!this.min_weight[aO] || aL < this.min_weight[aO]) {\n\t\t\t\t\t\t\t\t\tthis.min_weight[aO] = aL\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\taK[aH][aO] = aL\n\t\t\t\t\t}\n\t\t\t}\n\t\t\tfor (aO = 0; aO < aM; ++aO) {\n\t\t\t\t\tif (this.max_weight[aO] > this.min_weight[aO]) {\n\t\t\t\t\t\t\tj = 1\n\t\t\t\t\t}\n\t\t\t}\n\t\t\tif (j) {\n\t\t\t\t\tfor (aH = 0; aH < aJ; ++aH) {\n\t\t\t\t\t\t\taN[aH].SetWeight(aK[aH])\n\t\t\t\t\t}\n\t\t\t}\n\t}\n\t;\n\tQ.Load = function() {\n\t\t\tvar aR = this.GetTags(), aM = [], aP, aQ, aL, aI, aH, j, aJ, aO, aK = [], aN = {\n\t\t\t\t\tsphere: q,\n\t\t\t\t\tvcylinder: am,\n\t\t\t\t\thcylinder: au,\n\t\t\t\t\tvring: d,\n\t\t\t\t\thring: n\n\t\t\t};\n\t\t\tif (aR.length) {\n\t\t\t\t\taK.length = aR.length;\n\t\t\t\t\tfor (aO = 0; aO < aR.length; ++aO) {\n\t\t\t\t\t\t\taK[aO] = aO\n\t\t\t\t\t}\n\t\t\t\t\tthis.shuffleTags && an(aK);\n\t\t\t\t\taI = 100 * this.radiusX;\n\t\t\t\t\taH = 100 * this.radiusY;\n\t\t\t\t\tj = 100 * this.radiusZ;\n\t\t\t\t\tthis.max_radius = s(aI, s(aH, j));\n\t\t\t\t\tfor (aO = 0; aO < aR.length; ++aO) {\n\t\t\t\t\t\t\taQ = this.CreateTag(aR[aK[aO]]);\n\t\t\t\t\t\t\tif (aQ) {\n\t\t\t\t\t\t\t\t\taM.push(aQ)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.weight && this.Weight(aM, true);\n\t\t\t\t\tif (this.shapeArgs) {\n\t\t\t\t\t\t\tthis.shapeArgs[0] = aM.length\n\t\t\t\t\t} else {\n\t\t\t\t\t\t\taL = this.shape.toString().split(/[(),]/);\n\t\t\t\t\t\t\taP = aL.shift();\n\t\t\t\t\t\t\tif (typeof window[aP] === \"function\") {\n\t\t\t\t\t\t\t\t\tthis.shape = window[aP]\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis.shape = aN[aP] || aN.sphere\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.shapeArgs = [aM.length, aI, aH, j].concat(aL)\n\t\t\t\t\t}\n\t\t\t\t\taJ = this.shape.apply(this, this.shapeArgs);\n\t\t\t\t\tthis.listLength = aM.length;\n\t\t\t\t\tfor (aO = 0; aO < aM.length; ++aO) {\n\t\t\t\t\t\t\taM[aO].position = new ae(aJ[aO][0],aJ[aO][1],aJ[aO][2])\n\t\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.noTagsMessage && !aM.length) {\n\t\t\t\t\taO = (this.imageMode && this.imageMode != \"both\" ? this.imageMode + \" \" : \"\");\n\t\t\t\t\taM = this.Message(\"No \" + aO + \"tags\")\n\t\t\t}\n\t\t\tthis.taglist = aM\n\t}\n\t;\n\tQ.Update = function() {\n\t\t\tvar aQ = this.GetTags(), aP = [], aK = this.taglist, aR, aO = [], aM = [], aI, aN, aH, aL, aJ;\n\t\t\tif (!this.shapeArgs) {\n\t\t\t\t\treturn this.Load()\n\t\t\t}\n\t\t\tif (aQ.length) {\n\t\t\t\t\taH = this.listLength = aQ.length;\n\t\t\t\t\taN = aK.length;\n\t\t\t\t\tfor (aL = 0; aL < aN; ++aL) {\n\t\t\t\t\t\t\taP.push(aK[aL]);\n\t\t\t\t\t\t\taM.push(aL)\n\t\t\t\t\t}\n\t\t\t\t\tfor (aL = 0; aL < aH; ++aL) {\n\t\t\t\t\t\t\tfor (aJ = 0,\n\t\t\t\t\t\t\taR = 0; aJ < aN; ++aJ) {\n\t\t\t\t\t\t\t\t\tif (aK[aJ].EqualTo(aQ[aL])) {\n\t\t\t\t\t\t\t\t\t\t\tthis.UpdateTag(aP[aJ], aQ[aL]);\n\t\t\t\t\t\t\t\t\t\t\taR = aM[aJ] = -1\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (!aR) {\n\t\t\t\t\t\t\t\t\taO.push(aL)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfor (aL = 0,\n\t\t\t\t\taJ = 0; aL < aN; ++aL) {\n\t\t\t\t\t\t\tif (aM[aJ] == -1) {\n\t\t\t\t\t\t\t\t\taM.splice(aJ, 1)\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t++aJ\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (aM.length) {\n\t\t\t\t\t\t\tan(aM);\n\t\t\t\t\t\t\twhile (aM.length && aO.length) {\n\t\t\t\t\t\t\t\t\taL = aM.shift();\n\t\t\t\t\t\t\t\t\taJ = aO.shift();\n\t\t\t\t\t\t\t\t\taP[aL] = this.CreateTag(aQ[aJ])\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\taM.sort(function(j, i) {\n\t\t\t\t\t\t\t\t\treturn j - i\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\twhile (aM.length) {\n\t\t\t\t\t\t\t\t\taP.splice(aM.pop(), 1)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\taJ = aP.length / (aO.length + 1);\n\t\t\t\t\taL = 0;\n\t\t\t\t\twhile (aO.length) {\n\t\t\t\t\t\t\taP.splice(ap(++aL * aJ), 0, this.CreateTag(aQ[aO.shift()]))\n\t\t\t\t\t}\n\t\t\t\t\tthis.shapeArgs[0] = aH = aP.length;\n\t\t\t\t\taI = this.shape.apply(this, this.shapeArgs);\n\t\t\t\t\tfor (aL = 0; aL < aH; ++aL) {\n\t\t\t\t\t\t\taP[aL].position = new ae(aI[aL][0],aI[aL][1],aI[aL][2])\n\t\t\t\t\t}\n\t\t\t\t\tthis.weight && this.Weight(aP)\n\t\t\t}\n\t\t\tthis.taglist = aP\n\t}\n\t;\n\tQ.SetShadow = function(i) {\n\t\t\ti.shadowBlur = this.shadowBlur;\n\t\t\ti.shadowOffsetX = this.shadowOffset[0];\n\t\t\ti.shadowOffsetY = this.shadowOffset[1]\n\t}\n\t;\n\tQ.Draw = function(aR) {\n\t\t\tif (this.paused) {\n\t\t\t\t\treturn\n\t\t\t}\n\t\t\tvar aL = this.canvas, aJ = aL.width, aQ = aL.height, aT = 0, aI = (aR - this.time) * y.interval / 1000, aP = aJ / 2 + this.offsetX, aO = aQ / 2 + this.offsetY, aX = this.ctxt, aN, aY, aV, aH = -1, aK = this.taglist, aU = aK.length, j = this.frontSelect, aS = (this.centreFunc == aA), aM;\n\t\t\tthis.time = aR;\n\t\t\tif (this.frozen && this.drawn) {\n\t\t\t\t\treturn this.Animate(aJ, aQ, aI)\n\t\t\t}\n\t\t\taM = this.AnimateFixed();\n\t\t\taX.setTransform(1, 0, 0, 1, 0, 0);\n\t\t\tfor (aV = 0; aV < aU; ++aV) {\n\t\t\t\t\taK[aV].Calc(this.transform, this.fixedAlpha)\n\t\t\t}\n\t\t\taK = A(aK, function(aZ, i) {\n\t\t\t\t\treturn i.z - aZ.z\n\t\t\t});\n\t\t\tif (aM && this.fixedAnim.active) {\n\t\t\t\t\taN = this.fixedAnim.tag.UpdateActive(aX, aP, aO)\n\t\t\t} else {\n\t\t\t\t\tthis.active = null;\n\t\t\t\t\tfor (aV = 0; aV < aU; ++aV) {\n\t\t\t\t\t\t\taY = this.mx >= 0 && this.my >= 0 && this.taglist[aV].CheckActive(aX, aP, aO);\n\t\t\t\t\t\t\tif (aY && aY.sc > aT && (!j || aY.z <= 0)) {\n\t\t\t\t\t\t\t\t\taN = aY;\n\t\t\t\t\t\t\t\t\taH = aV;\n\t\t\t\t\t\t\t\t\taN.tag = this.taglist[aV];\n\t\t\t\t\t\t\t\t\taT = aY.sc\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.active = aN\n\t\t\t}\n\t\t\tthis.txtOpt || (this.shadow && this.SetShadow(aX));\n\t\t\taX.clearRect(0, 0, aJ, aQ);\n\t\t\tfor (aV = 0; aV < aU; ++aV) {\n\t\t\t\t\tif (!aS && aK[aV].z <= 0) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tthis.centreFunc(aX, aJ, aQ, aP, aO)\n\t\t\t\t\t\t\t} catch (aW) {\n\t\t\t\t\t\t\t\t\talert(aW);\n\t\t\t\t\t\t\t\t\tthis.centreFunc = aA\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\taS = true\n\t\t\t\t\t}\n\t\t\t\t\tif (!(aN && aN.tag == aK[aV] && aN.PreDraw(aX, aK[aV], aP, aO))) {\n\t\t\t\t\t\t\taK[aV].Draw(aX, aP, aO)\n\t\t\t\t\t}\n\t\t\t\t\taN && aN.tag == aK[aV] && aN.PostDraw(aX)\n\t\t\t}\n\t\t\tif (this.freezeActive && aN) {\n\t\t\t\t\tthis.Freeze()\n\t\t\t} else {\n\t\t\t\t\tthis.UnFreeze();\n\t\t\t\t\tthis.drawn = (aU == this.listLength)\n\t\t\t}\n\t\t\tif (this.fixedCallback) {\n\t\t\t\t\tthis.fixedCallback(this, this.fixedCallbackTag);\n\t\t\t\t\tthis.fixedCallback = null\n\t\t\t}\n\t\t\taM || this.Animate(aJ, aQ, aI);\n\t\t\taN && aN.LastDraw(aX);\n\t\t\taL.style.cursor = aN ? this.activeCursor : \"\";\n\t\t\tthis.Tooltip(aN, this.taglist[aH])\n\t}\n\t;\n\tQ.TooltipNone = function() {}\n\t;\n\tQ.TooltipNative = function(j, i) {\n\t\t\tif (j) {\n\t\t\t\t\tthis.canvas.title = i && i.title ? i.title : \"\"\n\t\t\t} else {\n\t\t\t\t\tthis.canvas.title = this.ctitle\n\t\t\t}\n\t}\n\t;\n\tQ.SetTTDiv = function(aI, j) {\n\t\t\tvar i = this\n\t\t\t\t, aH = i.ttdiv.style;\n\t\t\tif (aI != i.ttdiv.innerHTML) {\n\t\t\t\t\taH.display = \"none\"\n\t\t\t}\n\t\t\ti.ttdiv.innerHTML = aI;\n\t\t\tj && (j.title = i.ttdiv.innerHTML);\n\t\t\tif (aH.display == \"none\" && !i.tttimer) {\n\t\t\t\t\ti.tttimer = setTimeout(function() {\n\t\t\t\t\t\t\tvar aJ = ab(i.canvas.id);\n\t\t\t\t\t\t\taH.display = \"block\";\n\t\t\t\t\t\t\taH.left = aJ.x + i.mx + \"px\";\n\t\t\t\t\t\t\taH.top = aJ.y + i.my + 24 + \"px\";\n\t\t\t\t\t\t\ti.tttimer = null\n\t\t\t\t\t}, i.tooltipDelay)\n\t\t\t}\n\t}\n\t;\n\tQ.TooltipDiv = function(j, i) {\n\t\t\tif (j && i && i.title) {\n\t\t\t\t\tthis.SetTTDiv(i.title, i)\n\t\t\t} else {\n\t\t\t\t\tif (!j && this.mx != -1 && this.my != -1 && this.ctitle.length) {\n\t\t\t\t\t\t\tthis.SetTTDiv(this.ctitle)\n\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.ttdiv.style.display = \"none\"\n\t\t\t\t\t}\n\t\t\t}\n\t}\n\t;\n\tQ.Transform = function(aK, i, aM) {\n\t\t\tif (i || aM) {\n\t\t\t\t\tvar j = ah(i)\n\t\t\t\t\t\t, aL = w(i)\n\t\t\t\t\t\t, aN = ah(aM)\n\t\t\t\t\t\t, aJ = w(aM)\n\t\t\t\t\t\t, aH = new R([aJ, 0, aN, 0, 1, 0, -aN, 0, aJ])\n\t\t\t\t\t\t, aI = new R([1, 0, 0, 0, aL, -j, 0, j, aL]);\n\t\t\t\t\taK.transform = aK.transform.mul(aH.mul(aI))\n\t\t\t}\n\t}\n\t;\n\tQ.AnimateFixed = function() {\n\t\t\tvar aH, j, aJ, i, aI;\n\t\t\tif (this.fadeIn) {\n\t\t\t\t\tj = G() - this.startTime;\n\t\t\t\t\tif (j >= this.fadeIn) {\n\t\t\t\t\t\t\tthis.fadeIn = 0;\n\t\t\t\t\t\t\tthis.fixedAlpha = 1\n\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.fixedAlpha = j / this.fadeIn\n\t\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.fixedAnim) {\n\t\t\t\t\tif (!this.fixedAnim.transform) {\n\t\t\t\t\t\t\tthis.fixedAnim.transform = this.transform\n\t\t\t\t\t}\n\t\t\t\t\taH = this.fixedAnim,\n\t\t\t\t\tj = G() - aH.t0,\n\t\t\t\t\taJ = aH.angle,\n\t\t\t\t\ti,\n\t\t\t\t\taI = this.animTiming(aH.t, j);\n\t\t\t\t\tthis.transform = aH.transform;\n\t\t\t\t\tif (j >= aH.t) {\n\t\t\t\t\t\t\tthis.fixedCallbackTag = aH.tag;\n\t\t\t\t\t\t\tthis.fixedCallback = aH.cb;\n\t\t\t\t\t\t\tthis.fixedAnim = this.yaw = this.pitch = 0\n\t\t\t\t\t} else {\n\t\t\t\t\t\t\taJ *= aI\n\t\t\t\t\t}\n\t\t\t\t\ti = R.Rotation(aJ, aH.axis);\n\t\t\t\t\tthis.transform = this.transform.mul(i);\n\t\t\t\t\treturn (this.fixedAnim != 0)\n\t\t\t}\n\t\t\treturn false\n\t}\n\t;\n\tQ.AnimatePosition = function(aH, aK, aI) {\n\t\t\tvar j = this, i = j.mx, aM = j.my, aJ, aL;\n\t\t\tif (!j.frozen && i >= 0 && aM >= 0 && i < aH && aM < aK) {\n\t\t\t\t\taJ = j.maxSpeed,\n\t\t\t\t\taL = j.reverse ? -1 : 1;\n\t\t\t\t\tj.lx || (j.yaw = ((i * 2 * aJ / aH) - aJ) * aL * aI);\n\t\t\t\t\tj.ly || (j.pitch = ((aM * 2 * aJ / aK) - aJ) * -aL * aI);\n\t\t\t\t\tj.initial = null\n\t\t\t} else {\n\t\t\t\t\tif (!j.initial) {\n\t\t\t\t\t\t\tif (j.frozen && !j.freezeDecel) {\n\t\t\t\t\t\t\t\t\tj.yaw = j.pitch = 0\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tj.Decel(j)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t}\n\t\t\tthis.Transform(j, j.pitch, j.yaw)\n\t}\n\t;\n\tQ.AnimateDrag = function(j, aJ, aI) {\n\t\t\tvar i = this\n\t\t\t\t, aH = 100 * aI * i.maxSpeed / i.max_radius / i.zoom;\n\t\t\tif (i.dx || i.dy) {\n\t\t\t\t\ti.lx || (i.yaw = i.dx * aH / i.stretchX);\n\t\t\t\t\ti.ly || (i.pitch = i.dy * -aH / i.stretchY);\n\t\t\t\t\ti.dx = i.dy = 0;\n\t\t\t\t\ti.initial = null\n\t\t\t} else {\n\t\t\t\t\tif (!i.initial) {\n\t\t\t\t\t\t\ti.Decel(i)\n\t\t\t\t\t}\n\t\t\t}\n\t\t\tthis.Transform(i, i.pitch, i.yaw)\n\t}\n\t;\n\tQ.Freeze = function() {\n\t\t\tif (!this.frozen) {\n\t\t\t\t\tthis.preFreeze = [this.yaw, this.pitch];\n\t\t\t\t\tthis.frozen = 1;\n\t\t\t\t\tthis.drawn = 0\n\t\t\t}\n\t}\n\t;\n\tQ.UnFreeze = function() {\n\t\t\tif (this.frozen) {\n\t\t\t\t\tthis.yaw = this.preFreeze[0];\n\t\t\t\t\tthis.pitch = this.preFreeze[1];\n\t\t\t\t\tthis.frozen = 0\n\t\t\t}\n\t}\n\t;\n\tQ.Decel = function(i) {\n\t\t\tvar aH = i.minSpeed\n\t\t\t\t, aI = L(i.yaw)\n\t\t\t\t, j = L(i.pitch);\n\t\t\tif (!i.lx && aI > aH) {\n\t\t\t\t\ti.yaw = aI > i.z0 ? i.yaw * i.decel : 0\n\t\t\t}\n\t\t\tif (!i.ly && j > aH) {\n\t\t\t\t\ti.pitch = j > i.z0 ? i.pitch * i.decel : 0\n\t\t\t}\n\t}\n\t;\n\tQ.Zoom = function(i) {\n\t\t\tthis.z2 = this.z1 * (1 / i);\n\t\t\tthis.drawn = 0\n\t}\n\t;\n\tQ.Clicked = function(aH) {\n\t\t\tvar i = this.active;\n\t\t\ttry {\n\t\t\t\t\tif (i && i.tag) {\n\t\t\t\t\t\t\tif (this.clickToFront === false || this.clickToFront === null) {\n\t\t\t\t\t\t\t\t\ti.tag.Clicked(aH)\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis.TagToFront(i.tag, this.clickToFront, function() {\n\t\t\t\t\t\t\t\t\t\t\ti.tag.Clicked(aH)\n\t\t\t\t\t\t\t\t\t}, true)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t} catch (j) {}\n\t}\n\t;\n\tQ.Wheel = function(j) {\n\t\t\tvar aH = this.zoom + this.zoomStep * (j ? 1 : -1);\n\t\t\tthis.zoom = aD(this.zoomMax, s(this.zoomMin, aH));\n\t\t\tthis.Zoom(this.zoom)\n\t}\n\t;\n\tQ.BeginDrag = function(i) {\n\t\t\tthis.down = S(i, this.canvas);\n\t\t\ti.cancelBubble = true;\n\t\t\ti.returnValue = false;\n\t\t\ti.preventDefault && i.preventDefault()\n\t}\n\t;\n\tQ.Drag = function(aJ, aI) {\n\t\t\tif (this.dragControl && this.down) {\n\t\t\t\t\tvar aH = this.dragThreshold * this.dragThreshold\n\t\t\t\t\t\t, j = aI.x - this.down.x\n\t\t\t\t\t\t, i = aI.y - this.down.y;\n\t\t\t\t\tif (this.dragging || j * j + i * i > aH) {\n\t\t\t\t\t\t\tthis.dx = j;\n\t\t\t\t\t\t\tthis.dy = i;\n\t\t\t\t\t\t\tthis.dragging = 1;\n\t\t\t\t\t\t\tthis.down = aI\n\t\t\t\t\t}\n\t\t\t}\n\t\t\treturn this.dragging\n\t}\n\t;\n\tQ.EndDrag = function() {\n\t\t\tvar i = this.dragging;\n\t\t\tthis.dragging = this.down = null;\n\t\t\treturn i\n\t}\n\t;\n\tfunction D(aH) {\n\t\t\tvar j = aH.targetTouches[0]\n\t\t\t\t, i = aH.targetTouches[1];\n\t\t\treturn F(at(i.pageX - j.pageX, 2) + at(i.pageY - j.pageY, 2))\n\t}\n\tQ.BeginPinch = function(i) {\n\t\t\tthis.pinched = [D(i), this.zoom];\n\t\t\ti.preventDefault && i.preventDefault()\n\t}\n\t;\n\tQ.Pinch = function(j) {\n\t\t\tvar aI, aH, i = this.pinched;\n\t\t\tif (!i) {\n\t\t\t\t\treturn\n\t\t\t}\n\t\t\taH = D(j);\n\t\t\taI = i[1] * aH / i[0];\n\t\t\tthis.zoom = aD(this.zoomMax, s(this.zoomMin, aI));\n\t\t\tthis.Zoom(this.zoom)\n\t}\n\t;\n\tQ.EndPinch = function(i) {\n\t\t\tthis.pinched = null\n\t}\n\t;\n\tQ.Pause = function() {\n\t\t\tthis.paused = true\n\t}\n\t;\n\tQ.Resume = function() {\n\t\t\tthis.paused = false\n\t}\n\t;\n\tQ.SetSpeed = function(j) {\n\t\t\tthis.initial = j;\n\t\t\tthis.yaw = j[0] * this.maxSpeed;\n\t\t\tthis.pitch = j[1] * this.maxSpeed\n\t}\n\t;\n\tQ.FindTag = function(aH) {\n\t\t\tif (!ai(aH)) {\n\t\t\t\t\treturn null\n\t\t\t}\n\t\t\tai(aH.index) && (aH = aH.index);\n\t\t\tif (!I(aH)) {\n\t\t\t\t\treturn this.taglist[aH]\n\t\t\t}\n\t\t\tvar aI, aJ, j;\n\t\t\tif (ai(aH.id)) {\n\t\t\t\t\taI = \"id\",\n\t\t\t\t\taJ = aH.id\n\t\t\t} else {\n\t\t\t\t\tif (ai(aH.text)) {\n\t\t\t\t\t\t\taI = \"innerText\",\n\t\t\t\t\t\t\taJ = aH.text\n\t\t\t\t\t}\n\t\t\t}\n\t\t\tfor (j = 0; j < this.taglist.length; ++j) {\n\t\t\t\t\tif (this.taglist[j].a[aI] == aJ) {\n\t\t\t\t\t\t\treturn this.taglist[j]\n\t\t\t\t\t}\n\t\t\t}\n\t}\n\t;\n\tQ.RotateTag = function(aP, aI, aO, i, aM, aH) {\n\t\t\tvar aN = aP.Calc(this.transform, 1)\n\t\t\t\t, aK = new ae(aN.x,aN.y,aN.z)\n\t\t\t\t, aJ = aj(aO, aI)\n\t\t\t\t, j = aK.angle(aJ)\n\t\t\t\t, aL = aK.cross(aJ).unit();\n\t\t\tif (j == 0) {\n\t\t\t\t\tthis.fixedCallbackTag = aP;\n\t\t\t\t\tthis.fixedCallback = aM\n\t\t\t} else {\n\t\t\t\t\tthis.fixedAnim = {\n\t\t\t\t\t\t\tangle: -j,\n\t\t\t\t\t\t\taxis: aL,\n\t\t\t\t\t\t\tt: i,\n\t\t\t\t\t\t\tt0: G(),\n\t\t\t\t\t\t\tcb: aM,\n\t\t\t\t\t\t\ttag: aP,\n\t\t\t\t\t\t\tactive: aH\n\t\t\t\t\t}\n\t\t\t}\n\t}\n\t;\n\tQ.TagToFront = function(i, aH, aI, j) {\n\t\t\tthis.RotateTag(i, 0, 0, aH, aI, j)\n\t}\n\t;\n\ty.Start = function(aH, i, j) {\n\t\t\ty.Delete(aH);\n\t\t\ty.tc[aH] = new y(aH,i,j)\n\t}\n\t;\n\tfunction ay(i, j) {\n\t\t\ty.tc[j] && y.tc[j][i]()\n\t}\n\ty.Linear = function(i, j) {\n\t\t\treturn j / i\n\t}\n\t;\n\ty.Smooth = function(i, j) {\n\t\t\treturn 0.5 - w(j * Math.PI / i) / 2\n\t}\n\t;\n\ty.Pause = function(i) {\n\t\t\tay(\"Pause\", i)\n\t}\n\t;\n\ty.Resume = function(i) {\n\t\t\tay(\"Resume\", i)\n\t}\n\t;\n\ty.Reload = function(i) {\n\t\t\tay(\"Load\", i)\n\t}\n\t;\n\ty.Update = function(i) {\n\t\t\tay(\"Update\", i)\n\t}\n\t;\n\ty.SetSpeed = function(j, i) {\n\t\t\tif (I(i) && y.tc[j] && !isNaN(i[0]) && !isNaN(i[1])) {\n\t\t\t\t\ty.tc[j].SetSpeed(i);\n\t\t\t\t\treturn true\n\t\t\t}\n\t\t\treturn false\n\t}\n\t;\n\ty.TagToFront = function(j, i) {\n\t\t\tif (!I(i)) {\n\t\t\t\t\treturn false\n\t\t\t}\n\t\t\ti.lat = i.lng = 0;\n\t\t\treturn y.RotateTag(j, i)\n\t}\n\t;\n\ty.RotateTag = function(aH, i) {\n\t\t\tif (I(i) && y.tc[aH]) {\n\t\t\t\t\tif (isNaN(i.time)) {\n\t\t\t\t\t\t\ti.time = 500\n\t\t\t\t\t}\n\t\t\t\t\tvar j = y.tc[aH].FindTag(i);\n\t\t\t\t\tif (j) {\n\t\t\t\t\t\t\ty.tc[aH].RotateTag(j, i.lat, i.lng, i.time, i.callback, i.active);\n\t\t\t\t\t\t\treturn true\n\t\t\t\t\t}\n\t\t\t}\n\t\t\treturn false\n\t}\n\t;\n\ty.Delete = function(aI) {\n\t\t\tvar j, aH;\n\t\t\tif (b[aI]) {\n\t\t\t\t\taH = C.getElementById(aI);\n\t\t\t\t\tif (aH) {\n\t\t\t\t\t\t\tfor (j = 0; j < b[aI].length; ++j) {\n\t\t\t\t\t\t\t\t\ta(b[aI][j][0], b[aI][j][1], aH)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t}\n\t\t\tdelete b[aI];\n\t\t\tdelete y.tc[aI]\n\t}\n\t;\n\ty.NextFrameRAF = function() {\n\t\t\trequestAnimationFrame(E)\n\t}\n\t;\n\ty.NextFrameTimeout = function(i) {\n\t\t\tsetTimeout(O, i)\n\t}\n\t;\n\ty.tc = {};\n\ty.options = {\n\t\t\tz1: 20000,\n\t\t\tz2: 20000,\n\t\t\tz0: 0.0002,\n\t\t\tfreezeActive: false,\n\t\t\tfreezeDecel: false,\n\t\t\tactiveCursor: \"pointer\",\n\t\t\tpulsateTo: 1,\n\t\t\tpulsateTime: 3,\n\t\t\treverse: false,\n\t\t\tdepth: 0.5,\n\t\t\tmaxSpeed: 0.05,\n\t\t\tminSpeed: 0,\n\t\t\tdecel: 0.95,\n\t\t\tinterval: 20,\n\t\t\tminBrightness: 0.1,\n\t\t\tmaxBrightness: 1,\n\t\t\toutlineColour: \"#ffff99\",\n\t\t\toutlineThickness: 2,\n\t\t\toutlineOffset: 5,\n\t\t\toutlineMethod: \"outline\",\n\t\t\toutlineRadius: 0,\n\t\t\ttextColour: \"#ff99ff\",\n\t\t\ttextHeight: 15,\n\t\t\ttextFont: \"Helvetica, Arial, sans-serif\",\n\t\t\tshadow: \"#000\",\n\t\t\tshadowBlur: 0,\n\t\t\tshadowOffset: [0, 0],\n\t\t\tinitial: null,\n\t\t\thideTags: true,\n\t\t\tzoom: 1,\n\t\t\tweight: false,\n\t\t\tweightMode: \"size\",\n\t\t\tweightFrom: null,\n\t\t\tweightSize: 1,\n\t\t\tweightSizeMin: null,\n\t\t\tweightSizeMax: null,\n\t\t\tweightGradient: {\n\t\t\t\t\t0: \"#f00\",\n\t\t\t\t\t0.33: \"#ff0\",\n\t\t\t\t\t0.66: \"#0f0\",\n\t\t\t\t\t1: \"#00f\"\n\t\t\t},\n\t\t\ttxtOpt: true,\n\t\t\ttxtScale: 2,\n\t\t\tfrontSelect: false,\n\t\t\twheelZoom: true,\n\t\t\tzoomMin: 0.3,\n\t\t\tzoomMax: 3,\n\t\t\tzoomStep: 0.05,\n\t\t\tshape: \"sphere\",\n\t\t\tlock: null,\n\t\t\ttooltip: null,\n\t\t\ttooltipDelay: 300,\n\t\t\ttooltipClass: \"tctooltip\",\n\t\t\tradiusX: 1,\n\t\t\tradiusY: 1,\n\t\t\tradiusZ: 1,\n\t\t\tstretchX: 1,\n\t\t\tstretchY: 1,\n\t\t\toffsetX: 0,\n\t\t\toffsetY: 0,\n\t\t\tshuffleTags: false,\n\t\t\tnoSelect: false,\n\t\t\tnoMouse: false,\n\t\t\timageScale: 1,\n\t\t\tpaused: false,\n\t\t\tdragControl: false,\n\t\t\tdragThreshold: 4,\n\t\t\tcentreFunc: aA,\n\t\t\tsplitWidth: 0,\n\t\t\tanimTiming: \"Smooth\",\n\t\t\tclickToFront: false,\n\t\t\tfadeIn: 0,\n\t\t\tpadding: 0,\n\t\t\tbgColour: null,\n\t\t\tbgRadius: 0,\n\t\t\tbgOutline: null,\n\t\t\tbgOutlineThickness: 0,\n\t\t\toutlineIncrease: 4,\n\t\t\ttextAlign: \"centre\",\n\t\t\ttextVAlign: \"middle\",\n\t\t\timageMode: null,\n\t\t\timagePosition: null,\n\t\t\timagePadding: 2,\n\t\t\timageAlign: \"centre\",\n\t\t\timageVAlign: \"middle\",\n\t\t\tnoTagsMessage: true,\n\t\t\tcentreImage: null,\n\t\t\tpinchZoom: false,\n\t\t\trepeatTags: 0,\n\t\t\tminTags: 0,\n\t\t\timageRadius: 0,\n\t\t\tscrollPause: false,\n\t\t\toutlineDash: 0,\n\t\t\toutlineDashSpace: 0,\n\t\t\toutlineDashSpeed: 1\n\t};\n\tfor (M in y.options) {\n\t\t\ty[M] = y.options[M]\n\t}\n\twindow.TagCanvas = y;\n\tad(\"load\", function() {\n\t\t\ty.loaded = 1\n\t}, window)\n}\n)();\n"]}]}