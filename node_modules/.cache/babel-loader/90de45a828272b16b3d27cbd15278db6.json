{"remainingRequest":"/Users/zhangyangzuo/Downloads/lucky-draw-master/node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js!/Users/zhangyangzuo/Downloads/lucky-draw-master/node_modules/_eslint-loader@2.2.1@eslint-loader/index.js??ref--14-0!/Users/zhangyangzuo/Downloads/lucky-draw-master/src/helper/db.js","dependencies":[{"path":"/Users/zhangyangzuo/Downloads/lucky-draw-master/src/helper/db.js","mtime":1617288854000},{"path":"/Users/zhangyangzuo/Downloads/lucky-draw-master/babel.config.js","mtime":1617288854000},{"path":"/Users/zhangyangzuo/Downloads/lucky-draw-master/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhangyangzuo/Downloads/lucky-draw-master/node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhangyangzuo/Downloads/lucky-draw-master/node_modules/_eslint-loader@2.2.1@eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMvemhhbmd5YW5nenVvL0Rvd25sb2Fkcy9sdWNreS1kcmF3LW1hc3Rlci9ub2RlX21vZHVsZXMvX0BiYWJlbF9ydW50aW1lQDcuMTYuM0BAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL1VzZXJzL3poYW5neWFuZ3p1by9Eb3dubG9hZHMvbHVja3ktZHJhdy1tYXN0ZXIvbm9kZV9tb2R1bGVzL19AYmFiZWxfcnVudGltZUA3LjE2LjNAQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKdmFyIERCX1NUT1JFX05BTUUgPSAnbHVja3lkcmF3Lkd1YXJhbnRlZVRyYW5zYWN0aW9uJzsKdmFyIG9iamVjdFN0b3JlOwoKdmFyIGNyZWF0ZU9iamVjdFN0b3JlID0gZnVuY3Rpb24gY3JlYXRlT2JqZWN0U3RvcmUoZGIpIHsKICBvYmplY3RTdG9yZSA9IGRiLmNyZWF0ZU9iamVjdFN0b3JlKERCX1NUT1JFX05BTUUsIHsKICAgIGtleVBhdGg6ICdpZCcsCiAgICBhdXRvSW5jcmVtZW50OiB0cnVlCiAgfSk7CiAgb2JqZWN0U3RvcmUuY3JlYXRlSW5kZXgoJ2lkJywgJ2lkJywgewogICAgdW5pcXVlOiB0cnVlCiAgfSk7CiAgb2JqZWN0U3RvcmUuY3JlYXRlSW5kZXgoJ25hbWUnLCAnbmFtZScpOwp9OwoKdmFyIGNyZWF0ZU9iamVjdFN0b3JlT3JkZXIgPSBmdW5jdGlvbiBjcmVhdGVPYmplY3RTdG9yZU9yZGVyKGRiKSB7CiAgaWYgKCFkYi5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKERCX1NUT1JFX05BTUUpKSB7CiAgICBjcmVhdGVPYmplY3RTdG9yZShkYik7CiAgfSBlbHNlIHsKICAgIGRiLmRlbGV0ZU9iamVjdFN0b3JlKERCX1NUT1JFX05BTUUpOwogICAgY3JlYXRlT2JqZWN0U3RvcmUoZGIpOwogIH0KfTsKCnZhciBEQlZFUlNJT04gPSAxOwp2YXIgREJOQU1FID0gJ2x1Y2t5ZHJhdyc7IC8vIOaVsOaNruW6k++8mklEQkRhdGFiYXNlIOWvueixoQovLyDlr7nosaHku5PlupPvvJpJREJPYmplY3RTdG9yZSDlr7nosaEKLy8g57Si5byV77yaIElEQkluZGV4IOWvueixoQovLyDkuovliqHvvJogSURCVHJhbnNhY3Rpb24g5a+56LGhCi8vIOaTjeS9nOivt+axgu+8mklEQlJlcXVlc3Qg5a+56LGhCi8vIOaMh+mSiO+8miBJREJDdXJzb3Ig5a+56LGhCi8vIOS4u+mUrumbhuWQiO+8mklEQktleVJhbmdlIOWvueixoQoKdmFyIGRiOwoKdmFyIEx1Y2t5ZHJhd0luZGVjREIgPSBmdW5jdGlvbiBMdWNreWRyYXdJbmRlY0RCKCkgewogIHZhciBfdGhpcyA9IHRoaXM7CgogIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBMdWNreWRyYXdJbmRlY0RCKTsKCiAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJhZGQiLCBmdW5jdGlvbiAoVGFibGVOYW1lLCBuZXdJdGVtKSB7CiAgICB2YXIgYWRkSW5mbyA9IHsKICAgICAgY3JlYXRlZFRpbWU6IERhdGUubm93KCksCiAgICAgIHVwZGF0ZVRpbWU6IERhdGUubm93KCkKICAgIH07CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICB2YXIgdHJhbnNhY3Rpb24gPSBkYi50cmFuc2FjdGlvbihbVGFibGVOYW1lXSwgJ3JlYWR3cml0ZScpOwogICAgICB2YXIgb2JqZWN0U3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZShUYWJsZU5hbWUpOwogICAgICB2YXIgb2JqZWN0U3RvcmVSZXF1ZXN0ID0gb2JqZWN0U3RvcmUuYWRkKE9iamVjdC5hc3NpZ24oe30sIGFkZEluZm8sIG5ld0l0ZW0pKTsKCiAgICAgIG9iamVjdFN0b3JlUmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmVzb2x2ZSh0cnVlKTsKICAgICAgfTsKCiAgICAgIG9iamVjdFN0b3JlUmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmVqZWN0KGVycm9yLnRhcmdldC5lcnJvcik7CiAgICAgIH07CiAgICB9KTsKICB9KTsKCiAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJlZGl0IiwgZnVuY3Rpb24gKFRhYmxlTmFtZSwgaWQsIGRhdGEpIHsKICAgIHZhciBlZGl0SW5mbyA9IHsKICAgICAgdXBkYXRlVGltZTogRGF0ZS5ub3coKQogICAgfTsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIHZhciB0cmFuc2FjdGlvbiA9IGRiLnRyYW5zYWN0aW9uKFtUYWJsZU5hbWVdLCAncmVhZHdyaXRlJyk7CiAgICAgIHZhciBvYmplY3RTdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKFRhYmxlTmFtZSk7CiAgICAgIHZhciBvYmplY3RTdG9yZVJlcXVlc3QgPSBvYmplY3RTdG9yZS5nZXQoaWQpOwoKICAgICAgb2JqZWN0U3RvcmVSZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgbXlSZWNvcmQgPSBvYmplY3RTdG9yZVJlcXVlc3QucmVzdWx0OwoKICAgICAgICBmb3IgKHZhciBrZXkgaW4gZGF0YSkgewogICAgICAgICAgaWYgKHR5cGVvZiBteVJlY29yZFtrZXldICE9PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICBteVJlY29yZFtrZXldID0gZGF0YVtrZXldOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdmFyIG9iamVjdFN0b3JlUmVxdWVzdEdldFJlcyA9IG9iamVjdFN0b3JlLnB1dChPYmplY3QuYXNzaWduKHt9LCBteVJlY29yZCwgZWRpdEluZm8pKTsKCiAgICAgICAgb2JqZWN0U3RvcmVSZXF1ZXN0R2V0UmVzLm9uc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJlc29sdmUodHJ1ZSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqZWN0U3RvcmVSZXF1ZXN0R2V0UmVzLm9uZXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgICAgfTsKICAgICAgfTsKICAgIH0pOwogIH0pOwoKICBfZGVmaW5lUHJvcGVydHkodGhpcywgImRlbCIsIGZ1bmN0aW9uIChUYWJsZU5hbWUsIGlkKSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICB2YXIgb2JqZWN0U3RvcmUgPSBkYi50cmFuc2FjdGlvbihbVGFibGVOYW1lXSwgJ3JlYWR3cml0ZScpLm9iamVjdFN0b3JlKFRhYmxlTmFtZSk7CiAgICAgIHZhciBvYmplY3RTdG9yZVJlcXVlc3QgPSBvYmplY3RTdG9yZS5kZWxldGUoaWQpOwoKICAgICAgb2JqZWN0U3RvcmVSZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXNvbHZlKHRydWUpOwogICAgICB9OwoKICAgICAgb2JqZWN0U3RvcmVSZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICB9OwogICAgfSk7CiAgfSk7CgogIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiY2xlYXIiLCBmdW5jdGlvbiAoVGFibGVOYW1lKSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICB2YXIgb2JqZWN0U3RvcmUgPSBkYi50cmFuc2FjdGlvbihbVGFibGVOYW1lXSwgJ3JlYWR3cml0ZScpLm9iamVjdFN0b3JlKFRhYmxlTmFtZSk7CiAgICAgIHZhciBvYmplY3RTdG9yZVJlcXVlc3QgPSBvYmplY3RTdG9yZS5jbGVhcigpOwoKICAgICAgb2JqZWN0U3RvcmVSZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXNvbHZlKHRydWUpOwogICAgICB9OwoKICAgICAgb2JqZWN0U3RvcmVSZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICB9OwogICAgfSk7CiAgfSk7CgogIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiY291bnQiLCBmdW5jdGlvbiAoVGFibGVOYW1lKSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICB2YXIgb2JqZWN0U3RvcmUgPSBkYi50cmFuc2FjdGlvbihbVGFibGVOYW1lXSwgJ3JlYWR3cml0ZScpLm9iamVjdFN0b3JlKFRhYmxlTmFtZSk7CiAgICAgIHZhciBvYmplY3RTdG9yZVJlcXVlc3QgPSBvYmplY3RTdG9yZS5jb3VudCgpOwoKICAgICAgb2JqZWN0U3RvcmVSZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXNvbHZlKG9iamVjdFN0b3JlUmVxdWVzdC5yZXN1bHQpOwogICAgICB9OwoKICAgICAgb2JqZWN0U3RvcmVSZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICB9OwogICAgfSk7CiAgfSk7CgogIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiZ2V0IiwgZnVuY3Rpb24gKFRhYmxlTmFtZSwgaWQpIHsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIHZhciBvYmplY3RTdG9yZSA9IGRiLnRyYW5zYWN0aW9uKFRhYmxlTmFtZSkub2JqZWN0U3RvcmUoVGFibGVOYW1lKTsKICAgICAgdmFyIG9iamVjdFN0b3JlUmVxdWVzdCA9IG9iamVjdFN0b3JlLmdldChpZCk7CgogICAgICBvYmplY3RTdG9yZVJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJlc29sdmUob2JqZWN0U3RvcmVSZXF1ZXN0LnJlc3VsdCk7CiAgICAgIH07CgogICAgICBvYmplY3RTdG9yZVJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH07CiAgICB9KTsKICB9KTsKCiAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJnZXRLZXkiLCBmdW5jdGlvbiAoVGFibGVOYW1lLCBrZXkpIHsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIHZhciBvYmplY3RTdG9yZSA9IGRiLnRyYW5zYWN0aW9uKFRhYmxlTmFtZSkub2JqZWN0U3RvcmUoVGFibGVOYW1lKTsKICAgICAgdmFyIG9iamVjdFN0b3JlUmVxdWVzdCA9IG9iamVjdFN0b3JlLmdldEtleShrZXkpOwoKICAgICAgb2JqZWN0U3RvcmVSZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXNvbHZlKG9iamVjdFN0b3JlUmVxdWVzdC5yZXN1bHQpOwogICAgICB9OwoKICAgICAgb2JqZWN0U3RvcmVSZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICB9OwogICAgfSk7CiAgfSk7CgogIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiZ2V0QWxsIiwgZnVuY3Rpb24gKFRhYmxlTmFtZSkgewogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgdmFyIG9iamVjdFN0b3JlID0gZGIudHJhbnNhY3Rpb24oVGFibGVOYW1lKS5vYmplY3RTdG9yZShUYWJsZU5hbWUpOwogICAgICB2YXIgb2JqZWN0U3RvcmVSZXF1ZXN0ID0gb2JqZWN0U3RvcmUuZ2V0QWxsKCk7CgogICAgICBvYmplY3RTdG9yZVJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJlc29sdmUob2JqZWN0U3RvcmVSZXF1ZXN0LnJlc3VsdCk7CiAgICAgIH07CgogICAgICBvYmplY3RTdG9yZVJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH07CiAgICB9KTsKICB9KTsKCiAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJvbmVycm9yIiwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICBjb25zb2xlLmxvZygnZGItY29ubmVjdGlvbi1mYWlsJywgZXZlbnQpOwogIH0pOwoKICBfZGVmaW5lUHJvcGVydHkodGhpcywgIkluaXRJbmRleGVkREIiLCBmdW5jdGlvbiAoKSB7CiAgICB2YXIgREJPcGVuUmVxdWVzdCA9IHdpbmRvdy5pbmRleGVkREIub3BlbihEQk5BTUUsIERCVkVSU0lPTik7IC8vIOaVsOaNruW6k+aJk+W8gOWksei0pQoKICAgIERCT3BlblJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICBfdGhpcy5vbmVycm9yKGV2ZW50KTsKICAgIH07CgogICAgREJPcGVuUmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoKSB7CiAgICAgIC8vIOWtmOWCqOaVsOaNrue7k+aenAogICAgICBkYiA9IERCT3BlblJlcXVlc3QucmVzdWx0OwogICAgICBjb25zb2xlLmxvZygnZGItY29ubmVjdGlvbi1zdWNjZXNzJyk7CiAgICB9OwoKICAgIERCT3BlblJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gZnVuY3Rpb24gKCkgewogICAgICBkYiA9IGV2ZW50LnRhcmdldC5yZXN1bHQ7CiAgICAgIGNyZWF0ZU9iamVjdFN0b3JlT3JkZXIoZGIpOwogICAgfTsKICB9KTsKCiAgdGhpcy5Jbml0SW5kZXhlZERCKCk7Cn07Cgp2YXIgZGF0YWJhc2UgPSBuZXcgTHVja3lkcmF3SW5kZWNEQigpOwpleHBvcnQgeyBMdWNreWRyYXdJbmRlY0RCLCBkYXRhYmFzZSwgREJfU1RPUkVfTkFNRSB9Ow=="},{"version":3,"sources":["/Users/zhangyangzuo/Downloads/lucky-draw-master/src/helper/db.js"],"names":["DB_STORE_NAME","objectStore","createObjectStore","db","keyPath","autoIncrement","createIndex","unique","createObjectStoreOrder","objectStoreNames","contains","deleteObjectStore","DBVERSION","DBNAME","LuckydrawIndecDB","TableName","newItem","addInfo","createdTime","Date","now","updateTime","Promise","resolve","reject","transaction","objectStoreRequest","add","Object","assign","onsuccess","onerror","error","target","id","data","editInfo","get","myRecord","result","key","objectStoreRequestGetRes","put","delete","clear","count","getKey","getAll","event","console","log","DBOpenRequest","window","indexedDB","open","onupgradeneeded","InitIndexedDB","database"],"mappings":"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","sourcesContent":["const DB_STORE_NAME = 'luckydraw.GuaranteeTransaction';\nlet objectStore;\nconst createObjectStore = db => {\n  objectStore = db.createObjectStore(DB_STORE_NAME, {\n    keyPath: 'id',\n    autoIncrement: true\n  });\n  objectStore.createIndex('id', 'id', {\n    unique: true\n  });\n  objectStore.createIndex('name', 'name');\n};\n\nconst createObjectStoreOrder = db => {\n  if (!db.objectStoreNames.contains(DB_STORE_NAME)) {\n    createObjectStore(db);\n  } else {\n    db.deleteObjectStore(DB_STORE_NAME);\n    createObjectStore(db);\n  }\n};\n\nconst DBVERSION = 1;\nconst DBNAME = 'luckydraw';\n// 数据库：IDBDatabase 对象\n// 对象仓库：IDBObjectStore 对象\n// 索引： IDBIndex 对象\n// 事务： IDBTransaction 对象\n// 操作请求：IDBRequest 对象\n// 指针： IDBCursor 对象\n// 主键集合：IDBKeyRange 对象\nlet db;\nclass LuckydrawIndecDB {\n  constructor() {\n    this.InitIndexedDB();\n  }\n  add = (TableName, newItem) => {\n    const addInfo = {\n      createdTime: Date.now(),\n      updateTime: Date.now()\n    };\n    return new Promise((resolve, reject) => {\n      const transaction = db.transaction([TableName], 'readwrite');\n      const objectStore = transaction.objectStore(TableName);\n      const objectStoreRequest = objectStore.add(\n        Object.assign({}, addInfo, newItem)\n      );\n      objectStoreRequest.onsuccess = () => {\n        resolve(true);\n      };\n      objectStoreRequest.onerror = error => {\n        reject(error.target.error);\n      };\n    });\n  };\n  edit = (TableName, id, data) => {\n    const editInfo = {\n      updateTime: Date.now()\n    };\n    return new Promise((resolve, reject) => {\n      const transaction = db.transaction([TableName], 'readwrite');\n      const objectStore = transaction.objectStore(TableName);\n      const objectStoreRequest = objectStore.get(id);\n      objectStoreRequest.onsuccess = () => {\n        const myRecord = objectStoreRequest.result;\n        for (const key in data) {\n          if (typeof myRecord[key] !== 'undefined') {\n            myRecord[key] = data[key];\n          }\n        }\n        const objectStoreRequestGetRes = objectStore.put(\n          Object.assign({}, myRecord, editInfo)\n        );\n        objectStoreRequestGetRes.onsuccess = () => {\n          resolve(true);\n        };\n        objectStoreRequestGetRes.onerror = error => {\n          reject(error);\n        };\n      };\n    });\n  };\n  del = (TableName, id) => {\n    return new Promise((resolve, reject) => {\n      const objectStore = db\n        .transaction([TableName], 'readwrite')\n        .objectStore(TableName);\n      const objectStoreRequest = objectStore.delete(id);\n      objectStoreRequest.onsuccess = () => {\n        resolve(true);\n      };\n      objectStoreRequest.onerror = error => {\n        reject(error);\n      };\n    });\n  };\n\n  clear = TableName => {\n    return new Promise((resolve, reject) => {\n      const objectStore = db\n        .transaction([TableName], 'readwrite')\n        .objectStore(TableName);\n      const objectStoreRequest = objectStore.clear();\n      objectStoreRequest.onsuccess = () => {\n        resolve(true);\n      };\n      objectStoreRequest.onerror = error => {\n        reject(error);\n      };\n    });\n  };\n\n  count = TableName => {\n    return new Promise((resolve, reject) => {\n      const objectStore = db\n        .transaction([TableName], 'readwrite')\n        .objectStore(TableName);\n      const objectStoreRequest = objectStore.count();\n      objectStoreRequest.onsuccess = () => {\n        resolve(objectStoreRequest.result);\n      };\n      objectStoreRequest.onerror = error => {\n        reject(error);\n      };\n    });\n  };\n\n  get = (TableName, id) => {\n    return new Promise((resolve, reject) => {\n      const objectStore = db.transaction(TableName).objectStore(TableName);\n      const objectStoreRequest = objectStore.get(id);\n      objectStoreRequest.onsuccess = () => {\n        resolve(objectStoreRequest.result);\n      };\n      objectStoreRequest.onerror = error => {\n        reject(error);\n      };\n    });\n  };\n\n  getKey = (TableName, key) => {\n    return new Promise((resolve, reject) => {\n      const objectStore = db.transaction(TableName).objectStore(TableName);\n      const objectStoreRequest = objectStore.getKey(key);\n      objectStoreRequest.onsuccess = () => {\n        resolve(objectStoreRequest.result);\n      };\n      objectStoreRequest.onerror = error => {\n        reject(error);\n      };\n    });\n  };\n\n  getAll = TableName => {\n    return new Promise((resolve, reject) => {\n      const objectStore = db.transaction(TableName).objectStore(TableName);\n      const objectStoreRequest = objectStore.getAll();\n      objectStoreRequest.onsuccess = () => {\n        resolve(objectStoreRequest.result);\n      };\n      objectStoreRequest.onerror = error => {\n        reject(error);\n      };\n    });\n  };\n\n  onerror = event => {\n    console.log('db-connection-fail', event);\n  };\n  InitIndexedDB = () => {\n    const DBOpenRequest = window.indexedDB.open(DBNAME, DBVERSION);\n    // 数据库打开失败\n    DBOpenRequest.onerror = event => {\n      this.onerror(event);\n    };\n\n    DBOpenRequest.onsuccess = () => {\n      // 存储数据结果\n      db = DBOpenRequest.result;\n      console.log('db-connection-success');\n    };\n\n    DBOpenRequest.onupgradeneeded = () => {\n      db = event.target.result;\n      createObjectStoreOrder(db);\n    };\n  };\n}\n\nconst database = new LuckydrawIndecDB();\n\nexport { LuckydrawIndecDB, database, DB_STORE_NAME };\n"]}]}