{"remainingRequest":"/Users/zhangyangzuo/Downloads/BSC-lucky-draw/node_modules/babel-loader/lib/index.js!/Users/zhangyangzuo/Downloads/BSC-lucky-draw/node_modules/eslint-loader/index.js??ref--13-0!/Users/zhangyangzuo/Downloads/BSC-lucky-draw/src/helper/db.js","dependencies":[{"path":"/Users/zhangyangzuo/Downloads/BSC-lucky-draw/src/helper/db.js","mtime":1617288854000},{"path":"/Users/zhangyangzuo/Downloads/BSC-lucky-draw/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhangyangzuo/Downloads/BSC-lucky-draw/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zhangyangzuo/Downloads/BSC-lucky-draw/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL1VzZXJzL3poYW5neWFuZ3p1by9Eb3dubG9hZHMvQlNDLWx1Y2t5LWRyYXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvVXNlcnMvemhhbmd5YW5nenVvL0Rvd25sb2Fkcy9CU0MtbHVja3ktZHJhdy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwp2YXIgREJfU1RPUkVfTkFNRSA9ICdsdWNreWRyYXcuR3VhcmFudGVlVHJhbnNhY3Rpb24nOwp2YXIgb2JqZWN0U3RvcmU7Cgp2YXIgY3JlYXRlT2JqZWN0U3RvcmUgPSBmdW5jdGlvbiBjcmVhdGVPYmplY3RTdG9yZShkYikgewogIG9iamVjdFN0b3JlID0gZGIuY3JlYXRlT2JqZWN0U3RvcmUoREJfU1RPUkVfTkFNRSwgewogICAga2V5UGF0aDogJ2lkJywKICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUKICB9KTsKICBvYmplY3RTdG9yZS5jcmVhdGVJbmRleCgnaWQnLCAnaWQnLCB7CiAgICB1bmlxdWU6IHRydWUKICB9KTsKICBvYmplY3RTdG9yZS5jcmVhdGVJbmRleCgnbmFtZScsICduYW1lJyk7Cn07Cgp2YXIgY3JlYXRlT2JqZWN0U3RvcmVPcmRlciA9IGZ1bmN0aW9uIGNyZWF0ZU9iamVjdFN0b3JlT3JkZXIoZGIpIHsKICBpZiAoIWRiLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoREJfU1RPUkVfTkFNRSkpIHsKICAgIGNyZWF0ZU9iamVjdFN0b3JlKGRiKTsKICB9IGVsc2UgewogICAgZGIuZGVsZXRlT2JqZWN0U3RvcmUoREJfU1RPUkVfTkFNRSk7CiAgICBjcmVhdGVPYmplY3RTdG9yZShkYik7CiAgfQp9OwoKdmFyIERCVkVSU0lPTiA9IDE7CnZhciBEQk5BTUUgPSAnbHVja3lkcmF3JzsgLy8g5pWw5o2u5bqT77yaSURCRGF0YWJhc2Ug5a+56LGhCi8vIOWvueixoeS7k+W6k++8mklEQk9iamVjdFN0b3JlIOWvueixoQovLyDntKLlvJXvvJogSURCSW5kZXgg5a+56LGhCi8vIOS6i+WKoe+8miBJREJUcmFuc2FjdGlvbiDlr7nosaEKLy8g5pON5L2c6K+35rGC77yaSURCUmVxdWVzdCDlr7nosaEKLy8g5oyH6ZKI77yaIElEQkN1cnNvciDlr7nosaEKLy8g5Li76ZSu6ZuG5ZCI77yaSURCS2V5UmFuZ2Ug5a+56LGhCgp2YXIgZGI7Cgp2YXIgTHVja3lkcmF3SW5kZWNEQiA9IGZ1bmN0aW9uIEx1Y2t5ZHJhd0luZGVjREIoKSB7CiAgdmFyIF90aGlzID0gdGhpczsKCiAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEx1Y2t5ZHJhd0luZGVjREIpOwoKICBfZGVmaW5lUHJvcGVydHkodGhpcywgImFkZCIsIGZ1bmN0aW9uIChUYWJsZU5hbWUsIG5ld0l0ZW0pIHsKICAgIHZhciBhZGRJbmZvID0gewogICAgICBjcmVhdGVkVGltZTogRGF0ZS5ub3coKSwKICAgICAgdXBkYXRlVGltZTogRGF0ZS5ub3coKQogICAgfTsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIHZhciB0cmFuc2FjdGlvbiA9IGRiLnRyYW5zYWN0aW9uKFtUYWJsZU5hbWVdLCAncmVhZHdyaXRlJyk7CiAgICAgIHZhciBvYmplY3RTdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKFRhYmxlTmFtZSk7CiAgICAgIHZhciBvYmplY3RTdG9yZVJlcXVlc3QgPSBvYmplY3RTdG9yZS5hZGQoT2JqZWN0LmFzc2lnbih7fSwgYWRkSW5mbywgbmV3SXRlbSkpOwoKICAgICAgb2JqZWN0U3RvcmVSZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXNvbHZlKHRydWUpOwogICAgICB9OwoKICAgICAgb2JqZWN0U3RvcmVSZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZWplY3QoZXJyb3IudGFyZ2V0LmVycm9yKTsKICAgICAgfTsKICAgIH0pOwogIH0pOwoKICBfZGVmaW5lUHJvcGVydHkodGhpcywgImVkaXQiLCBmdW5jdGlvbiAoVGFibGVOYW1lLCBpZCwgZGF0YSkgewogICAgdmFyIGVkaXRJbmZvID0gewogICAgICB1cGRhdGVUaW1lOiBEYXRlLm5vdygpCiAgICB9OwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgdmFyIHRyYW5zYWN0aW9uID0gZGIudHJhbnNhY3Rpb24oW1RhYmxlTmFtZV0sICdyZWFkd3JpdGUnKTsKICAgICAgdmFyIG9iamVjdFN0b3JlID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoVGFibGVOYW1lKTsKICAgICAgdmFyIG9iamVjdFN0b3JlUmVxdWVzdCA9IG9iamVjdFN0b3JlLmdldChpZCk7CgogICAgICBvYmplY3RTdG9yZVJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBteVJlY29yZCA9IG9iamVjdFN0b3JlUmVxdWVzdC5yZXN1bHQ7CgogICAgICAgIGZvciAodmFyIGtleSBpbiBkYXRhKSB7CiAgICAgICAgICBpZiAodHlwZW9mIG15UmVjb3JkW2tleV0gIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgIG15UmVjb3JkW2tleV0gPSBkYXRhW2tleV07CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB2YXIgb2JqZWN0U3RvcmVSZXF1ZXN0R2V0UmVzID0gb2JqZWN0U3RvcmUucHV0KE9iamVjdC5hc3NpZ24oe30sIG15UmVjb3JkLCBlZGl0SW5mbykpOwoKICAgICAgICBvYmplY3RTdG9yZVJlcXVlc3RHZXRSZXMub25zdWNjZXNzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgcmVzb2x2ZSh0cnVlKTsKICAgICAgICB9OwoKICAgICAgICBvYmplY3RTdG9yZVJlcXVlc3RHZXRSZXMub25lcnJvciA9IGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgICB9OwogICAgICB9OwogICAgfSk7CiAgfSk7CgogIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiZGVsIiwgZnVuY3Rpb24gKFRhYmxlTmFtZSwgaWQpIHsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIHZhciBvYmplY3RTdG9yZSA9IGRiLnRyYW5zYWN0aW9uKFtUYWJsZU5hbWVdLCAncmVhZHdyaXRlJykub2JqZWN0U3RvcmUoVGFibGVOYW1lKTsKICAgICAgdmFyIG9iamVjdFN0b3JlUmVxdWVzdCA9IG9iamVjdFN0b3JlLmRlbGV0ZShpZCk7CgogICAgICBvYmplY3RTdG9yZVJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJlc29sdmUodHJ1ZSk7CiAgICAgIH07CgogICAgICBvYmplY3RTdG9yZVJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH07CiAgICB9KTsKICB9KTsKCiAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJjbGVhciIsIGZ1bmN0aW9uIChUYWJsZU5hbWUpIHsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIHZhciBvYmplY3RTdG9yZSA9IGRiLnRyYW5zYWN0aW9uKFtUYWJsZU5hbWVdLCAncmVhZHdyaXRlJykub2JqZWN0U3RvcmUoVGFibGVOYW1lKTsKICAgICAgdmFyIG9iamVjdFN0b3JlUmVxdWVzdCA9IG9iamVjdFN0b3JlLmNsZWFyKCk7CgogICAgICBvYmplY3RTdG9yZVJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJlc29sdmUodHJ1ZSk7CiAgICAgIH07CgogICAgICBvYmplY3RTdG9yZVJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH07CiAgICB9KTsKICB9KTsKCiAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJjb3VudCIsIGZ1bmN0aW9uIChUYWJsZU5hbWUpIHsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIHZhciBvYmplY3RTdG9yZSA9IGRiLnRyYW5zYWN0aW9uKFtUYWJsZU5hbWVdLCAncmVhZHdyaXRlJykub2JqZWN0U3RvcmUoVGFibGVOYW1lKTsKICAgICAgdmFyIG9iamVjdFN0b3JlUmVxdWVzdCA9IG9iamVjdFN0b3JlLmNvdW50KCk7CgogICAgICBvYmplY3RTdG9yZVJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJlc29sdmUob2JqZWN0U3RvcmVSZXF1ZXN0LnJlc3VsdCk7CiAgICAgIH07CgogICAgICBvYmplY3RTdG9yZVJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH07CiAgICB9KTsKICB9KTsKCiAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJnZXQiLCBmdW5jdGlvbiAoVGFibGVOYW1lLCBpZCkgewogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgdmFyIG9iamVjdFN0b3JlID0gZGIudHJhbnNhY3Rpb24oVGFibGVOYW1lKS5vYmplY3RTdG9yZShUYWJsZU5hbWUpOwogICAgICB2YXIgb2JqZWN0U3RvcmVSZXF1ZXN0ID0gb2JqZWN0U3RvcmUuZ2V0KGlkKTsKCiAgICAgIG9iamVjdFN0b3JlUmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmVzb2x2ZShvYmplY3RTdG9yZVJlcXVlc3QucmVzdWx0KTsKICAgICAgfTsKCiAgICAgIG9iamVjdFN0b3JlUmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfTsKICAgIH0pOwogIH0pOwoKICBfZGVmaW5lUHJvcGVydHkodGhpcywgImdldEtleSIsIGZ1bmN0aW9uIChUYWJsZU5hbWUsIGtleSkgewogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgdmFyIG9iamVjdFN0b3JlID0gZGIudHJhbnNhY3Rpb24oVGFibGVOYW1lKS5vYmplY3RTdG9yZShUYWJsZU5hbWUpOwogICAgICB2YXIgb2JqZWN0U3RvcmVSZXF1ZXN0ID0gb2JqZWN0U3RvcmUuZ2V0S2V5KGtleSk7CgogICAgICBvYmplY3RTdG9yZVJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJlc29sdmUob2JqZWN0U3RvcmVSZXF1ZXN0LnJlc3VsdCk7CiAgICAgIH07CgogICAgICBvYmplY3RTdG9yZVJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH07CiAgICB9KTsKICB9KTsKCiAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJnZXRBbGwiLCBmdW5jdGlvbiAoVGFibGVOYW1lKSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICB2YXIgb2JqZWN0U3RvcmUgPSBkYi50cmFuc2FjdGlvbihUYWJsZU5hbWUpLm9iamVjdFN0b3JlKFRhYmxlTmFtZSk7CiAgICAgIHZhciBvYmplY3RTdG9yZVJlcXVlc3QgPSBvYmplY3RTdG9yZS5nZXRBbGwoKTsKCiAgICAgIG9iamVjdFN0b3JlUmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmVzb2x2ZShvYmplY3RTdG9yZVJlcXVlc3QucmVzdWx0KTsKICAgICAgfTsKCiAgICAgIG9iamVjdFN0b3JlUmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfTsKICAgIH0pOwogIH0pOwoKICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm9uZXJyb3IiLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgIGNvbnNvbGUubG9nKCdkYi1jb25uZWN0aW9uLWZhaWwnLCBldmVudCk7CiAgfSk7CgogIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiSW5pdEluZGV4ZWREQiIsIGZ1bmN0aW9uICgpIHsKICAgIHZhciBEQk9wZW5SZXF1ZXN0ID0gd2luZG93LmluZGV4ZWREQi5vcGVuKERCTkFNRSwgREJWRVJTSU9OKTsgLy8g5pWw5o2u5bqT5omT5byA5aSx6LSlCgogICAgREJPcGVuUmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIF90aGlzLm9uZXJyb3IoZXZlbnQpOwogICAgfTsKCiAgICBEQk9wZW5SZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgLy8g5a2Y5YKo5pWw5o2u57uT5p6cCiAgICAgIGRiID0gREJPcGVuUmVxdWVzdC5yZXN1bHQ7CiAgICAgIGNvbnNvbGUubG9nKCdkYi1jb25uZWN0aW9uLXN1Y2Nlc3MnKTsKICAgIH07CgogICAgREJPcGVuUmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGRiID0gZXZlbnQudGFyZ2V0LnJlc3VsdDsKICAgICAgY3JlYXRlT2JqZWN0U3RvcmVPcmRlcihkYik7CiAgICB9OwogIH0pOwoKICB0aGlzLkluaXRJbmRleGVkREIoKTsKfTsKCnZhciBkYXRhYmFzZSA9IG5ldyBMdWNreWRyYXdJbmRlY0RCKCk7CmV4cG9ydCB7IEx1Y2t5ZHJhd0luZGVjREIsIGRhdGFiYXNlLCBEQl9TVE9SRV9OQU1FIH07"},{"version":3,"sources":["/Users/zhangyangzuo/Downloads/BSC-lucky-draw/src/helper/db.js"],"names":["DB_STORE_NAME","objectStore","createObjectStore","db","keyPath","autoIncrement","createIndex","unique","createObjectStoreOrder","objectStoreNames","contains","deleteObjectStore","DBVERSION","DBNAME","LuckydrawIndecDB","TableName","newItem","addInfo","createdTime","Date","now","updateTime","Promise","resolve","reject","transaction","objectStoreRequest","add","Object","assign","onsuccess","onerror","error","target","id","data","editInfo","get","myRecord","result","key","objectStoreRequestGetRes","put","delete","clear","count","getKey","getAll","event","console","log","DBOpenRequest","window","indexedDB","open","onupgradeneeded","InitIndexedDB","database"],"mappings":"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","sourcesContent":["const DB_STORE_NAME = 'luckydraw.GuaranteeTransaction';\nlet objectStore;\nconst createObjectStore = db => {\n  objectStore = db.createObjectStore(DB_STORE_NAME, {\n    keyPath: 'id',\n    autoIncrement: true\n  });\n  objectStore.createIndex('id', 'id', {\n    unique: true\n  });\n  objectStore.createIndex('name', 'name');\n};\n\nconst createObjectStoreOrder = db => {\n  if (!db.objectStoreNames.contains(DB_STORE_NAME)) {\n    createObjectStore(db);\n  } else {\n    db.deleteObjectStore(DB_STORE_NAME);\n    createObjectStore(db);\n  }\n};\n\nconst DBVERSION = 1;\nconst DBNAME = 'luckydraw';\n// 数据库：IDBDatabase 对象\n// 对象仓库：IDBObjectStore 对象\n// 索引： IDBIndex 对象\n// 事务： IDBTransaction 对象\n// 操作请求：IDBRequest 对象\n// 指针： IDBCursor 对象\n// 主键集合：IDBKeyRange 对象\nlet db;\nclass LuckydrawIndecDB {\n  constructor() {\n    this.InitIndexedDB();\n  }\n  add = (TableName, newItem) => {\n    const addInfo = {\n      createdTime: Date.now(),\n      updateTime: Date.now()\n    };\n    return new Promise((resolve, reject) => {\n      const transaction = db.transaction([TableName], 'readwrite');\n      const objectStore = transaction.objectStore(TableName);\n      const objectStoreRequest = objectStore.add(\n        Object.assign({}, addInfo, newItem)\n      );\n      objectStoreRequest.onsuccess = () => {\n        resolve(true);\n      };\n      objectStoreRequest.onerror = error => {\n        reject(error.target.error);\n      };\n    });\n  };\n  edit = (TableName, id, data) => {\n    const editInfo = {\n      updateTime: Date.now()\n    };\n    return new Promise((resolve, reject) => {\n      const transaction = db.transaction([TableName], 'readwrite');\n      const objectStore = transaction.objectStore(TableName);\n      const objectStoreRequest = objectStore.get(id);\n      objectStoreRequest.onsuccess = () => {\n        const myRecord = objectStoreRequest.result;\n        for (const key in data) {\n          if (typeof myRecord[key] !== 'undefined') {\n            myRecord[key] = data[key];\n          }\n        }\n        const objectStoreRequestGetRes = objectStore.put(\n          Object.assign({}, myRecord, editInfo)\n        );\n        objectStoreRequestGetRes.onsuccess = () => {\n          resolve(true);\n        };\n        objectStoreRequestGetRes.onerror = error => {\n          reject(error);\n        };\n      };\n    });\n  };\n  del = (TableName, id) => {\n    return new Promise((resolve, reject) => {\n      const objectStore = db\n        .transaction([TableName], 'readwrite')\n        .objectStore(TableName);\n      const objectStoreRequest = objectStore.delete(id);\n      objectStoreRequest.onsuccess = () => {\n        resolve(true);\n      };\n      objectStoreRequest.onerror = error => {\n        reject(error);\n      };\n    });\n  };\n\n  clear = TableName => {\n    return new Promise((resolve, reject) => {\n      const objectStore = db\n        .transaction([TableName], 'readwrite')\n        .objectStore(TableName);\n      const objectStoreRequest = objectStore.clear();\n      objectStoreRequest.onsuccess = () => {\n        resolve(true);\n      };\n      objectStoreRequest.onerror = error => {\n        reject(error);\n      };\n    });\n  };\n\n  count = TableName => {\n    return new Promise((resolve, reject) => {\n      const objectStore = db\n        .transaction([TableName], 'readwrite')\n        .objectStore(TableName);\n      const objectStoreRequest = objectStore.count();\n      objectStoreRequest.onsuccess = () => {\n        resolve(objectStoreRequest.result);\n      };\n      objectStoreRequest.onerror = error => {\n        reject(error);\n      };\n    });\n  };\n\n  get = (TableName, id) => {\n    return new Promise((resolve, reject) => {\n      const objectStore = db.transaction(TableName).objectStore(TableName);\n      const objectStoreRequest = objectStore.get(id);\n      objectStoreRequest.onsuccess = () => {\n        resolve(objectStoreRequest.result);\n      };\n      objectStoreRequest.onerror = error => {\n        reject(error);\n      };\n    });\n  };\n\n  getKey = (TableName, key) => {\n    return new Promise((resolve, reject) => {\n      const objectStore = db.transaction(TableName).objectStore(TableName);\n      const objectStoreRequest = objectStore.getKey(key);\n      objectStoreRequest.onsuccess = () => {\n        resolve(objectStoreRequest.result);\n      };\n      objectStoreRequest.onerror = error => {\n        reject(error);\n      };\n    });\n  };\n\n  getAll = TableName => {\n    return new Promise((resolve, reject) => {\n      const objectStore = db.transaction(TableName).objectStore(TableName);\n      const objectStoreRequest = objectStore.getAll();\n      objectStoreRequest.onsuccess = () => {\n        resolve(objectStoreRequest.result);\n      };\n      objectStoreRequest.onerror = error => {\n        reject(error);\n      };\n    });\n  };\n\n  onerror = event => {\n    console.log('db-connection-fail', event);\n  };\n  InitIndexedDB = () => {\n    const DBOpenRequest = window.indexedDB.open(DBNAME, DBVERSION);\n    // 数据库打开失败\n    DBOpenRequest.onerror = event => {\n      this.onerror(event);\n    };\n\n    DBOpenRequest.onsuccess = () => {\n      // 存储数据结果\n      db = DBOpenRequest.result;\n      console.log('db-connection-success');\n    };\n\n    DBOpenRequest.onupgradeneeded = () => {\n      db = event.target.result;\n      createObjectStoreOrder(db);\n    };\n  };\n}\n\nconst database = new LuckydrawIndecDB();\n\nexport { LuckydrawIndecDB, database, DB_STORE_NAME };\n"]}]}