{"remainingRequest":"/Users/zhangyangzuo/Downloads/BSC-lucky-draw/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhangyangzuo/Downloads/BSC-lucky-draw/src/components/LotteryConfig.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"/Users/zhangyangzuo/Downloads/BSC-lucky-draw/src/components/LotteryConfig.vue","mtime":1617288854000},{"path":"/Users/zhangyangzuo/Downloads/BSC-lucky-draw/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhangyangzuo/Downloads/BSC-lucky-draw/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/zhangyangzuo/Downloads/BSC-lucky-draw/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/zhangyangzuo/Downloads/BSC-lucky-draw/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhangyangzuo/Downloads/BSC-lucky-draw/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhangyangzuo/Downloads/BSC-lucky-draw/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5jLUxvdHRlcnlDb25maWcgewogIC5lbC1kaWFsb2dfX2JvZHkgewogICAgaGVpZ2h0OiAzNDBweDsKICAgIC5jb250YWluZXIgewogICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgIG92ZXJmbG93LXk6IGF1dG87CiAgICAgIHBhZGRpbmc6IDAgMTBweDsKICAgIH0KICB9Cn0KLmRpYWxvZy1zaG93QWRkTG90dGVyeSB7CiAgLmVsLWRpYWxvZyB7CiAgICBoZWlnaHQ6IDE4NnB4OwogIH0KfQo="},{"version":3,"sources":["LotteryConfig.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"LotteryConfig.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <el-dialog\n    :visible=\"visible\"\n    :append-to-body=\"true\"\n    width=\"390px\"\n    @close=\"$emit('update:visible', false)\"\n    class=\"c-LotteryConfig\"\n  >\n    <div class=\"c-LotteryConfigtitle\" slot=\"title\">\n      <span :style=\"{ fontSize: '16px', marginRight: '20px' }\">\n        抽奖配置\n      </span>\n      <el-button size=\"mini\" @click=\"addLottery\">增加奖项</el-button>\n      <el-button size=\"mini\" type=\"primary\" @click=\"onSubmit\"\n        >保存配置</el-button\n      >\n      <el-button size=\"mini\" @click=\"$emit('update:visible', false)\"\n        >取消</el-button\n      >\n    </div>\n    <div class=\"container\">\n      <el-form ref=\"form\" :model=\"form\" size=\"mini\">\n        <el-form-item label=\"抽奖标题\">\n          <el-input v-model=\"form.name\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"抽奖总人数\">\n          <el-input\n            type=\"number\"\n            v-model=\"form.number\"\n            :min=\"1\"\n            :step=\"1\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"一等奖\">\n          <el-input\n            type=\"number\"\n            v-model=\"form.firstPrize\"\n            :min=\"0\"\n            :step=\"1\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item\n          :label=\"newitem.name\"\n          v-for=\"newitem in storeNewLottery\"\n          :key=\"newitem.key\"\n        >\n          <el-input\n            type=\"number\"\n            :min=\"0\"\n            :step=\"1\"\n            v-model=\"form[newitem.key]\"\n            @change=\"\n              val => {\n                form[newitem.key] = Number(val);\n              }\n            \"\n          ></el-input>\n        </el-form-item>\n      </el-form>\n    </div>\n\n    <el-dialog\n      :visible.sync=\"showAddLottery\"\n      :append-to-body=\"true\"\n      width=\"300px\"\n      class=\"dialog-showAddLottery\"\n    >\n      <div class=\"add-title\" slot=\"title\">增加奖项</div>\n      <el-form ref=\"newLottery\" :model=\"newLottery\" size=\"mini\">\n        <el-form-item label=\"奖项名称\">\n          <el-input v-model=\"newLottery.name\"></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"addHandler\">增加奖项</el-button>\n          <el-button @click=\"showAddLottery = false\">取消</el-button>\n        </el-form-item>\n      </el-form>\n    </el-dialog>\n  </el-dialog>\n</template>\n<script>\nimport { setData, configField } from '@/helper/index';\nimport { randomNum } from '@/helper/algorithm';\nexport default {\n  name: 'LotteryConfig',\n  props: {\n    visible: Boolean\n  },\n  computed: {\n    form: {\n      get() {\n        return this.$store.state.config;\n      },\n      set(val) {\n        // this.$store.commit('setConfig', val);\n        return val;\n      }\n    },\n    storeNewLottery() {\n      return this.$store.state.newLottery;\n    }\n  },\n  data() {\n    return {\n      showAddLottery: false,\n      newLottery: { name: '' }\n    };\n  },\n  methods: {\n    onSubmit() {\n      setData(configField, this.form);\n      this.$store.commit('setConfig', this.form);\n      this.$emit('update:visible', false);\n\n      this.$message({\n        message: '保存成功',\n        type: 'success'\n      });\n\n      this.$nextTick(() => {\n        this.$emit('resetconfig');\n      });\n    },\n    addLottery() {\n      this.showAddLottery = true;\n    },\n    randomField() {\n      const str = 'abcdefghijklmnopqrstuvwxyz';\n      let fieldStr = '';\n      for (let index = 0; index < 10; index++) {\n        fieldStr += str.split('')[randomNum(1, 27) - 1];\n      }\n      return `${fieldStr}${Date.now()}`;\n    },\n    addHandler() {\n      const field = this.randomField();\n      const data = {\n        key: field,\n        name: this.newLottery.name\n      };\n      this.$store.commit('setNewLottery', data);\n\n      this.showAddLottery = false;\n    }\n  }\n};\n</script>\n<style lang=\"scss\">\n.c-LotteryConfig {\n  .el-dialog__body {\n    height: 340px;\n    .container {\n      height: 100%;\n      overflow-y: auto;\n      padding: 0 10px;\n    }\n  }\n}\n.dialog-showAddLottery {\n  .el-dialog {\n    height: 186px;\n  }\n}\n</style>\n"]}]}