{"remainingRequest":"/Users/zhangyangzuo/Downloads/lucky-draw-master/node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!/Users/zhangyangzuo/Downloads/lucky-draw-master/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhangyangzuo/Downloads/lucky-draw-master/src/App.vue","mtime":1617288854000},{"path":"/Users/zhangyangzuo/Downloads/lucky-draw-master/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhangyangzuo/Downloads/lucky-draw-master/node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhangyangzuo/Downloads/lucky-draw-master/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhangyangzuo/Downloads/lucky-draw-master/node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBMb3R0ZXJ5Q29uZmlnIGZyb20gJ0AvY29tcG9uZW50cy9Mb3R0ZXJ5Q29uZmlnJzsKaW1wb3J0IFB1YmxpY2l0eSBmcm9tICdAL2NvbXBvbmVudHMvUHVibGljaXR5JzsKaW1wb3J0IFRvb2wgZnJvbSAnQC9jb21wb25lbnRzL1Rvb2wnOwppbXBvcnQgYmdhdWRpbyBmcm9tICdAL2Fzc2V0cy9iZy5tcDMnOwppbXBvcnQgYmVnaW5hdWRpbyBmcm9tICdAL2Fzc2V0cy9iZWdpbi5tcDMnOwppbXBvcnQgewogIGdldERhdGEsCiAgY29uZmlnRmllbGQsCiAgcmVzdWx0RmllbGQsCiAgbmV3TG90dGVyeUZpZWxkLAogIGNvbnZlcnNpb25DYXRlZ29yeU5hbWUsCiAgbGlzdEZpZWxkLAp9IGZyb20gJ0AvaGVscGVyL2luZGV4JzsKaW1wb3J0IHsgbHVja3lkcmF3SGFuZGxlciB9IGZyb20gJ0AvaGVscGVyL2FsZ29yaXRobSc7CmltcG9ydCBSZXN1bHQgZnJvbSAnQC9jb21wb25lbnRzL1Jlc3VsdCc7CmltcG9ydCB7IGRhdGFiYXNlLCBEQl9TVE9SRV9OQU1FIH0gZnJvbSAnQC9oZWxwZXIvZGInOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0FwcCcsCgogIGNvbXBvbmVudHM6IHsgTG90dGVyeUNvbmZpZywgUHVibGljaXR5LCBUb29sLCBSZXN1bHQgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIHJlc0NhcmRTdHlsZSgpIHsKICAgICAgY29uc3Qgc3R5bGUgPSB7IGZvbnRTaXplOiAnMzBweCcgfTsKICAgICAgY29uc3QgeyBudW1iZXIgfSA9IHRoaXMuY29uZmlnOwogICAgICBpZiAobnVtYmVyIDwgMTAwKSB7CiAgICAgICAgc3R5bGUuZm9udFNpemUgPSAnMTAwcHgnOwogICAgICB9IGVsc2UgaWYgKG51bWJlciA8IDEwMDApIHsKICAgICAgICBzdHlsZS5mb250U2l6ZSA9ICc4MHB4JzsKICAgICAgfSBlbHNlIGlmIChudW1iZXIgPCAxMDAwMCkgewogICAgICAgIHN0eWxlLmZvbnRTaXplID0gJzYwcHgnOwogICAgICB9CiAgICAgIHJldHVybiBzdHlsZTsKICAgIH0sCiAgICBjb25maWc6IHsKICAgICAgZ2V0KCkgewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5jb25maWc7CiAgICAgIH0sCiAgICB9LAogICAgcmVzdWx0OiB7CiAgICAgIGdldCgpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUucmVzdWx0OwogICAgICB9LAogICAgICBzZXQodmFsKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRSZXN1bHQnLCB2YWwpOwogICAgICB9LAogICAgfSwKICAgIGxpc3QoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5saXN0OwogICAgfSwKICAgIGFsbHJlc3VsdCgpIHsKICAgICAgbGV0IGFsbHJlc3VsdCA9IFtdOwogICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLnJlc3VsdCkgewogICAgICAgIGlmICh0aGlzLnJlc3VsdC5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7CiAgICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5yZXN1bHRba2V5XTsKICAgICAgICAgIGFsbHJlc3VsdCA9IGFsbHJlc3VsdC5jb25jYXQoZWxlbWVudCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBhbGxyZXN1bHQ7CiAgICB9LAogICAgZGF0YXMoKSB7CiAgICAgIGNvbnN0IHsgbnVtYmVyIH0gPSB0aGlzLmNvbmZpZzsKICAgICAgY29uc3QgbnVtcyA9IG51bWJlciA+PSAxNTAwID8gNTAwIDogdGhpcy5jb25maWcubnVtYmVyOwogICAgICBjb25zdCBjb25maWdOdW0gPSBudW1iZXIgPiAxNTAwID8gTWF0aC5mbG9vcihudW1iZXIgLyAzKSA6IG51bWJlcjsKICAgICAgY29uc3QgcmFuZG9tU2hvd051bXMgPSBsdWNreWRyYXdIYW5kbGVyKGNvbmZpZ051bSwgW10sIG51bXMpOwogICAgICBjb25zdCByYW5kb21TaG93RGF0YXMgPSByYW5kb21TaG93TnVtcy5tYXAoKGl0ZW0pID0+IHsKICAgICAgICBjb25zdCBsaXN0RGF0YSA9IHRoaXMubGlzdC5maW5kKChkKSA9PiBkLmtleSA9PT0gaXRlbSk7CiAgICAgICAgY29uc3QgcGhvdG8gPSB0aGlzLnBob3Rvcy5maW5kKChkKSA9PiBkLmlkID09PSBpdGVtKTsKICAgICAgICByZXR1cm4gewogICAgICAgICAga2V5OiBpdGVtICogKG51bWJlciA+IDE1MDAgPyAzIDogMSksCiAgICAgICAgICBuYW1lOiBsaXN0RGF0YSA/IGxpc3REYXRhLm5hbWUgOiAnJywKICAgICAgICAgIHBob3RvOiBwaG90byA/IHBob3RvLnZhbHVlIDogJycsCiAgICAgICAgfTsKICAgICAgfSk7CiAgICAgIHJldHVybiByYW5kb21TaG93RGF0YXM7CiAgICB9LAogICAgY2F0ZWdvcnlOYW1lKCkgewogICAgICByZXR1cm4gY29udmVyc2lvbkNhdGVnb3J5TmFtZSh0aGlzLmNhdGVnb3J5KTsKICAgIH0sCiAgICBwaG90b3MoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5waG90b3M7CiAgICB9LAogIH0sCiAgY3JlYXRlZCgpIHsKICAgIGNvbnN0IGRhdGEgPSBnZXREYXRhKGNvbmZpZ0ZpZWxkKTsKICAgIGlmIChkYXRhKSB7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0Q29uZmlnJywgT2JqZWN0LmFzc2lnbih7fSwgZGF0YSkpOwogICAgfQogICAgY29uc3QgcmVzdWx0ID0gZ2V0RGF0YShyZXN1bHRGaWVsZCk7CiAgICBpZiAocmVzdWx0KSB7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0UmVzdWx0JywgcmVzdWx0KTsKICAgIH0KCiAgICBjb25zdCBuZXdMb3R0ZXJ5ID0gZ2V0RGF0YShuZXdMb3R0ZXJ5RmllbGQpOwogICAgaWYgKG5ld0xvdHRlcnkpIHsKICAgICAgY29uc3QgY29uZmlnID0gdGhpcy5jb25maWc7CiAgICAgIG5ld0xvdHRlcnkuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0TmV3TG90dGVyeScsIGl0ZW0pOwogICAgICAgIGlmICghY29uZmlnW2l0ZW0ua2V5XSkgewogICAgICAgICAgdGhpcy4kc2V0KGNvbmZpZywgaXRlbS5rZXksIDApOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0Q29uZmlnJywgY29uZmlnKTsKICAgIH0KCiAgICBjb25zdCBsaXN0ID0gZ2V0RGF0YShsaXN0RmllbGQpOwogICAgaWYgKGxpc3QpIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRMaXN0JywgbGlzdCk7CiAgICB9CiAgfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJ1bm5pbmc6IGZhbHNlLAogICAgICBzaG93UmVzOiBmYWxzZSwKICAgICAgc2hvd0NvbmZpZzogZmFsc2UsCiAgICAgIHNob3dSZXN1bHQ6IGZhbHNlLAogICAgICByZXNBcnI6IFtdLAogICAgICBjYXRlZ29yeTogJycsCiAgICAgIGF1ZGlvUGxheWluZzogZmFsc2UsCiAgICAgIGF1ZGlvU3JjOiBiZ2F1ZGlvLAogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICBwaG90b3M6IHsKICAgICAgZGVlcDogdHJ1ZSwKICAgICAgaGFuZGxlcigpIHsKICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICB0aGlzLnJlbG9hZFRhZ0NhbnZhcygpOwogICAgICAgIH0pOwogICAgICB9LAogICAgfSwKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLnN0YXJ0VGFnQ2FudmFzKCk7CiAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgdGhpcy5nZXRQaG90bygpOwogICAgfSwgMTAwMCk7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5yZXBvcnRXaW5kb3dTaXplKTsKICB9LAogIGJlZm9yZURlc3Ryb3koKSB7CiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5yZXBvcnRXaW5kb3dTaXplKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHJlcG9ydFdpbmRvd1NpemUoKSB7CiAgICAgIGNvbnN0IEFwcENhbnZhcyA9IHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IoJyNyb290Y2FudmFzJyk7CiAgICAgIGlmIChBcHBDYW52YXMucGFyZW50RWxlbWVudCkgewogICAgICAgIEFwcENhbnZhcy5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKEFwcENhbnZhcyk7CiAgICAgIH0KICAgICAgdGhpcy5zdGFydFRhZ0NhbnZhcygpOwogICAgfSwKICAgIHBsYXlIYW5kbGVyKCkgewogICAgICB0aGlzLmF1ZGlvUGxheWluZyA9IHRydWU7CiAgICB9LAogICAgcGF1c2VIYW5kbGVyKCkgewogICAgICB0aGlzLmF1ZGlvUGxheWluZyA9IGZhbHNlOwogICAgfSwKICAgIHBsYXlBdWRpbyh0eXBlKSB7CiAgICAgIGlmICh0eXBlKSB7CiAgICAgICAgdGhpcy4kZWwucXVlcnlTZWxlY3RvcignI2F1ZGlvYmcnKS5wbGF5KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kZWwucXVlcnlTZWxlY3RvcignI2F1ZGlvYmcnKS5wYXVzZSgpOwogICAgICB9CiAgICB9LAogICAgbG9hZEF1ZGlvKCkgewogICAgICB0aGlzLiRlbC5xdWVyeVNlbGVjdG9yKCcjYXVkaW9iZycpLmxvYWQoKTsKICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IoJyNhdWRpb2JnJykucGxheSgpOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRQaG90bygpIHsKICAgICAgZGF0YWJhc2UuZ2V0QWxsKERCX1NUT1JFX05BTUUpLnRoZW4oKHJlcykgPT4gewogICAgICAgIGlmIChyZXMgJiYgcmVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0UGhvdG9zJywgcmVzKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHNwZWVkKCkgewogICAgICByZXR1cm4gWzAuMSAqIE1hdGgucmFuZG9tKCkgKyAwLjAxLCAtKDAuMSAqIE1hdGgucmFuZG9tKCkgKyAwLjAxKV07CiAgICB9LAogICAgY3JlYXRlQ2FudmFzKCkgewogICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsKICAgICAgY2FudmFzLndpZHRoID0gZG9jdW1lbnQuYm9keS5vZmZzZXRXaWR0aDsKICAgICAgY2FudmFzLmhlaWdodCA9IGRvY3VtZW50LmJvZHkub2Zmc2V0SGVpZ2h0OwogICAgICBjYW52YXMuaWQgPSAncm9vdGNhbnZhcyc7CiAgICAgIHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IoJyNtYWluJykuYXBwZW5kQ2hpbGQoY2FudmFzKTsKICAgIH0sCiAgICBzdGFydFRhZ0NhbnZhcygpIHsKICAgICAgdGhpcy5jcmVhdGVDYW52YXMoKTsKICAgICAgY29uc3QgeyBzcGVlZCB9ID0gdGhpczsKICAgICAgd2luZG93LlRhZ0NhbnZhcy5TdGFydCgncm9vdGNhbnZhcycsICd0YWdzJywgewogICAgICAgIHRleHRDb2xvdXI6IG51bGwsCiAgICAgICAgaW5pdGlhbDogc3BlZWQoKSwKICAgICAgICBkcmFnQ29udHJvbDogMSwKICAgICAgICB0ZXh0SGVpZ2h0OiAyMCwKICAgICAgICBub1NlbGVjdDogdHJ1ZSwKICAgICAgICBsb2NrOiAneHknLAogICAgICB9KTsKICAgIH0sCiAgICByZWxvYWRUYWdDYW52YXMoKSB7CiAgICAgIHdpbmRvdy5UYWdDYW52YXMuUmVsb2FkKCdyb290Y2FudmFzJyk7CiAgICB9LAogICAgY2xvc2VSZXMoKSB7CiAgICAgIHRoaXMuc2hvd1JlcyA9IGZhbHNlOwogICAgfSwKICAgIHRvZ2dsZShmb3JtKSB7CiAgICAgIGNvbnN0IHsgc3BlZWQsIGNvbmZpZyB9ID0gdGhpczsKICAgICAgaWYgKHRoaXMucnVubmluZykgewogICAgICAgIHRoaXMuYXVkaW9TcmMgPSBiZ2F1ZGlvOwogICAgICAgIHRoaXMubG9hZEF1ZGlvKCk7CgogICAgICAgIHdpbmRvdy5UYWdDYW52YXMuU2V0U3BlZWQoJ3Jvb3RjYW52YXMnLCBzcGVlZCgpKTsKICAgICAgICB0aGlzLnNob3dSZXMgPSB0cnVlOwogICAgICAgIHRoaXMucnVubmluZyA9ICF0aGlzLnJ1bm5pbmc7CiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgdGhpcy5yZWxvYWRUYWdDYW52YXMoKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnNob3dSZXMgPSBmYWxzZTsKICAgICAgICBpZiAoIWZvcm0pIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHRoaXMuYXVkaW9TcmMgPSBiZWdpbmF1ZGlvOwogICAgICAgIHRoaXMubG9hZEF1ZGlvKCk7CgogICAgICAgIGNvbnN0IHsgbnVtYmVyIH0gPSBjb25maWc7CiAgICAgICAgY29uc3QgeyBjYXRlZ29yeSwgbW9kZSwgcXR5LCByZW1haW4sIGFsbGluIH0gPSBmb3JtOwogICAgICAgIGxldCBudW0gPSAxOwogICAgICAgIGlmIChtb2RlID09PSAxIHx8IG1vZGUgPT09IDUpIHsKICAgICAgICAgIG51bSA9IG1vZGU7CiAgICAgICAgfSBlbHNlIGlmIChtb2RlID09PSAwKSB7CiAgICAgICAgICBudW0gPSByZW1haW47CiAgICAgICAgfSBlbHNlIGlmIChtb2RlID09PSA5OSkgewogICAgICAgICAgbnVtID0gcXR5OwogICAgICAgIH0KICAgICAgICBjb25zdCByZXNBcnIgPSBsdWNreWRyYXdIYW5kbGVyKAogICAgICAgICAgbnVtYmVyLAogICAgICAgICAgYWxsaW4gPyBbXSA6IHRoaXMuYWxscmVzdWx0LAogICAgICAgICAgbnVtCiAgICAgICAgKTsKICAgICAgICB0aGlzLnJlc0FyciA9IHJlc0FycjsKCiAgICAgICAgdGhpcy5jYXRlZ29yeSA9IGNhdGVnb3J5OwogICAgICAgIGlmICghdGhpcy5yZXN1bHRbY2F0ZWdvcnldKSB7CiAgICAgICAgICB0aGlzLiRzZXQodGhpcy5yZXN1bHQsIGNhdGVnb3J5LCBbXSk7CiAgICAgICAgfQogICAgICAgIGNvbnN0IG9sZFJlcyA9IHRoaXMucmVzdWx0W2NhdGVnb3J5XSB8fCBbXTsKICAgICAgICBjb25zdCBkYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5yZXN1bHQsIHsKICAgICAgICAgIFtjYXRlZ29yeV06IG9sZFJlcy5jb25jYXQocmVzQXJyKSwKICAgICAgICB9KTsKICAgICAgICB0aGlzLnJlc3VsdCA9IGRhdGE7CiAgICAgICAgd2luZG93LlRhZ0NhbnZhcy5TZXRTcGVlZCgncm9vdGNhbnZhcycsIFs1LCAxXSk7CiAgICAgICAgdGhpcy5ydW5uaW5nID0gIXRoaXMucnVubmluZzsKICAgICAgfQogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <div id=\"root\">\n    <header>\n      <Publicity v-show=\"!running\" />\n      <el-button class=\"res\" type=\"text\" @click=\"showResult = true\">\n        抽奖结果\n      </el-button>\n      <el-button class=\"con\" type=\"text\" @click=\"showConfig = true\">\n        抽奖配置\n      </el-button>\n    </header>\n    <div id=\"main\" :class=\"{ mask: showRes }\"></div>\n    <div id=\"tags\">\n      <ul v-for=\"item in datas\" :key=\"item.key\">\n        <li>\n          <a\n            href=\"javascript:void(0);\"\n            :style=\"{\n              color: '#fff',\n            }\"\n          >\n            {{ item.name ? item.name : item.key }}\n            <img v-if=\"item.photo\" :src=\"item.photo\" :width=\"50\" :height=\"50\" />\n          </a>\n        </li>\n      </ul>\n    </div>\n    <transition name=\"bounce\">\n      <div id=\"resbox\" v-show=\"showRes\">\n        <p @click=\"showRes = false\">{{ categoryName }}抽奖结果：</p>\n        <div class=\"container\">\n          <span\n            v-for=\"item in resArr\"\n            :key=\"item\"\n            class=\"itemres\"\n            :style=\"resCardStyle\"\n            :data-id=\"item\"\n            @click=\"showRes = false\"\n            :class=\"{\n              numberOver:\n                !!photos.find((d) => d.id === item) ||\n                !!list.find((d) => d.key === item),\n            }\"\n          >\n            <span class=\"cont\" v-if=\"!photos.find((d) => d.id === item)\">\n              <span\n                v-if=\"!!list.find((d) => d.key === item)\"\n                :style=\"{\n                  fontSize: '40px',\n                }\"\n              >\n                {{ list.find((d) => d.key === item).name }}\n              </span>\n              <span v-else>\n                {{ item }}\n              </span>\n            </span>\n            <img\n              v-if=\"photos.find((d) => d.id === item)\"\n              :src=\"photos.find((d) => d.id === item).value\"\n              alt=\"photo\"\n              :width=\"160\"\n              :height=\"160\"\n            />\n          </span>\n        </div>\n      </div>\n    </transition>\n\n    <el-button\n      class=\"audio\"\n      type=\"text\"\n      @click=\"\n        () => {\n          playAudio(!audioPlaying);\n        }\n      \"\n    >\n      <i\n        class=\"iconfont\"\n        :class=\"[audioPlaying ? 'iconstop' : 'iconplay1']\"\n      ></i>\n    </el-button>\n\n    <LotteryConfig :visible.sync=\"showConfig\" @resetconfig=\"reloadTagCanvas\" />\n    <Tool\n      @toggle=\"toggle\"\n      @resetConfig=\"reloadTagCanvas\"\n      @getPhoto=\"getPhoto\"\n      :running=\"running\"\n      :closeRes=\"closeRes\"\n    />\n    <Result :visible.sync=\"showResult\"></Result>\n\n    <span class=\"copy-right\">\n      Copyright©zhangyongfeng5350@gmail.com\n    </span>\n\n    <audio\n      id=\"audiobg\"\n      preload=\"auto\"\n      controls\n      autoplay\n      loop\n      @play=\"playHandler\"\n      @pause=\"pauseHandler\"\n    >\n      <source :src=\"audioSrc\" />\n      你的浏览器不支持audio标签\n    </audio>\n  </div>\n</template>\n<script>\nimport LotteryConfig from '@/components/LotteryConfig';\nimport Publicity from '@/components/Publicity';\nimport Tool from '@/components/Tool';\nimport bgaudio from '@/assets/bg.mp3';\nimport beginaudio from '@/assets/begin.mp3';\nimport {\n  getData,\n  configField,\n  resultField,\n  newLotteryField,\n  conversionCategoryName,\n  listField,\n} from '@/helper/index';\nimport { luckydrawHandler } from '@/helper/algorithm';\nimport Result from '@/components/Result';\nimport { database, DB_STORE_NAME } from '@/helper/db';\nexport default {\n  name: 'App',\n\n  components: { LotteryConfig, Publicity, Tool, Result },\n\n  computed: {\n    resCardStyle() {\n      const style = { fontSize: '30px' };\n      const { number } = this.config;\n      if (number < 100) {\n        style.fontSize = '100px';\n      } else if (number < 1000) {\n        style.fontSize = '80px';\n      } else if (number < 10000) {\n        style.fontSize = '60px';\n      }\n      return style;\n    },\n    config: {\n      get() {\n        return this.$store.state.config;\n      },\n    },\n    result: {\n      get() {\n        return this.$store.state.result;\n      },\n      set(val) {\n        this.$store.commit('setResult', val);\n      },\n    },\n    list() {\n      return this.$store.state.list;\n    },\n    allresult() {\n      let allresult = [];\n      for (const key in this.result) {\n        if (this.result.hasOwnProperty(key)) {\n          const element = this.result[key];\n          allresult = allresult.concat(element);\n        }\n      }\n      return allresult;\n    },\n    datas() {\n      const { number } = this.config;\n      const nums = number >= 1500 ? 500 : this.config.number;\n      const configNum = number > 1500 ? Math.floor(number / 3) : number;\n      const randomShowNums = luckydrawHandler(configNum, [], nums);\n      const randomShowDatas = randomShowNums.map((item) => {\n        const listData = this.list.find((d) => d.key === item);\n        const photo = this.photos.find((d) => d.id === item);\n        return {\n          key: item * (number > 1500 ? 3 : 1),\n          name: listData ? listData.name : '',\n          photo: photo ? photo.value : '',\n        };\n      });\n      return randomShowDatas;\n    },\n    categoryName() {\n      return conversionCategoryName(this.category);\n    },\n    photos() {\n      return this.$store.state.photos;\n    },\n  },\n  created() {\n    const data = getData(configField);\n    if (data) {\n      this.$store.commit('setConfig', Object.assign({}, data));\n    }\n    const result = getData(resultField);\n    if (result) {\n      this.$store.commit('setResult', result);\n    }\n\n    const newLottery = getData(newLotteryField);\n    if (newLottery) {\n      const config = this.config;\n      newLottery.forEach((item) => {\n        this.$store.commit('setNewLottery', item);\n        if (!config[item.key]) {\n          this.$set(config, item.key, 0);\n        }\n      });\n      this.$store.commit('setConfig', config);\n    }\n\n    const list = getData(listField);\n    if (list) {\n      this.$store.commit('setList', list);\n    }\n  },\n\n  data() {\n    return {\n      running: false,\n      showRes: false,\n      showConfig: false,\n      showResult: false,\n      resArr: [],\n      category: '',\n      audioPlaying: false,\n      audioSrc: bgaudio,\n    };\n  },\n  watch: {\n    photos: {\n      deep: true,\n      handler() {\n        this.$nextTick(() => {\n          this.reloadTagCanvas();\n        });\n      },\n    },\n  },\n  mounted() {\n    this.startTagCanvas();\n    setTimeout(() => {\n      this.getPhoto();\n    }, 1000);\n    window.addEventListener('resize', this.reportWindowSize);\n  },\n  beforeDestroy() {\n    window.removeEventListener('resize', this.reportWindowSize);\n  },\n  methods: {\n    reportWindowSize() {\n      const AppCanvas = this.$el.querySelector('#rootcanvas');\n      if (AppCanvas.parentElement) {\n        AppCanvas.parentElement.removeChild(AppCanvas);\n      }\n      this.startTagCanvas();\n    },\n    playHandler() {\n      this.audioPlaying = true;\n    },\n    pauseHandler() {\n      this.audioPlaying = false;\n    },\n    playAudio(type) {\n      if (type) {\n        this.$el.querySelector('#audiobg').play();\n      } else {\n        this.$el.querySelector('#audiobg').pause();\n      }\n    },\n    loadAudio() {\n      this.$el.querySelector('#audiobg').load();\n      this.$nextTick(() => {\n        this.$el.querySelector('#audiobg').play();\n      });\n    },\n    getPhoto() {\n      database.getAll(DB_STORE_NAME).then((res) => {\n        if (res && res.length > 0) {\n          this.$store.commit('setPhotos', res);\n        }\n      });\n    },\n    speed() {\n      return [0.1 * Math.random() + 0.01, -(0.1 * Math.random() + 0.01)];\n    },\n    createCanvas() {\n      const canvas = document.createElement('canvas');\n      canvas.width = document.body.offsetWidth;\n      canvas.height = document.body.offsetHeight;\n      canvas.id = 'rootcanvas';\n      this.$el.querySelector('#main').appendChild(canvas);\n    },\n    startTagCanvas() {\n      this.createCanvas();\n      const { speed } = this;\n      window.TagCanvas.Start('rootcanvas', 'tags', {\n        textColour: null,\n        initial: speed(),\n        dragControl: 1,\n        textHeight: 20,\n        noSelect: true,\n        lock: 'xy',\n      });\n    },\n    reloadTagCanvas() {\n      window.TagCanvas.Reload('rootcanvas');\n    },\n    closeRes() {\n      this.showRes = false;\n    },\n    toggle(form) {\n      const { speed, config } = this;\n      if (this.running) {\n        this.audioSrc = bgaudio;\n        this.loadAudio();\n\n        window.TagCanvas.SetSpeed('rootcanvas', speed());\n        this.showRes = true;\n        this.running = !this.running;\n        this.$nextTick(() => {\n          this.reloadTagCanvas();\n        });\n      } else {\n        this.showRes = false;\n        if (!form) {\n          return;\n        }\n\n        this.audioSrc = beginaudio;\n        this.loadAudio();\n\n        const { number } = config;\n        const { category, mode, qty, remain, allin } = form;\n        let num = 1;\n        if (mode === 1 || mode === 5) {\n          num = mode;\n        } else if (mode === 0) {\n          num = remain;\n        } else if (mode === 99) {\n          num = qty;\n        }\n        const resArr = luckydrawHandler(\n          number,\n          allin ? [] : this.allresult,\n          num\n        );\n        this.resArr = resArr;\n\n        this.category = category;\n        if (!this.result[category]) {\n          this.$set(this.result, category, []);\n        }\n        const oldRes = this.result[category] || [];\n        const data = Object.assign({}, this.result, {\n          [category]: oldRes.concat(resArr),\n        });\n        this.result = data;\n        window.TagCanvas.SetSpeed('rootcanvas', [5, 1]);\n        this.running = !this.running;\n      }\n    },\n  },\n};\n</script>\n<style lang=\"scss\">\n#root {\n  height: 100%;\n  position: relative;\n  background-image: url('./assets/bg1.jpg');\n  background-size: 100% 100%;\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-color: #121936;\n  .mask {\n    -webkit-filter: blur(5px);\n    filter: blur(5px);\n  }\n  header {\n    height: 50px;\n    line-height: 50px;\n    position: relative;\n    .el-button {\n      position: absolute;\n      top: 17px;\n      padding: 0;\n      z-index: 9999;\n      &.con {\n        right: 20px;\n      }\n      &.res {\n        right: 100px;\n      }\n    }\n  }\n  .audio {\n    position: absolute;\n    top: 100px;\n    right: 30px;\n    width: 40px;\n    height: 40px;\n    line-height: 40px;\n    border: 1px solid #fff;\n    border-radius: 50%;\n    padding: 0;\n    text-align: center;\n    .iconfont {\n      position: relative;\n      left: 1px;\n    }\n  }\n  .copy-right {\n    position: absolute;\n    right: 0;\n    bottom: 0;\n    color: #ccc;\n    font-size: 12px;\n  }\n  .bounce-enter-active {\n    animation: bounce-in 1.5s;\n  }\n  .bounce-leave-active {\n    animation: bounce-in 0s reverse;\n  }\n}\n#main {\n  height: 100%;\n}\n\n#resbox {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 1280px;\n  transform: translateX(-50%) translateY(-50%);\n  text-align: center;\n  p {\n    color: red;\n    font-size: 50px;\n    line-height: 120px;\n  }\n  .container {\n    display: flex;\n    justify-content: center;\n    flex-wrap: wrap;\n  }\n  .itemres {\n    background: #fff;\n    width: 160px;\n    height: 160px;\n    border-radius: 4px;\n    border: 1px solid #ccc;\n    line-height: 160px;\n    font-weight: bold;\n    margin-right: 20px;\n    margin-bottom: 20px;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    position: relative;\n    .cont {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    }\n    &.numberOver::before {\n      content: attr(data-id);\n      width: 30px;\n      height: 22px;\n      line-height: 22px;\n      background-color: #fff;\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      font-size: 14px;\n      // border-radius: 50%;\n      z-index: 1;\n    }\n  }\n}\n</style>\n"]}]}