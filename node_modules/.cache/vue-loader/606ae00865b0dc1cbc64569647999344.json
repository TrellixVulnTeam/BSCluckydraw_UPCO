{"remainingRequest":"/Users/zhangyangzuo/Downloads/BSC-lucky-draw/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhangyangzuo/Downloads/BSC-lucky-draw/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhangyangzuo/Downloads/BSC-lucky-draw/src/App.vue","mtime":1636611834178},{"path":"/Users/zhangyangzuo/Downloads/BSC-lucky-draw/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zhangyangzuo/Downloads/BSC-lucky-draw/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhangyangzuo/Downloads/BSC-lucky-draw/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBMb3R0ZXJ5Q29uZmlnIGZyb20gJ0AvY29tcG9uZW50cy9Mb3R0ZXJ5Q29uZmlnJzsKaW1wb3J0IFB1YmxpY2l0eSBmcm9tICdAL2NvbXBvbmVudHMvUHVibGljaXR5JzsKaW1wb3J0IFRvb2wgZnJvbSAnQC9jb21wb25lbnRzL1Rvb2wnOwppbXBvcnQgYmdhdWRpbyBmcm9tICdAL2Fzc2V0cy9iZy5tcDMnOwppbXBvcnQgYmVnaW5hdWRpbyBmcm9tICdAL2Fzc2V0cy9iZWdpbi5tcDMnOwppbXBvcnQgewogIGdldERhdGEsCiAgY29uZmlnRmllbGQsCiAgcmVzdWx0RmllbGQsCiAgbmV3TG90dGVyeUZpZWxkLAogIGNvbnZlcnNpb25DYXRlZ29yeU5hbWUsCiAgbGlzdEZpZWxkLAp9IGZyb20gJ0AvaGVscGVyL2luZGV4JzsKaW1wb3J0IHsgbHVja3lkcmF3SGFuZGxlciB9IGZyb20gJ0AvaGVscGVyL2FsZ29yaXRobSc7CmltcG9ydCBSZXN1bHQgZnJvbSAnQC9jb21wb25lbnRzL1Jlc3VsdCc7CmltcG9ydCB7IGRhdGFiYXNlLCBEQl9TVE9SRV9OQU1FIH0gZnJvbSAnQC9oZWxwZXIvZGInOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0FwcCcsCgogIGNvbXBvbmVudHM6IHsgTG90dGVyeUNvbmZpZywgUHVibGljaXR5LCBUb29sLCBSZXN1bHQgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIHJlc0NhcmRTdHlsZSgpIHsKICAgICAgY29uc3Qgc3R5bGUgPSB7IGZvbnRTaXplOiAnMzBweCcgfTsKICAgICAgY29uc3QgeyBudW1iZXIgfSA9IHRoaXMuY29uZmlnOwogICAgICBpZiAobnVtYmVyIDwgMTAwKSB7CiAgICAgICAgc3R5bGUuZm9udFNpemUgPSAnNDBweCc7CiAgICAgIH0gZWxzZSBpZiAobnVtYmVyIDwgMTAwMCkgewogICAgICAgIHN0eWxlLmZvbnRTaXplID0gJzgwcHgnOwogICAgICB9IGVsc2UgaWYgKG51bWJlciA8IDEwMDAwKSB7CiAgICAgICAgc3R5bGUuZm9udFNpemUgPSAnNjBweCc7CiAgICAgIH0KICAgICAgcmV0dXJuIHN0eWxlOwogICAgfSwKICAgIGNvbmZpZzogewogICAgICBnZXQoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmNvbmZpZzsKICAgICAgfSwKICAgIH0sCiAgICByZXN1bHQ6IHsKICAgICAgZ2V0KCkgewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5yZXN1bHQ7CiAgICAgIH0sCiAgICAgIHNldCh2YWwpIHsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldFJlc3VsdCcsIHZhbCk7CiAgICAgIH0sCiAgICB9LAogICAgbGlzdCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmxpc3Q7CiAgICB9LAogICAgYWxscmVzdWx0KCkgewogICAgICBsZXQgYWxscmVzdWx0ID0gW107CiAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMucmVzdWx0KSB7CiAgICAgICAgaWYgKHRoaXMucmVzdWx0Lmhhc093blByb3BlcnR5KGtleSkpIHsKICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLnJlc3VsdFtrZXldOwogICAgICAgICAgYWxscmVzdWx0ID0gYWxscmVzdWx0LmNvbmNhdChlbGVtZW50KTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIGFsbHJlc3VsdDsKICAgIH0sCiAgICBkYXRhcygpIHsKICAgICAgY29uc3QgeyBudW1iZXIgfSA9IHRoaXMuY29uZmlnOwogICAgICBjb25zdCBudW1zID0gbnVtYmVyID49IDE1MDAgPyA1MDAgOiB0aGlzLmNvbmZpZy5udW1iZXI7CiAgICAgIGNvbnN0IGNvbmZpZ051bSA9IG51bWJlciA+IDE1MDAgPyBNYXRoLmZsb29yKG51bWJlciAvIDMpIDogbnVtYmVyOwogICAgICBjb25zdCByYW5kb21TaG93TnVtcyA9IGx1Y2t5ZHJhd0hhbmRsZXIoY29uZmlnTnVtLCBbXSwgbnVtcyk7CiAgICAgIGNvbnN0IHJhbmRvbVNob3dEYXRhcyA9IHJhbmRvbVNob3dOdW1zLm1hcCgoaXRlbSkgPT4gewogICAgICAgIGNvbnN0IGxpc3REYXRhID0gdGhpcy5saXN0LmZpbmQoKGQpID0+IGQua2V5ID09PSBpdGVtKTsKICAgICAgICBjb25zdCBwaG90byA9IHRoaXMucGhvdG9zLmZpbmQoKGQpID0+IGQuaWQgPT09IGl0ZW0pOwogICAgICAgIHJldHVybiB7CiAgICAgICAgICBrZXk6IGl0ZW0gKiAobnVtYmVyID4gMTUwMCA/IDMgOiAxKSwKICAgICAgICAgIG5hbWU6IGxpc3REYXRhID8gbGlzdERhdGEubmFtZSA6ICcnLAogICAgICAgICAgcGhvdG86IHBob3RvID8gcGhvdG8udmFsdWUgOiAnJywKICAgICAgICB9OwogICAgICB9KTsKICAgICAgcmV0dXJuIHJhbmRvbVNob3dEYXRhczsKICAgIH0sCiAgICBjYXRlZ29yeU5hbWUoKSB7CiAgICAgIHJldHVybiBjb252ZXJzaW9uQ2F0ZWdvcnlOYW1lKHRoaXMuY2F0ZWdvcnkpOwogICAgfSwKICAgIHBob3RvcygpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnBob3RvczsKICAgIH0sCiAgfSwKICBjcmVhdGVkKCkgewogICAgY29uc3QgZGF0YSA9IGdldERhdGEoY29uZmlnRmllbGQpOwogICAgaWYgKGRhdGEpIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRDb25maWcnLCBPYmplY3QuYXNzaWduKHt9LCBkYXRhKSk7CiAgICB9CiAgICBjb25zdCByZXN1bHQgPSBnZXREYXRhKHJlc3VsdEZpZWxkKTsKICAgIGlmIChyZXN1bHQpIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRSZXN1bHQnLCByZXN1bHQpOwogICAgfQoKICAgIGNvbnN0IG5ld0xvdHRlcnkgPSBnZXREYXRhKG5ld0xvdHRlcnlGaWVsZCk7CiAgICBpZiAobmV3TG90dGVyeSkgewogICAgICBjb25zdCBjb25maWcgPSB0aGlzLmNvbmZpZzsKICAgICAgbmV3TG90dGVyeS5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXROZXdMb3R0ZXJ5JywgaXRlbSk7CiAgICAgICAgaWYgKCFjb25maWdbaXRlbS5rZXldKSB7CiAgICAgICAgICB0aGlzLiRzZXQoY29uZmlnLCBpdGVtLmtleSwgMCk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRDb25maWcnLCBjb25maWcpOwogICAgfQoKICAgIGNvbnN0IGxpc3QgPSBnZXREYXRhKGxpc3RGaWVsZCk7CiAgICBpZiAobGlzdCkgewogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldExpc3QnLCBsaXN0KTsKICAgIH0KICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcnVubmluZzogZmFsc2UsCiAgICAgIHNob3dSZXM6IGZhbHNlLAogICAgICBzaG93Q29uZmlnOiBmYWxzZSwKICAgICAgc2hvd1Jlc3VsdDogZmFsc2UsCiAgICAgIHJlc0FycjogW10sCiAgICAgIGNhdGVnb3J5OiAnJywKICAgICAgYXVkaW9QbGF5aW5nOiBmYWxzZSwKICAgICAgYXVkaW9TcmM6IGJnYXVkaW8sCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIHBob3RvczogewogICAgICBkZWVwOiB0cnVlLAogICAgICBoYW5kbGVyKCkgewogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgIHRoaXMucmVsb2FkVGFnQ2FudmFzKCk7CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICB9LAogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuc3RhcnRUYWdDYW52YXMoKTsKICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICB0aGlzLmdldFBob3RvKCk7CiAgICB9LCAxMDAwKTsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLnJlcG9ydFdpbmRvd1NpemUpOwogIH0sCiAgYmVmb3JlRGVzdHJveSgpIHsKICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLnJlcG9ydFdpbmRvd1NpemUpOwogIH0sCiAgbWV0aG9kczogewogICAgcmVwb3J0V2luZG93U2l6ZSgpIHsKICAgICAgY29uc3QgQXBwQ2FudmFzID0gdGhpcy4kZWwucXVlcnlTZWxlY3RvcignI3Jvb3RjYW52YXMnKTsKICAgICAgaWYgKEFwcENhbnZhcy5wYXJlbnRFbGVtZW50KSB7CiAgICAgICAgQXBwQ2FudmFzLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoQXBwQ2FudmFzKTsKICAgICAgfQogICAgICB0aGlzLnN0YXJ0VGFnQ2FudmFzKCk7CiAgICB9LAogICAgcGxheUhhbmRsZXIoKSB7CiAgICAgIHRoaXMuYXVkaW9QbGF5aW5nID0gdHJ1ZTsKICAgIH0sCiAgICBwYXVzZUhhbmRsZXIoKSB7CiAgICAgIHRoaXMuYXVkaW9QbGF5aW5nID0gZmFsc2U7CiAgICB9LAogICAgcGxheUF1ZGlvKHR5cGUpIHsKICAgICAgaWYgKHR5cGUpIHsKICAgICAgICB0aGlzLiRlbC5xdWVyeVNlbGVjdG9yKCcjYXVkaW9iZycpLnBsYXkoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRlbC5xdWVyeVNlbGVjdG9yKCcjYXVkaW9iZycpLnBhdXNlKCk7CiAgICAgIH0KICAgIH0sCiAgICBsb2FkQXVkaW8oKSB7CiAgICAgIHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IoJyNhdWRpb2JnJykubG9hZCgpOwogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdGhpcy4kZWwucXVlcnlTZWxlY3RvcignI2F1ZGlvYmcnKS5wbGF5KCk7CiAgICAgIH0pOwogICAgfSwKICAgIGdldFBob3RvKCkgewogICAgICBkYXRhYmFzZS5nZXRBbGwoREJfU1RPUkVfTkFNRSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgaWYgKHJlcyAmJiByZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRQaG90b3MnLCByZXMpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgc3BlZWQoKSB7CiAgICAgIHJldHVybiBbMC4xICogTWF0aC5yYW5kb20oKSArIDAuMDEsIC0oMC4xICogTWF0aC5yYW5kb20oKSArIDAuMDEpXTsKICAgIH0sCiAgICBjcmVhdGVDYW52YXMoKSB7CiAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpOwogICAgICBjYW52YXMud2lkdGggPSBkb2N1bWVudC5ib2R5Lm9mZnNldFdpZHRoOwogICAgICBjYW52YXMuaGVpZ2h0ID0gZG9jdW1lbnQuYm9keS5vZmZzZXRIZWlnaHQ7CiAgICAgIGNhbnZhcy5pZCA9ICdyb290Y2FudmFzJzsKICAgICAgdGhpcy4kZWwucXVlcnlTZWxlY3RvcignI21haW4nKS5hcHBlbmRDaGlsZChjYW52YXMpOwogICAgfSwKICAgIHN0YXJ0VGFnQ2FudmFzKCkgewogICAgICB0aGlzLmNyZWF0ZUNhbnZhcygpOwogICAgICBjb25zdCB7IHNwZWVkIH0gPSB0aGlzOwogICAgICB3aW5kb3cuVGFnQ2FudmFzLlN0YXJ0KCdyb290Y2FudmFzJywgJ3RhZ3MnLCB7CiAgICAgICAgdGV4dENvbG91cjogbnVsbCwKICAgICAgICBpbml0aWFsOiBzcGVlZCgpLAogICAgICAgIGRyYWdDb250cm9sOiAxLAogICAgICAgIHRleHRIZWlnaHQ6IDIwLAogICAgICAgIG5vU2VsZWN0OiB0cnVlLAogICAgICAgIGxvY2s6ICd4eScsCiAgICAgIH0pOwogICAgfSwKICAgIHJlbG9hZFRhZ0NhbnZhcygpIHsKICAgICAgd2luZG93LlRhZ0NhbnZhcy5SZWxvYWQoJ3Jvb3RjYW52YXMnKTsKICAgIH0sCiAgICBjbG9zZVJlcygpIHsKICAgICAgdGhpcy5zaG93UmVzID0gZmFsc2U7CiAgICB9LAogICAgdG9nZ2xlKGZvcm0pIHsKICAgICAgY29uc3QgeyBzcGVlZCwgY29uZmlnIH0gPSB0aGlzOwogICAgICBpZiAodGhpcy5ydW5uaW5nKSB7CiAgICAgICAgdGhpcy5hdWRpb1NyYyA9IGJnYXVkaW87CiAgICAgICAgdGhpcy5sb2FkQXVkaW8oKTsKCiAgICAgICAgd2luZG93LlRhZ0NhbnZhcy5TZXRTcGVlZCgncm9vdGNhbnZhcycsIHNwZWVkKCkpOwogICAgICAgIHRoaXMuc2hvd1JlcyA9IHRydWU7CiAgICAgICAgdGhpcy5ydW5uaW5nID0gIXRoaXMucnVubmluZzsKICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICB0aGlzLnJlbG9hZFRhZ0NhbnZhcygpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc2hvd1JlcyA9IGZhbHNlOwogICAgICAgIGlmICghZm9ybSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5hdWRpb1NyYyA9IGJlZ2luYXVkaW87CiAgICAgICAgdGhpcy5sb2FkQXVkaW8oKTsKCiAgICAgICAgY29uc3QgeyBudW1iZXIgfSA9IGNvbmZpZzsKICAgICAgICBjb25zdCB7IGNhdGVnb3J5LCBtb2RlLCBxdHksIHJlbWFpbiwgYWxsaW4gfSA9IGZvcm07CiAgICAgICAgbGV0IG51bSA9IDE7CiAgICAgICAgaWYgKG1vZGUgPT09IDEgfHwgbW9kZSA9PT0gNSkgewogICAgICAgICAgbnVtID0gbW9kZTsKICAgICAgICB9IGVsc2UgaWYgKG1vZGUgPT09IDApIHsKICAgICAgICAgIG51bSA9IHJlbWFpbjsKICAgICAgICB9IGVsc2UgaWYgKG1vZGUgPT09IDk5KSB7CiAgICAgICAgICBudW0gPSBxdHk7CiAgICAgICAgfQogICAgICAgIGNvbnN0IHJlc0FyciA9IGx1Y2t5ZHJhd0hhbmRsZXIoCiAgICAgICAgICBudW1iZXIsCiAgICAgICAgICBhbGxpbiA/IFtdIDogdGhpcy5hbGxyZXN1bHQsCiAgICAgICAgICBudW0KICAgICAgICApOwogICAgICAgIHRoaXMucmVzQXJyID0gcmVzQXJyOwoKICAgICAgICB0aGlzLmNhdGVnb3J5ID0gY2F0ZWdvcnk7CiAgICAgICAgaWYgKCF0aGlzLnJlc3VsdFtjYXRlZ29yeV0pIHsKICAgICAgICAgIHRoaXMuJHNldCh0aGlzLnJlc3VsdCwgY2F0ZWdvcnksIFtdKTsKICAgICAgICB9CiAgICAgICAgY29uc3Qgb2xkUmVzID0gdGhpcy5yZXN1bHRbY2F0ZWdvcnldIHx8IFtdOwogICAgICAgIGNvbnN0IGRhdGEgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnJlc3VsdCwgewogICAgICAgICAgW2NhdGVnb3J5XTogb2xkUmVzLmNvbmNhdChyZXNBcnIpLAogICAgICAgIH0pOwogICAgICAgIHRoaXMucmVzdWx0ID0gZGF0YTsKICAgICAgICB3aW5kb3cuVGFnQ2FudmFzLlNldFNwZWVkKCdyb290Y2FudmFzJywgWzUsIDFdKTsKICAgICAgICB0aGlzLnJ1bm5pbmcgPSAhdGhpcy5ydW5uaW5nOwogICAgICB9CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <div id=\"root\">\n    <header>\n      <Publicity v-show=\"!running\" />\n      <el-button class=\"res\" type=\"text\" @click=\"showResult = true\">\n        抽奖结果\n      </el-button>\n      <el-button class=\"con\" type=\"text\" @click=\"showConfig = true\">\n        抽奖配置\n      </el-button>\n    </header>\n    <div id=\"main\" :class=\"{ mask: showRes }\"></div>\n    <div id=\"tags\">\n      <ul v-for=\"item in datas\" :key=\"item.key\">\n        <li>\n          <a\n            href=\"javascript:void(0);\"\n            :style=\"{\n              color: '#fff',\n            }\"\n          >\n            {{ item.name ? item.name : item.key }}\n            <img v-if=\"item.photo\" :src=\"item.photo\" :width=\"50\" :height=\"50\" />\n          </a>\n        </li>\n      </ul>\n    </div>\n    <transition name=\"bounce\">\n      <div id=\"resbox\" v-show=\"showRes\">\n        <p @click=\"showRes = false\">{{ categoryName }}抽奖结果：</p>\n        <div class=\"container\">\n          <span\n            v-for=\"item in resArr\"\n            :key=\"item\"\n            class=\"itemres\"\n            :style=\"resCardStyle\"\n            :data-id=\"item\"\n            @click=\"showRes = false\"\n            :class=\"{\n              numberOver:\n                !!photos.find((d) => d.id === item) ||\n                !!list.find((d) => d.key === item),\n            }\"\n          >\n            <span class=\"cont\" v-if=\"!photos.find((d) => d.id === item)\">\n              <span\n                v-if=\"!!list.find((d) => d.key === item)\"\n                :style=\"{\n                  fontSize: '40px',\n                }\"\n              >\n                {{ list.find((d) => d.key === item).name }}\n              </span>\n              <span v-else>\n                {{ item }}\n              </span>\n            </span>\n            <img\n              v-if=\"photos.find((d) => d.id === item)\"\n              :src=\"photos.find((d) => d.id === item).value\"\n              alt=\"photo\"\n              :width=\"160\"\n              :height=\"160\"\n            />\n          </span>\n        </div>\n      </div>\n    </transition>\n\n    <el-button\n      class=\"audio\"\n      type=\"text\"\n      @click=\"\n        () => {\n          playAudio(!audioPlaying);\n        }\n      \"\n    >\n      <i\n        class=\"iconfont\"\n        :class=\"[audioPlaying ? 'iconstop' : 'iconplay1']\"\n      ></i>\n    </el-button>\n\n    <LotteryConfig :visible.sync=\"showConfig\" @resetconfig=\"reloadTagCanvas\" />\n    <Tool\n      @toggle=\"toggle\"\n      @resetConfig=\"reloadTagCanvas\"\n      @getPhoto=\"getPhoto\"\n      :running=\"running\"\n      :closeRes=\"closeRes\"\n    />\n    <Result :visible.sync=\"showResult\"></Result>\n\n    <span class=\"copy-right\">\n      Copyright© UBS BSC China \n    </span>\n\n    <audio\n      id=\"audiobg\"\n      preload=\"auto\"\n      controls\n      autoplay\n      loop\n      @play=\"playHandler\"\n      @pause=\"pauseHandler\"\n    >\n      <source :src=\"audioSrc\" />\n      你的浏览器不支持audio标签\n    </audio>\n  </div>\n</template>\n<script>\nimport LotteryConfig from '@/components/LotteryConfig';\nimport Publicity from '@/components/Publicity';\nimport Tool from '@/components/Tool';\nimport bgaudio from '@/assets/bg.mp3';\nimport beginaudio from '@/assets/begin.mp3';\nimport {\n  getData,\n  configField,\n  resultField,\n  newLotteryField,\n  conversionCategoryName,\n  listField,\n} from '@/helper/index';\nimport { luckydrawHandler } from '@/helper/algorithm';\nimport Result from '@/components/Result';\nimport { database, DB_STORE_NAME } from '@/helper/db';\nexport default {\n  name: 'App',\n\n  components: { LotteryConfig, Publicity, Tool, Result },\n\n  computed: {\n    resCardStyle() {\n      const style = { fontSize: '30px' };\n      const { number } = this.config;\n      if (number < 100) {\n        style.fontSize = '40px';\n      } else if (number < 1000) {\n        style.fontSize = '80px';\n      } else if (number < 10000) {\n        style.fontSize = '60px';\n      }\n      return style;\n    },\n    config: {\n      get() {\n        return this.$store.state.config;\n      },\n    },\n    result: {\n      get() {\n        return this.$store.state.result;\n      },\n      set(val) {\n        this.$store.commit('setResult', val);\n      },\n    },\n    list() {\n      return this.$store.state.list;\n    },\n    allresult() {\n      let allresult = [];\n      for (const key in this.result) {\n        if (this.result.hasOwnProperty(key)) {\n          const element = this.result[key];\n          allresult = allresult.concat(element);\n        }\n      }\n      return allresult;\n    },\n    datas() {\n      const { number } = this.config;\n      const nums = number >= 1500 ? 500 : this.config.number;\n      const configNum = number > 1500 ? Math.floor(number / 3) : number;\n      const randomShowNums = luckydrawHandler(configNum, [], nums);\n      const randomShowDatas = randomShowNums.map((item) => {\n        const listData = this.list.find((d) => d.key === item);\n        const photo = this.photos.find((d) => d.id === item);\n        return {\n          key: item * (number > 1500 ? 3 : 1),\n          name: listData ? listData.name : '',\n          photo: photo ? photo.value : '',\n        };\n      });\n      return randomShowDatas;\n    },\n    categoryName() {\n      return conversionCategoryName(this.category);\n    },\n    photos() {\n      return this.$store.state.photos;\n    },\n  },\n  created() {\n    const data = getData(configField);\n    if (data) {\n      this.$store.commit('setConfig', Object.assign({}, data));\n    }\n    const result = getData(resultField);\n    if (result) {\n      this.$store.commit('setResult', result);\n    }\n\n    const newLottery = getData(newLotteryField);\n    if (newLottery) {\n      const config = this.config;\n      newLottery.forEach((item) => {\n        this.$store.commit('setNewLottery', item);\n        if (!config[item.key]) {\n          this.$set(config, item.key, 0);\n        }\n      });\n      this.$store.commit('setConfig', config);\n    }\n\n    const list = getData(listField);\n    if (list) {\n      this.$store.commit('setList', list);\n    }\n  },\n\n  data() {\n    return {\n      running: false,\n      showRes: false,\n      showConfig: false,\n      showResult: false,\n      resArr: [],\n      category: '',\n      audioPlaying: false,\n      audioSrc: bgaudio,\n    };\n  },\n  watch: {\n    photos: {\n      deep: true,\n      handler() {\n        this.$nextTick(() => {\n          this.reloadTagCanvas();\n        });\n      },\n    },\n  },\n  mounted() {\n    this.startTagCanvas();\n    setTimeout(() => {\n      this.getPhoto();\n    }, 1000);\n    window.addEventListener('resize', this.reportWindowSize);\n  },\n  beforeDestroy() {\n    window.removeEventListener('resize', this.reportWindowSize);\n  },\n  methods: {\n    reportWindowSize() {\n      const AppCanvas = this.$el.querySelector('#rootcanvas');\n      if (AppCanvas.parentElement) {\n        AppCanvas.parentElement.removeChild(AppCanvas);\n      }\n      this.startTagCanvas();\n    },\n    playHandler() {\n      this.audioPlaying = true;\n    },\n    pauseHandler() {\n      this.audioPlaying = false;\n    },\n    playAudio(type) {\n      if (type) {\n        this.$el.querySelector('#audiobg').play();\n      } else {\n        this.$el.querySelector('#audiobg').pause();\n      }\n    },\n    loadAudio() {\n      this.$el.querySelector('#audiobg').load();\n      this.$nextTick(() => {\n        this.$el.querySelector('#audiobg').play();\n      });\n    },\n    getPhoto() {\n      database.getAll(DB_STORE_NAME).then((res) => {\n        if (res && res.length > 0) {\n          this.$store.commit('setPhotos', res);\n        }\n      });\n    },\n    speed() {\n      return [0.1 * Math.random() + 0.01, -(0.1 * Math.random() + 0.01)];\n    },\n    createCanvas() {\n      const canvas = document.createElement('canvas');\n      canvas.width = document.body.offsetWidth;\n      canvas.height = document.body.offsetHeight;\n      canvas.id = 'rootcanvas';\n      this.$el.querySelector('#main').appendChild(canvas);\n    },\n    startTagCanvas() {\n      this.createCanvas();\n      const { speed } = this;\n      window.TagCanvas.Start('rootcanvas', 'tags', {\n        textColour: null,\n        initial: speed(),\n        dragControl: 1,\n        textHeight: 20,\n        noSelect: true,\n        lock: 'xy',\n      });\n    },\n    reloadTagCanvas() {\n      window.TagCanvas.Reload('rootcanvas');\n    },\n    closeRes() {\n      this.showRes = false;\n    },\n    toggle(form) {\n      const { speed, config } = this;\n      if (this.running) {\n        this.audioSrc = bgaudio;\n        this.loadAudio();\n\n        window.TagCanvas.SetSpeed('rootcanvas', speed());\n        this.showRes = true;\n        this.running = !this.running;\n        this.$nextTick(() => {\n          this.reloadTagCanvas();\n        });\n      } else {\n        this.showRes = false;\n        if (!form) {\n          return;\n        }\n\n        this.audioSrc = beginaudio;\n        this.loadAudio();\n\n        const { number } = config;\n        const { category, mode, qty, remain, allin } = form;\n        let num = 1;\n        if (mode === 1 || mode === 5) {\n          num = mode;\n        } else if (mode === 0) {\n          num = remain;\n        } else if (mode === 99) {\n          num = qty;\n        }\n        const resArr = luckydrawHandler(\n          number,\n          allin ? [] : this.allresult,\n          num\n        );\n        this.resArr = resArr;\n\n        this.category = category;\n        if (!this.result[category]) {\n          this.$set(this.result, category, []);\n        }\n        const oldRes = this.result[category] || [];\n        const data = Object.assign({}, this.result, {\n          [category]: oldRes.concat(resArr),\n        });\n        this.result = data;\n        window.TagCanvas.SetSpeed('rootcanvas', [5, 1]);\n        this.running = !this.running;\n      }\n    },\n  },\n};\n</script>\n<style lang=\"scss\">\n#root {\n  height: 100%;\n  position: relative;\n  background-image: url('./assets/bg1.jpg');\n  background-size: 100% 100%;\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-color: #121936;\n  .mask {\n    -webkit-filter: blur(5px);\n    filter: blur(5px);\n  }\n  header {\n    height: 50px;\n    line-height: 50px;\n    position: relative;\n    .el-button {\n      position: absolute;\n      top: 17px;\n      padding: 0;\n      z-index: 9999;\n      &.con {\n        right: 20px;\n      }\n      &.res {\n        right: 100px;\n      }\n    }\n  }\n  .audio {\n    position: absolute;\n    top: 100px;\n    right: 30px;\n    width: 40px;\n    height: 40px;\n    line-height: 40px;\n    border: 1px solid #fff;\n    border-radius: 50%;\n    padding: 0;\n    text-align: center;\n    .iconfont {\n      position: relative;\n      left: 1px;\n    }\n  }\n  .copy-right {\n    position: absolute;\n    right: 0;\n    bottom: 0;\n    color: #ccc;\n    font-size: 12px;\n  }\n  .bounce-enter-active {\n    animation: bounce-in 1.5s;\n  }\n  .bounce-leave-active {\n    animation: bounce-in 0s reverse;\n  }\n}\n#main {\n  height: 100%;\n}\n\n#resbox {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 1280px;\n  transform: translateX(-50%) translateY(-50%);\n  text-align: center;\n  p {\n    color: red;\n    font-size: 50px;\n    line-height: 120px;\n  }\n  .container {\n    display: flex;\n    justify-content: center;\n    flex-wrap: wrap;\n  }\n  .itemres {\n    background: #fff;\n    width: 600px;\n    height: 160px;\n    border-radius: 4px;\n    border: 1px solid #ccc;\n    line-height: 160px;\n    font-weight: bold;\n    margin-right: 20px;\n    margin-bottom: 20px;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    position: relative;\n    .cont {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    }\n    &.numberOver::before {\n      content: attr(data-id);\n      width: 30px;\n      height: 22px;\n      line-height: 22px;\n      background-color: #fff;\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      font-size: 14px;\n      // border-radius: 50%;\n      z-index: 1;\n    }\n  }\n}\n</style>\n"]}]}