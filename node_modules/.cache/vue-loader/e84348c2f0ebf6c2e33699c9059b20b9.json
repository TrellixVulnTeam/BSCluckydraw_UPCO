{"remainingRequest":"/Users/zhangyangzuo/Downloads/lucky-draw-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhangyangzuo/Downloads/lucky-draw-master/src/components/LotteryConfig.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhangyangzuo/Downloads/lucky-draw-master/src/components/LotteryConfig.vue","mtime":1617288854000},{"path":"/Users/zhangyangzuo/Downloads/lucky-draw-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhangyangzuo/Downloads/lucky-draw-master/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zhangyangzuo/Downloads/lucky-draw-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhangyangzuo/Downloads/lucky-draw-master/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHNldERhdGEsIGNvbmZpZ0ZpZWxkIH0gZnJvbSAnQC9oZWxwZXIvaW5kZXgnOwppbXBvcnQgeyByYW5kb21OdW0gfSBmcm9tICdAL2hlbHBlci9hbGdvcml0aG0nOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0xvdHRlcnlDb25maWcnLAogIHByb3BzOiB7CiAgICB2aXNpYmxlOiBCb29sZWFuCiAgfSwKICBjb21wdXRlZDogewogICAgZm9ybTogewogICAgICBnZXQoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmNvbmZpZzsKICAgICAgfSwKICAgICAgc2V0KHZhbCkgewogICAgICAgIC8vIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0Q29uZmlnJywgdmFsKTsKICAgICAgICByZXR1cm4gdmFsOwogICAgICB9CiAgICB9LAogICAgc3RvcmVOZXdMb3R0ZXJ5KCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUubmV3TG90dGVyeTsKICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzaG93QWRkTG90dGVyeTogZmFsc2UsCiAgICAgIG5ld0xvdHRlcnk6IHsgbmFtZTogJycgfQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG9uU3VibWl0KCkgewogICAgICBzZXREYXRhKGNvbmZpZ0ZpZWxkLCB0aGlzLmZvcm0pOwogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldENvbmZpZycsIHRoaXMuZm9ybSk7CiAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZTp2aXNpYmxlJywgZmFsc2UpOwoKICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgbWVzc2FnZTogJ+S/neWtmOaIkOWKnycsCiAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgIH0pOwoKICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIHRoaXMuJGVtaXQoJ3Jlc2V0Y29uZmlnJyk7CiAgICAgIH0pOwogICAgfSwKICAgIGFkZExvdHRlcnkoKSB7CiAgICAgIHRoaXMuc2hvd0FkZExvdHRlcnkgPSB0cnVlOwogICAgfSwKICAgIHJhbmRvbUZpZWxkKCkgewogICAgICBjb25zdCBzdHIgPSAnYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXonOwogICAgICBsZXQgZmllbGRTdHIgPSAnJzsKICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IDEwOyBpbmRleCsrKSB7CiAgICAgICAgZmllbGRTdHIgKz0gc3RyLnNwbGl0KCcnKVtyYW5kb21OdW0oMSwgMjcpIC0gMV07CiAgICAgIH0KICAgICAgcmV0dXJuIGAke2ZpZWxkU3RyfSR7RGF0ZS5ub3coKX1gOwogICAgfSwKICAgIGFkZEhhbmRsZXIoKSB7CiAgICAgIGNvbnN0IGZpZWxkID0gdGhpcy5yYW5kb21GaWVsZCgpOwogICAgICBjb25zdCBkYXRhID0gewogICAgICAgIGtleTogZmllbGQsCiAgICAgICAgbmFtZTogdGhpcy5uZXdMb3R0ZXJ5Lm5hbWUKICAgICAgfTsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXROZXdMb3R0ZXJ5JywgZGF0YSk7CgogICAgICB0aGlzLnNob3dBZGRMb3R0ZXJ5ID0gZmFsc2U7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["LotteryConfig.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"LotteryConfig.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <el-dialog\n    :visible=\"visible\"\n    :append-to-body=\"true\"\n    width=\"390px\"\n    @close=\"$emit('update:visible', false)\"\n    class=\"c-LotteryConfig\"\n  >\n    <div class=\"c-LotteryConfigtitle\" slot=\"title\">\n      <span :style=\"{ fontSize: '16px', marginRight: '20px' }\">\n        抽奖配置\n      </span>\n      <el-button size=\"mini\" @click=\"addLottery\">增加奖项</el-button>\n      <el-button size=\"mini\" type=\"primary\" @click=\"onSubmit\"\n        >保存配置</el-button\n      >\n      <el-button size=\"mini\" @click=\"$emit('update:visible', false)\"\n        >取消</el-button\n      >\n    </div>\n    <div class=\"container\">\n      <el-form ref=\"form\" :model=\"form\" size=\"mini\">\n        <el-form-item label=\"抽奖标题\">\n          <el-input v-model=\"form.name\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"抽奖总人数\">\n          <el-input\n            type=\"number\"\n            v-model=\"form.number\"\n            :min=\"1\"\n            :step=\"1\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"一等奖\">\n          <el-input\n            type=\"number\"\n            v-model=\"form.firstPrize\"\n            :min=\"0\"\n            :step=\"1\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item\n          :label=\"newitem.name\"\n          v-for=\"newitem in storeNewLottery\"\n          :key=\"newitem.key\"\n        >\n          <el-input\n            type=\"number\"\n            :min=\"0\"\n            :step=\"1\"\n            v-model=\"form[newitem.key]\"\n            @change=\"\n              val => {\n                form[newitem.key] = Number(val);\n              }\n            \"\n          ></el-input>\n        </el-form-item>\n      </el-form>\n    </div>\n\n    <el-dialog\n      :visible.sync=\"showAddLottery\"\n      :append-to-body=\"true\"\n      width=\"300px\"\n      class=\"dialog-showAddLottery\"\n    >\n      <div class=\"add-title\" slot=\"title\">增加奖项</div>\n      <el-form ref=\"newLottery\" :model=\"newLottery\" size=\"mini\">\n        <el-form-item label=\"奖项名称\">\n          <el-input v-model=\"newLottery.name\"></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"addHandler\">增加奖项</el-button>\n          <el-button @click=\"showAddLottery = false\">取消</el-button>\n        </el-form-item>\n      </el-form>\n    </el-dialog>\n  </el-dialog>\n</template>\n<script>\nimport { setData, configField } from '@/helper/index';\nimport { randomNum } from '@/helper/algorithm';\nexport default {\n  name: 'LotteryConfig',\n  props: {\n    visible: Boolean\n  },\n  computed: {\n    form: {\n      get() {\n        return this.$store.state.config;\n      },\n      set(val) {\n        // this.$store.commit('setConfig', val);\n        return val;\n      }\n    },\n    storeNewLottery() {\n      return this.$store.state.newLottery;\n    }\n  },\n  data() {\n    return {\n      showAddLottery: false,\n      newLottery: { name: '' }\n    };\n  },\n  methods: {\n    onSubmit() {\n      setData(configField, this.form);\n      this.$store.commit('setConfig', this.form);\n      this.$emit('update:visible', false);\n\n      this.$message({\n        message: '保存成功',\n        type: 'success'\n      });\n\n      this.$nextTick(() => {\n        this.$emit('resetconfig');\n      });\n    },\n    addLottery() {\n      this.showAddLottery = true;\n    },\n    randomField() {\n      const str = 'abcdefghijklmnopqrstuvwxyz';\n      let fieldStr = '';\n      for (let index = 0; index < 10; index++) {\n        fieldStr += str.split('')[randomNum(1, 27) - 1];\n      }\n      return `${fieldStr}${Date.now()}`;\n    },\n    addHandler() {\n      const field = this.randomField();\n      const data = {\n        key: field,\n        name: this.newLottery.name\n      };\n      this.$store.commit('setNewLottery', data);\n\n      this.showAddLottery = false;\n    }\n  }\n};\n</script>\n<style lang=\"scss\">\n.c-LotteryConfig {\n  .el-dialog__body {\n    height: 340px;\n    .container {\n      height: 100%;\n      overflow-y: auto;\n      padding: 0 10px;\n    }\n  }\n}\n.dialog-showAddLottery {\n  .el-dialog {\n    height: 186px;\n  }\n}\n</style>\n"]}]}